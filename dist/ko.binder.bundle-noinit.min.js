(function(){function n(){function v(){return null}function l(a){return a?"object"===typeof a||"function"===typeof a:!1}function p(a){if(null!==a&&!l(a))throw new TypeError("Object prototype may only be an Object or null: "+a);}var q=null,e=Object,w=!!e.create||!({__proto__:null}instanceof e),A=e.create||(w?function(a){p(a);return{__proto__:a}}:function(a){function c(){}p(a);if(null===a)throw new SyntaxError("Native Object.create is required to create objects with null prototype");c.prototype=a;return new c}),
B=e.getPrototypeOf||([].__proto__===Array.prototype?function(a){a=a.__proto__;return l(a)?a:null}:v);var m=function(a,c){function k(){}if(void 0===(this&&this instanceof m?this.constructor:void 0))throw new TypeError("Constructor Proxy requires 'new'");if(!l(a)||!l(c))throw new TypeError("Cannot create proxy with a non-object as target or handler");q=function(){a=null;k=function(b){throw new TypeError("Cannot perform '"+b+"' on a proxy that has been revoked");}};setTimeout(function(){q=null},0);var g=
c;c={get:null,set:null,apply:null,construct:null};for(var h in g){if(!(h in c))throw new TypeError("Proxy polyfill does not support trap '"+h+"'");c[h]=g[h]}"function"===typeof g&&(c.apply=g.apply.bind(g));g=B(a);var r=!1,t=!1;if("function"===typeof a){var f=function(){var b=this&&this.constructor===f,d=Array.prototype.slice.call(arguments);k(b?"construct":"apply");return b&&c.construct?c.construct.call(this,a,d):!b&&c.apply?c.apply(a,this,d):b?(d.unshift(a),new (a.bind.apply(a,d))):a.apply(this,
d)};r=!0}else a instanceof Array?(f=[],t=!0):f=w||null!==g?A(g):{};var x=c.get?function(b){k("get");return c.get(this,b,f)}:function(b){k("get");return this[b]},C=c.set?function(b,d){k("set");c.set(this,b,d,f)}:function(b,d){k("set");this[b]=d},y={};e.getOwnPropertyNames(a).forEach(function(b){if(!((r||t)&&b in f)){var d=e.getOwnPropertyDescriptor(a,b);e.defineProperty(f,b,{enumerable:!!d.enumerable,get:x.bind(a,b),set:C.bind(a,b)});y[b]=!0}});h=!0;if(r||t){var D=e.setPrototypeOf||([].__proto__===
Array.prototype?function(b,d){p(d);b.__proto__=d;return b}:v);g&&D(f,g)||(h=!1)}if(c.get||!h)for(var u in a)y[u]||e.defineProperty(f,u,{get:x.bind(a,u)});e.seal(a);e.seal(f);return f};m.revocable=function(a,c){return{proxy:new m(a,c),revoke:q}};return m};var z="undefined"!==typeof process&&"[object process]"==={}.toString.call(process)||"undefined"!==typeof navigator&&"ReactNative"===navigator.product?global:self;z.Proxy||(z.Proxy=n(),z.Proxy.revocable=z.Proxy.revocable);})();
;
/* (The MIT License)
 *
 * Copyright (c) 2012 Brandon Benvie <http://bbenvie.com>
 */

void function(c,h,a){function define(c,a,b){return typeof a==='function'&&(b=a,a=nameOf(b).replace(/_$/,'')),e(c,a,{configurable:!0,writable:!0,value:b})}function nameOf(a){return typeof a!=='function'?'':'name'in a?a.name:i.call(a).match(j)[1]}function createStorage(b){function storage(e,d){return d||arguments.length===2?c.set(e,d):(d=c.get(e),d===a&&(d=b(e),c.set(e,d))),d}var c=new WeakMap;return b||(b=k),storage}var l=Object.getOwnPropertyNames,e=Object.defineProperty,i=Function.prototype.toString,f=Object.create,g=Object.prototype.hasOwnProperty,j=/^\n?function\s?(\w*)?_?\(/;var b=function(){function b(){var a=d(),c={};this.unlock=function(h){var b=k(h);if(g.call(b,a))return b[a](c);var d=f(null,i);return e(b,a,{value:new Function('s','l',j)(c,d)}),d}}var i={value:{writable:!0,value:a}},j='return function(k){if(k===s)return l}',h=f(null),d=function(){var a=Math.random().toString(36).slice(2);return a in h?d():h[a]=a},c=d(),k=function(a){if(g.call(a,c))return a[c];if(!Object.isExtensible(a))throw new TypeError('Object must be extensible');var b=f(null);return e(a,c,{value:b}),b};return define(Object,function getOwnPropertyNames(b){var a=l(b);return g.call(b,c)&&a.splice(a.indexOf(c),1),a}),define(b.prototype,function get(a){return this.unlock(a).value}),define(b.prototype,function set(a,b){this.unlock(a).value=b}),b}();var d=function(i){function WeakMap(a){if(this===c||this==null||this===WeakMap.prototype)return new WeakMap(a);l(this,new b),m(this,a)}function get(b){e(b);var c=d(this).get(b);return c===h?a:c}function set(b,c){e(b),d(this).set(b,c===a?h:c)}function has(b){return e(b),d(this).get(b)!==a}function delete_(b){e(b);var c=d(this),f=c.get(b)!==a;return c.set(b,a),f}function toString(){return d(this),'[object WeakMap]'}var e=function(a){if(a==null||typeof a!=='object'&&typeof a!=='function')throw new TypeError('Invalid WeakMap key')};var l=function(b,c){var a=i.unlock(b);if(a.value)throw new TypeError('Object is already a WeakMap');a.value=c};var d=function(b){var a=i.unlock(b).value;if(!a)throw new TypeError('WeakMap is not generic');return a};var m=function(b,a){a!==null&&typeof a==='object'&&typeof a.forEach==='function'&&a.forEach(function(c,d){c instanceof Array&&c.length===2&&set.call(b,a[d][0],a[d][1])})};try{var f=('return '+delete_).replace('e_','\\u0065'),j=new Function('unwrap','validate',f)(d,e)}catch(a){var j=delete_}var f=(''+Object).split('Object');var g=function toString(){return f[0]+nameOf(this)+f[1]};define(g,g);var k={__proto__:[]}instanceof Array?function(a){a.__proto__=g}:function(a){define(a,g)};return k(WeakMap),[toString,get,set,has,j].forEach(function(a){define(WeakMap.prototype,a),k(a)}),WeakMap}(new b);var k=Object.create?function(){return Object.create(null)}:function(){return{}};typeof module!=='undefined'?module.exports=d:typeof exports!=='undefined'?exports.WeakMap=d:!('WeakMap'in c)&&(c.WeakMap=d),d.createStorage=createStorage,c.WeakMap&&(c.WeakMap.createStorage=createStorage)}((0,eval)('this'))
;
/*!
 * Knockout JavaScript library v3.5.1
 * (c) The Knockout.js team - http://knockoutjs.com/
 * License: MIT (http://www.opensource.org/licenses/mit-license.php)
 */

(function() {(function(n){var A=this||(0,eval)("this"),w=A.document,R=A.navigator,v=A.jQuery,H=A.JSON;v||"undefined"===typeof jQuery||(v=jQuery);(function(n){"function"===typeof define&&define.amd?define(["exports","require"],n):"object"===typeof exports&&"object"===typeof module?n(module.exports||exports):n(A.ko={})})(function(S,T){function K(a,c){return null===a||typeof a in W?a===c:!1}function X(b,c){var d;return function(){d||(d=a.a.setTimeout(function(){d=n;b()},c))}}function Y(b,c){var d;return function(){clearTimeout(d);
d=a.a.setTimeout(b,c)}}function Z(a,c){c&&"change"!==c?"beforeChange"===c?this.pc(a):this.gb(a,c):this.qc(a)}function aa(a,c){null!==c&&c.s&&c.s()}function ba(a,c){var d=this.qd,e=d[r];e.ra||(this.Qb&&this.mb[c]?(d.uc(c,a,this.mb[c]),this.mb[c]=null,--this.Qb):e.I[c]||d.uc(c,a,e.J?{da:a}:d.$c(a)),a.Ja&&a.gd())}var a="undefined"!==typeof S?S:{};a.b=function(b,c){for(var d=b.split("."),e=a,f=0;f<d.length-1;f++)e=e[d[f]];e[d[d.length-1]]=c};a.L=function(a,c,d){a[c]=d};a.version="3.5.1";a.b("version",
a.version);a.options={deferUpdates:!1,useOnlyNativeEvents:!1,foreachHidesDestroyed:!1};a.a=function(){function b(a,b){for(var c in a)f.call(a,c)&&b(c,a[c])}function c(a,b){if(b)for(var c in b)f.call(b,c)&&(a[c]=b[c]);return a}function d(a,b){a.__proto__=b;return a}function e(b,c,d,e){var l=b[c].match(q)||[];a.a.D(d.match(q),function(b){a.a.Na(l,b,e)});b[c]=l.join(" ")}var f=Object.prototype.hasOwnProperty,g={__proto__:[]}instanceof Array,h="function"===typeof Symbol,m={},k={};m[R&&/Firefox\/2/i.test(R.userAgent)?
"KeyboardEvent":"UIEvents"]=["keyup","keydown","keypress"];m.MouseEvents="click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave".split(" ");b(m,function(a,b){if(b.length)for(var c=0,d=b.length;c<d;c++)k[b[c]]=a});var l={propertychange:!0},p=w&&function(){for(var a=3,b=w.createElement("div"),c=b.getElementsByTagName("i");b.innerHTML="\x3c!--[if gt IE "+ ++a+"]><i></i><![endif]--\x3e",c[0];);return 4<a?a:n}(),q=/\S+/g,t;return{Jc:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],
D:function(a,b,c){for(var d=0,e=a.length;d<e;d++)b.call(c,a[d],d,a)},A:"function"==typeof Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b)}:function(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},Lb:function(a,b,c){for(var d=0,e=a.length;d<e;d++)if(b.call(c,a[d],d,a))return a[d];return n},Pa:function(b,c){var d=a.a.A(b,c);0<d?b.splice(d,1):0===d&&b.shift()},wc:function(b){var c=[];b&&a.a.D(b,function(b){0>a.a.A(c,b)&&c.push(b)});return c},Mb:function(a,
b,c){var d=[];if(a)for(var e=0,l=a.length;e<l;e++)d.push(b.call(c,a[e],e));return d},jb:function(a,b,c){var d=[];if(a)for(var e=0,l=a.length;e<l;e++)b.call(c,a[e],e)&&d.push(a[e]);return d},Nb:function(a,b){if(b instanceof Array)a.push.apply(a,b);else for(var c=0,d=b.length;c<d;c++)a.push(b[c]);return a},Na:function(b,c,d){var e=a.a.A(a.a.bc(b),c);0>e?d&&b.push(c):d||b.splice(e,1)},Ba:g,extend:c,setPrototypeOf:d,Ab:g?d:c,P:b,Ga:function(a,b,c){if(!a)return a;var d={},e;for(e in a)f.call(a,e)&&(d[e]=
b.call(c,a[e],e,a));return d},Tb:function(b){for(;b.firstChild;)a.removeNode(b.firstChild)},Yb:function(b){b=a.a.la(b);for(var c=(b[0]&&b[0].ownerDocument||w).createElement("div"),d=0,e=b.length;d<e;d++)c.appendChild(a.oa(b[d]));return c},Ca:function(b,c){for(var d=0,e=b.length,l=[];d<e;d++){var k=b[d].cloneNode(!0);l.push(c?a.oa(k):k)}return l},va:function(b,c){a.a.Tb(b);if(c)for(var d=0,e=c.length;d<e;d++)b.appendChild(c[d])},Xc:function(b,c){var d=b.nodeType?[b]:b;if(0<d.length){for(var e=d[0],
l=e.parentNode,k=0,f=c.length;k<f;k++)l.insertBefore(c[k],e);k=0;for(f=d.length;k<f;k++)a.removeNode(d[k])}},Ua:function(a,b){if(a.length){for(b=8===b.nodeType&&b.parentNode||b;a.length&&a[0].parentNode!==b;)a.splice(0,1);for(;1<a.length&&a[a.length-1].parentNode!==b;)a.length--;if(1<a.length){var c=a[0],d=a[a.length-1];for(a.length=0;c!==d;)a.push(c),c=c.nextSibling;a.push(d)}}return a},Zc:function(a,b){7>p?a.setAttribute("selected",b):a.selected=b},Db:function(a){return null===a||a===n?"":a.trim?
a.trim():a.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},Ud:function(a,b){a=a||"";return b.length>a.length?!1:a.substring(0,b.length)===b},vd:function(a,b){if(a===b)return!0;if(11===a.nodeType)return!1;if(b.contains)return b.contains(1!==a.nodeType?a.parentNode:a);if(b.compareDocumentPosition)return 16==(b.compareDocumentPosition(a)&16);for(;a&&a!=b;)a=a.parentNode;return!!a},Sb:function(b){return a.a.vd(b,b.ownerDocument.documentElement)},kd:function(b){return!!a.a.Lb(b,a.a.Sb)},R:function(a){return a&&
a.tagName&&a.tagName.toLowerCase()},Ac:function(b){return a.onError?function(){try{return b.apply(this,arguments)}catch(c){throw a.onError&&a.onError(c),c;}}:b},setTimeout:function(b,c){return setTimeout(a.a.Ac(b),c)},Gc:function(b){setTimeout(function(){a.onError&&a.onError(b);throw b;},0)},B:function(b,c,d){var e=a.a.Ac(d);d=l[c];if(a.options.useOnlyNativeEvents||d||!v)if(d||"function"!=typeof b.addEventListener)if("undefined"!=typeof b.attachEvent){var k=function(a){e.call(b,a)},f="on"+c;b.attachEvent(f,
k);a.a.K.za(b,function(){b.detachEvent(f,k)})}else throw Error("Browser doesn't support addEventListener or attachEvent");else b.addEventListener(c,e,!1);else t||(t="function"==typeof v(b).on?"on":"bind"),v(b)[t](c,e)},Fb:function(b,c){if(!b||!b.nodeType)throw Error("element must be a DOM node when calling triggerEvent");var d;"input"===a.a.R(b)&&b.type&&"click"==c.toLowerCase()?(d=b.type,d="checkbox"==d||"radio"==d):d=!1;if(a.options.useOnlyNativeEvents||!v||d)if("function"==typeof w.createEvent)if("function"==
typeof b.dispatchEvent)d=w.createEvent(k[c]||"HTMLEvents"),d.initEvent(c,!0,!0,A,0,0,0,0,0,!1,!1,!1,!1,0,b),b.dispatchEvent(d);else throw Error("The supplied element doesn't support dispatchEvent");else if(d&&b.click)b.click();else if("undefined"!=typeof b.fireEvent)b.fireEvent("on"+c);else throw Error("Browser doesn't support triggering events");else v(b).trigger(c)},f:function(b){return a.O(b)?b():b},bc:function(b){return a.O(b)?b.v():b},Eb:function(b,c,d){var l;c&&("object"===typeof b.classList?
(l=b.classList[d?"add":"remove"],a.a.D(c.match(q),function(a){l.call(b.classList,a)})):"string"===typeof b.className.baseVal?e(b.className,"baseVal",c,d):e(b,"className",c,d))},Bb:function(b,c){var d=a.a.f(c);if(null===d||d===n)d="";var e=a.h.firstChild(b);!e||3!=e.nodeType||a.h.nextSibling(e)?a.h.va(b,[b.ownerDocument.createTextNode(d)]):e.data=d;a.a.Ad(b)},Yc:function(a,b){a.name=b;if(7>=p)try{var c=a.name.replace(/[&<>'"]/g,function(a){return"&#"+a.charCodeAt(0)+";"});a.mergeAttributes(w.createElement("<input name='"+
c+"'/>"),!1)}catch(d){}},Ad:function(a){9<=p&&(a=1==a.nodeType?a:a.parentNode,a.style&&(a.style.zoom=a.style.zoom))},wd:function(a){if(p){var b=a.style.width;a.style.width=0;a.style.width=b}},Pd:function(b,c){b=a.a.f(b);c=a.a.f(c);for(var d=[],e=b;e<=c;e++)d.push(e);return d},la:function(a){for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b},Da:function(a){return h?Symbol(a):a},Zd:6===p,$d:7===p,W:p,Lc:function(b,c){for(var d=a.a.la(b.getElementsByTagName("input")).concat(a.a.la(b.getElementsByTagName("textarea"))),
e="string"==typeof c?function(a){return a.name===c}:function(a){return c.test(a.name)},l=[],k=d.length-1;0<=k;k--)e(d[k])&&l.push(d[k]);return l},Nd:function(b){return"string"==typeof b&&(b=a.a.Db(b))?H&&H.parse?H.parse(b):(new Function("return "+b))():null},hc:function(b,c,d){if(!H||!H.stringify)throw Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");
return H.stringify(a.a.f(b),c,d)},Od:function(c,d,e){e=e||{};var l=e.params||{},k=e.includeFields||this.Jc,f=c;if("object"==typeof c&&"form"===a.a.R(c))for(var f=c.action,h=k.length-1;0<=h;h--)for(var g=a.a.Lc(c,k[h]),m=g.length-1;0<=m;m--)l[g[m].name]=g[m].value;d=a.a.f(d);var p=w.createElement("form");p.style.display="none";p.action=f;p.method="post";for(var q in d)c=w.createElement("input"),c.type="hidden",c.name=q,c.value=a.a.hc(a.a.f(d[q])),p.appendChild(c);b(l,function(a,b){var c=w.createElement("input");
c.type="hidden";c.name=a;c.value=b;p.appendChild(c)});w.body.appendChild(p);e.submitter?e.submitter(p):p.submit();setTimeout(function(){p.parentNode.removeChild(p)},0)}}}();a.b("utils",a.a);a.b("utils.arrayForEach",a.a.D);a.b("utils.arrayFirst",a.a.Lb);a.b("utils.arrayFilter",a.a.jb);a.b("utils.arrayGetDistinctValues",a.a.wc);a.b("utils.arrayIndexOf",a.a.A);a.b("utils.arrayMap",a.a.Mb);a.b("utils.arrayPushAll",a.a.Nb);a.b("utils.arrayRemoveItem",a.a.Pa);a.b("utils.cloneNodes",a.a.Ca);a.b("utils.createSymbolOrString",
a.a.Da);a.b("utils.extend",a.a.extend);a.b("utils.fieldsIncludedWithJsonPost",a.a.Jc);a.b("utils.getFormFields",a.a.Lc);a.b("utils.objectMap",a.a.Ga);a.b("utils.peekObservable",a.a.bc);a.b("utils.postJson",a.a.Od);a.b("utils.parseJson",a.a.Nd);a.b("utils.registerEventHandler",a.a.B);a.b("utils.stringifyJson",a.a.hc);a.b("utils.range",a.a.Pd);a.b("utils.toggleDomNodeCssClass",a.a.Eb);a.b("utils.triggerEvent",a.a.Fb);a.b("utils.unwrapObservable",a.a.f);a.b("utils.objectForEach",a.a.P);a.b("utils.addOrRemoveItem",
a.a.Na);a.b("utils.setTextContent",a.a.Bb);a.b("unwrap",a.a.f);Function.prototype.bind||(Function.prototype.bind=function(a){var c=this;if(1===arguments.length)return function(){return c.apply(a,arguments)};var d=Array.prototype.slice.call(arguments,1);return function(){var e=d.slice(0);e.push.apply(e,arguments);return c.apply(a,e)}});a.a.g=new function(){var b=0,c="__ko__"+(new Date).getTime(),d={},e,f;a.a.W?(e=function(a,e){var f=a[c];if(!f||"null"===f||!d[f]){if(!e)return n;f=a[c]="ko"+b++;d[f]=
{}}return d[f]},f=function(a){var b=a[c];return b?(delete d[b],a[c]=null,!0):!1}):(e=function(a,b){var d=a[c];!d&&b&&(d=a[c]={});return d},f=function(a){return a[c]?(delete a[c],!0):!1});return{get:function(a,b){var c=e(a,!1);return c&&c[b]},set:function(a,b,c){(a=e(a,c!==n))&&(a[b]=c)},Ub:function(a,b,c){a=e(a,!0);return a[b]||(a[b]=c)},clear:f,Z:function(){return b++ +c}}};a.b("utils.domData",a.a.g);a.b("utils.domData.clear",a.a.g.clear);a.a.K=new function(){function b(b,c){var d=a.a.g.get(b,e);
d===n&&c&&(d=[],a.a.g.set(b,e,d));return d}function c(c){var e=b(c,!1);if(e)for(var e=e.slice(0),k=0;k<e.length;k++)e[k](c);a.a.g.clear(c);a.a.K.cleanExternalData(c);g[c.nodeType]&&d(c.childNodes,!0)}function d(b,d){for(var e=[],l,f=0;f<b.length;f++)if(!d||8===b[f].nodeType)if(c(e[e.length]=l=b[f]),b[f]!==l)for(;f--&&-1==a.a.A(e,b[f]););}var e=a.a.g.Z(),f={1:!0,8:!0,9:!0},g={1:!0,9:!0};return{za:function(a,c){if("function"!=typeof c)throw Error("Callback must be a function");b(a,!0).push(c)},yb:function(c,
d){var f=b(c,!1);f&&(a.a.Pa(f,d),0==f.length&&a.a.g.set(c,e,n))},oa:function(b){a.u.G(function(){f[b.nodeType]&&(c(b),g[b.nodeType]&&d(b.getElementsByTagName("*")))});return b},removeNode:function(b){a.oa(b);b.parentNode&&b.parentNode.removeChild(b)},cleanExternalData:function(a){v&&"function"==typeof v.cleanData&&v.cleanData([a])}}};a.oa=a.a.K.oa;a.removeNode=a.a.K.removeNode;a.b("cleanNode",a.oa);a.b("removeNode",a.removeNode);a.b("utils.domNodeDisposal",a.a.K);a.b("utils.domNodeDisposal.addDisposeCallback",
a.a.K.za);a.b("utils.domNodeDisposal.removeDisposeCallback",a.a.K.yb);(function(){var b=[0,"",""],c=[1,"<table>","</table>"],d=[3,"<table><tbody><tr>","</tr></tbody></table>"],e=[1,"<select multiple='multiple'>","</select>"],f={thead:c,tbody:c,tfoot:c,tr:[2,"<table><tbody>","</tbody></table>"],td:d,th:d,option:e,optgroup:e},g=8>=a.a.W;a.a.ua=function(c,d){var e;if(v)if(v.parseHTML)e=v.parseHTML(c,d)||[];else{if((e=v.clean([c],d))&&e[0]){for(var l=e[0];l.parentNode&&11!==l.parentNode.nodeType;)l=l.parentNode;
l.parentNode&&l.parentNode.removeChild(l)}}else{(e=d)||(e=w);var l=e.parentWindow||e.defaultView||A,p=a.a.Db(c).toLowerCase(),q=e.createElement("div"),t;t=(p=p.match(/^(?:\x3c!--.*?--\x3e\s*?)*?<([a-z]+)[\s>]/))&&f[p[1]]||b;p=t[0];t="ignored<div>"+t[1]+c+t[2]+"</div>";"function"==typeof l.innerShiv?q.appendChild(l.innerShiv(t)):(g&&e.body.appendChild(q),q.innerHTML=t,g&&q.parentNode.removeChild(q));for(;p--;)q=q.lastChild;e=a.a.la(q.lastChild.childNodes)}return e};a.a.Md=function(b,c){var d=a.a.ua(b,
c);return d.length&&d[0].parentElement||a.a.Yb(d)};a.a.fc=function(b,c){a.a.Tb(b);c=a.a.f(c);if(null!==c&&c!==n)if("string"!=typeof c&&(c=c.toString()),v)v(b).html(c);else for(var d=a.a.ua(c,b.ownerDocument),e=0;e<d.length;e++)b.appendChild(d[e])}})();a.b("utils.parseHtmlFragment",a.a.ua);a.b("utils.setHtml",a.a.fc);a.aa=function(){function b(c,e){if(c)if(8==c.nodeType){var f=a.aa.Uc(c.nodeValue);null!=f&&e.push({ud:c,Kd:f})}else if(1==c.nodeType)for(var f=0,g=c.childNodes,h=g.length;f<h;f++)b(g[f],
e)}var c={};return{Xb:function(a){if("function"!=typeof a)throw Error("You can only pass a function to ko.memoization.memoize()");var b=(4294967296*(1+Math.random())|0).toString(16).substring(1)+(4294967296*(1+Math.random())|0).toString(16).substring(1);c[b]=a;return"\x3c!--[ko_memo:"+b+"]--\x3e"},bd:function(a,b){var f=c[a];if(f===n)throw Error("Couldn't find any memo with ID "+a+". Perhaps it's already been unmemoized.");try{return f.apply(null,b||[]),!0}finally{delete c[a]}},cd:function(c,e){var f=
[];b(c,f);for(var g=0,h=f.length;g<h;g++){var m=f[g].ud,k=[m];e&&a.a.Nb(k,e);a.aa.bd(f[g].Kd,k);m.nodeValue="";m.parentNode&&m.parentNode.removeChild(m)}},Uc:function(a){return(a=a.match(/^\[ko_memo\:(.*?)\]$/))?a[1]:null}}}();a.b("memoization",a.aa);a.b("memoization.memoize",a.aa.Xb);a.b("memoization.unmemoize",a.aa.bd);a.b("memoization.parseMemoText",a.aa.Uc);a.b("memoization.unmemoizeDomNodeAndDescendants",a.aa.cd);a.na=function(){function b(){if(f)for(var b=f,c=0,d;h<f;)if(d=e[h++]){if(h>b){if(5E3<=
++c){h=f;a.a.Gc(Error("'Too much recursion' after processing "+c+" task groups."));break}b=f}try{d()}catch(p){a.a.Gc(p)}}}function c(){b();h=f=e.length=0}var d,e=[],f=0,g=1,h=0;A.MutationObserver?d=function(a){var b=w.createElement("div");(new MutationObserver(a)).observe(b,{attributes:!0});return function(){b.classList.toggle("foo")}}(c):d=w&&"onreadystatechange"in w.createElement("script")?function(a){var b=w.createElement("script");b.onreadystatechange=function(){b.onreadystatechange=null;w.documentElement.removeChild(b);
b=null;a()};w.documentElement.appendChild(b)}:function(a){setTimeout(a,0)};return{scheduler:d,zb:function(b){f||a.na.scheduler(c);e[f++]=b;return g++},cancel:function(a){a=a-(g-f);a>=h&&a<f&&(e[a]=null)},resetForTesting:function(){var a=f-h;h=f=e.length=0;return a},Sd:b}}();a.b("tasks",a.na);a.b("tasks.schedule",a.na.zb);a.b("tasks.runEarly",a.na.Sd);a.Ta={throttle:function(b,c){b.throttleEvaluation=c;var d=null;return a.$({read:b,write:function(e){clearTimeout(d);d=a.a.setTimeout(function(){b(e)},
c)}})},rateLimit:function(a,c){var d,e,f;"number"==typeof c?d=c:(d=c.timeout,e=c.method);a.Hb=!1;f="function"==typeof e?e:"notifyWhenChangesStop"==e?Y:X;a.ub(function(a){return f(a,d,c)})},deferred:function(b,c){if(!0!==c)throw Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.");b.Hb||(b.Hb=!0,b.ub(function(c){var e,f=!1;return function(){if(!f){a.na.cancel(e);e=a.na.zb(c);try{f=!0,b.notifySubscribers(n,"dirty")}finally{f=
!1}}}}))},notify:function(a,c){a.equalityComparer="always"==c?null:K}};var W={undefined:1,"boolean":1,number:1,string:1};a.b("extenders",a.Ta);a.ic=function(b,c,d){this.da=b;this.lc=c;this.mc=d;this.Ib=!1;this.fb=this.Jb=null;a.L(this,"dispose",this.s);a.L(this,"disposeWhenNodeIsRemoved",this.l)};a.ic.prototype.s=function(){this.Ib||(this.fb&&a.a.K.yb(this.Jb,this.fb),this.Ib=!0,this.mc(),this.da=this.lc=this.mc=this.Jb=this.fb=null)};a.ic.prototype.l=function(b){this.Jb=b;a.a.K.za(b,this.fb=this.s.bind(this))};
a.T=function(){a.a.Ab(this,D);D.qb(this)};var D={qb:function(a){a.U={change:[]};a.sc=1},subscribe:function(b,c,d){var e=this;d=d||"change";var f=new a.ic(e,c?b.bind(c):b,function(){a.a.Pa(e.U[d],f);e.hb&&e.hb(d)});e.Qa&&e.Qa(d);e.U[d]||(e.U[d]=[]);e.U[d].push(f);return f},notifySubscribers:function(b,c){c=c||"change";"change"===c&&this.Gb();if(this.Wa(c)){var d="change"===c&&this.ed||this.U[c].slice(0);try{a.u.xc();for(var e=0,f;f=d[e];++e)f.Ib||f.lc(b)}finally{a.u.end()}}},ob:function(){return this.sc},
Dd:function(a){return this.ob()!==a},Gb:function(){++this.sc},ub:function(b){var c=this,d=a.O(c),e,f,g,h,m;c.gb||(c.gb=c.notifySubscribers,c.notifySubscribers=Z);var k=b(function(){c.Ja=!1;d&&h===c&&(h=c.nc?c.nc():c());var a=f||m&&c.sb(g,h);m=f=e=!1;a&&c.gb(g=h)});c.qc=function(a,b){b&&c.Ja||(m=!b);c.ed=c.U.change.slice(0);c.Ja=e=!0;h=a;k()};c.pc=function(a){e||(g=a,c.gb(a,"beforeChange"))};c.rc=function(){m=!0};c.gd=function(){c.sb(g,c.v(!0))&&(f=!0)}},Wa:function(a){return this.U[a]&&this.U[a].length},
Bd:function(b){if(b)return this.U[b]&&this.U[b].length||0;var c=0;a.a.P(this.U,function(a,b){"dirty"!==a&&(c+=b.length)});return c},sb:function(a,c){return!this.equalityComparer||!this.equalityComparer(a,c)},toString:function(){return"[object Object]"},extend:function(b){var c=this;b&&a.a.P(b,function(b,e){var f=a.Ta[b];"function"==typeof f&&(c=f(c,e)||c)});return c}};a.L(D,"init",D.qb);a.L(D,"subscribe",D.subscribe);a.L(D,"extend",D.extend);a.L(D,"getSubscriptionsCount",D.Bd);a.a.Ba&&a.a.setPrototypeOf(D,
Function.prototype);a.T.fn=D;a.Qc=function(a){return null!=a&&"function"==typeof a.subscribe&&"function"==typeof a.notifySubscribers};a.b("subscribable",a.T);a.b("isSubscribable",a.Qc);a.S=a.u=function(){function b(a){d.push(e);e=a}function c(){e=d.pop()}var d=[],e,f=0;return{xc:b,end:c,cc:function(b){if(e){if(!a.Qc(b))throw Error("Only subscribable things can act as dependencies");e.od.call(e.pd,b,b.fd||(b.fd=++f))}},G:function(a,d,e){try{return b(),a.apply(d,e||[])}finally{c()}},qa:function(){if(e)return e.o.qa()},
Va:function(){if(e)return e.o.Va()},Ya:function(){if(e)return e.Ya},o:function(){if(e)return e.o}}}();a.b("computedContext",a.S);a.b("computedContext.getDependenciesCount",a.S.qa);a.b("computedContext.getDependencies",a.S.Va);a.b("computedContext.isInitial",a.S.Ya);a.b("computedContext.registerDependency",a.S.cc);a.b("ignoreDependencies",a.Yd=a.u.G);var I=a.a.Da("_latestValue");a.ta=function(b){function c(){if(0<arguments.length)return c.sb(c[I],arguments[0])&&(c.ya(),c[I]=arguments[0],c.xa()),this;
a.u.cc(c);return c[I]}c[I]=b;a.a.Ba||a.a.extend(c,a.T.fn);a.T.fn.qb(c);a.a.Ab(c,F);a.options.deferUpdates&&a.Ta.deferred(c,!0);return c};var F={equalityComparer:K,v:function(){return this[I]},xa:function(){this.notifySubscribers(this[I],"spectate");this.notifySubscribers(this[I])},ya:function(){this.notifySubscribers(this[I],"beforeChange")}};a.a.Ba&&a.a.setPrototypeOf(F,a.T.fn);var G=a.ta.Ma="__ko_proto__";F[G]=a.ta;a.O=function(b){if((b="function"==typeof b&&b[G])&&b!==F[G]&&b!==a.o.fn[G])throw Error("Invalid object that looks like an observable; possibly from another Knockout instance");
return!!b};a.Za=function(b){return"function"==typeof b&&(b[G]===F[G]||b[G]===a.o.fn[G]&&b.Nc)};a.b("observable",a.ta);a.b("isObservable",a.O);a.b("isWriteableObservable",a.Za);a.b("isWritableObservable",a.Za);a.b("observable.fn",F);a.L(F,"peek",F.v);a.L(F,"valueHasMutated",F.xa);a.L(F,"valueWillMutate",F.ya);a.Ha=function(b){b=b||[];if("object"!=typeof b||!("length"in b))throw Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");b=a.ta(b);a.a.Ab(b,
a.Ha.fn);return b.extend({trackArrayChanges:!0})};a.Ha.fn={remove:function(b){for(var c=this.v(),d=[],e="function"!=typeof b||a.O(b)?function(a){return a===b}:b,f=0;f<c.length;f++){var g=c[f];if(e(g)){0===d.length&&this.ya();if(c[f]!==g)throw Error("Array modified during remove; cannot remove item");d.push(g);c.splice(f,1);f--}}d.length&&this.xa();return d},removeAll:function(b){if(b===n){var c=this.v(),d=c.slice(0);this.ya();c.splice(0,c.length);this.xa();return d}return b?this.remove(function(c){return 0<=
a.a.A(b,c)}):[]},destroy:function(b){var c=this.v(),d="function"!=typeof b||a.O(b)?function(a){return a===b}:b;this.ya();for(var e=c.length-1;0<=e;e--){var f=c[e];d(f)&&(f._destroy=!0)}this.xa()},destroyAll:function(b){return b===n?this.destroy(function(){return!0}):b?this.destroy(function(c){return 0<=a.a.A(b,c)}):[]},indexOf:function(b){var c=this();return a.a.A(c,b)},replace:function(a,c){var d=this.indexOf(a);0<=d&&(this.ya(),this.v()[d]=c,this.xa())},sorted:function(a){var c=this().slice(0);
return a?c.sort(a):c.sort()},reversed:function(){return this().slice(0).reverse()}};a.a.Ba&&a.a.setPrototypeOf(a.Ha.fn,a.ta.fn);a.a.D("pop push reverse shift sort splice unshift".split(" "),function(b){a.Ha.fn[b]=function(){var a=this.v();this.ya();this.zc(a,b,arguments);var d=a[b].apply(a,arguments);this.xa();return d===a?this:d}});a.a.D(["slice"],function(b){a.Ha.fn[b]=function(){var a=this();return a[b].apply(a,arguments)}});a.Pc=function(b){return a.O(b)&&"function"==typeof b.remove&&"function"==
typeof b.push};a.b("observableArray",a.Ha);a.b("isObservableArray",a.Pc);a.Ta.trackArrayChanges=function(b,c){function d(){function c(){if(m){var d=[].concat(b.v()||[]),e;if(b.Wa("arrayChange")){if(!f||1<m)f=a.a.Pb(k,d,b.Ob);e=f}k=d;f=null;m=0;e&&e.length&&b.notifySubscribers(e,"arrayChange")}}e?c():(e=!0,h=b.subscribe(function(){++m},null,"spectate"),k=[].concat(b.v()||[]),f=null,g=b.subscribe(c))}b.Ob={};c&&"object"==typeof c&&a.a.extend(b.Ob,c);b.Ob.sparse=!0;if(!b.zc){var e=!1,f=null,g,h,m=0,
k,l=b.Qa,p=b.hb;b.Qa=function(a){l&&l.call(b,a);"arrayChange"===a&&d()};b.hb=function(a){p&&p.call(b,a);"arrayChange"!==a||b.Wa("arrayChange")||(g&&g.s(),h&&h.s(),h=g=null,e=!1,k=n)};b.zc=function(b,c,d){function l(a,b,c){return k[k.length]={status:a,value:b,index:c}}if(e&&!m){var k=[],p=b.length,g=d.length,h=0;switch(c){case "push":h=p;case "unshift":for(c=0;c<g;c++)l("added",d[c],h+c);break;case "pop":h=p-1;case "shift":p&&l("deleted",b[h],h);break;case "splice":c=Math.min(Math.max(0,0>d[0]?p+d[0]:
d[0]),p);for(var p=1===g?p:Math.min(c+(d[1]||0),p),g=c+g-2,h=Math.max(p,g),U=[],L=[],n=2;c<h;++c,++n)c<p&&L.push(l("deleted",b[c],c)),c<g&&U.push(l("added",d[n],c));a.a.Kc(L,U);break;default:return}f=k}}}};var r=a.a.Da("_state");a.o=a.$=function(b,c,d){function e(){if(0<arguments.length){if("function"===typeof f)f.apply(g.nb,arguments);else throw Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return this}g.ra||
a.u.cc(e);(g.ka||g.J&&e.Xa())&&e.ha();return g.X}"object"===typeof b?d=b:(d=d||{},b&&(d.read=b));if("function"!=typeof d.read)throw Error("Pass a function that returns the value of the ko.computed");var f=d.write,g={X:n,sa:!0,ka:!0,rb:!1,jc:!1,ra:!1,wb:!1,J:!1,Wc:d.read,nb:c||d.owner,l:d.disposeWhenNodeIsRemoved||d.l||null,Sa:d.disposeWhen||d.Sa,Rb:null,I:{},V:0,Ic:null};e[r]=g;e.Nc="function"===typeof f;a.a.Ba||a.a.extend(e,a.T.fn);a.T.fn.qb(e);a.a.Ab(e,C);d.pure?(g.wb=!0,g.J=!0,a.a.extend(e,da)):
d.deferEvaluation&&a.a.extend(e,ea);a.options.deferUpdates&&a.Ta.deferred(e,!0);g.l&&(g.jc=!0,g.l.nodeType||(g.l=null));g.J||d.deferEvaluation||e.ha();g.l&&e.ja()&&a.a.K.za(g.l,g.Rb=function(){e.s()});return e};var C={equalityComparer:K,qa:function(){return this[r].V},Va:function(){var b=[];a.a.P(this[r].I,function(a,d){b[d.Ka]=d.da});return b},Vb:function(b){if(!this[r].V)return!1;var c=this.Va();return-1!==a.a.A(c,b)?!0:!!a.a.Lb(c,function(a){return a.Vb&&a.Vb(b)})},uc:function(a,c,d){if(this[r].wb&&
c===this)throw Error("A 'pure' computed must not be called recursively");this[r].I[a]=d;d.Ka=this[r].V++;d.La=c.ob()},Xa:function(){var a,c,d=this[r].I;for(a in d)if(Object.prototype.hasOwnProperty.call(d,a)&&(c=d[a],this.Ia&&c.da.Ja||c.da.Dd(c.La)))return!0},Jd:function(){this.Ia&&!this[r].rb&&this.Ia(!1)},ja:function(){var a=this[r];return a.ka||0<a.V},Rd:function(){this.Ja?this[r].ka&&(this[r].sa=!0):this.Hc()},$c:function(a){if(a.Hb){var c=a.subscribe(this.Jd,this,"dirty"),d=a.subscribe(this.Rd,
this);return{da:a,s:function(){c.s();d.s()}}}return a.subscribe(this.Hc,this)},Hc:function(){var b=this,c=b.throttleEvaluation;c&&0<=c?(clearTimeout(this[r].Ic),this[r].Ic=a.a.setTimeout(function(){b.ha(!0)},c)):b.Ia?b.Ia(!0):b.ha(!0)},ha:function(b){var c=this[r],d=c.Sa,e=!1;if(!c.rb&&!c.ra){if(c.l&&!a.a.Sb(c.l)||d&&d()){if(!c.jc){this.s();return}}else c.jc=!1;c.rb=!0;try{e=this.zd(b)}finally{c.rb=!1}return e}},zd:function(b){var c=this[r],d=!1,e=c.wb?n:!c.V,d={qd:this,mb:c.I,Qb:c.V};a.u.xc({pd:d,
od:ba,o:this,Ya:e});c.I={};c.V=0;var f=this.yd(c,d);c.V?d=this.sb(c.X,f):(this.s(),d=!0);d&&(c.J?this.Gb():this.notifySubscribers(c.X,"beforeChange"),c.X=f,this.notifySubscribers(c.X,"spectate"),!c.J&&b&&this.notifySubscribers(c.X),this.rc&&this.rc());e&&this.notifySubscribers(c.X,"awake");return d},yd:function(b,c){try{var d=b.Wc;return b.nb?d.call(b.nb):d()}finally{a.u.end(),c.Qb&&!b.J&&a.a.P(c.mb,aa),b.sa=b.ka=!1}},v:function(a){var c=this[r];(c.ka&&(a||!c.V)||c.J&&this.Xa())&&this.ha();return c.X},
ub:function(b){a.T.fn.ub.call(this,b);this.nc=function(){this[r].J||(this[r].sa?this.ha():this[r].ka=!1);return this[r].X};this.Ia=function(a){this.pc(this[r].X);this[r].ka=!0;a&&(this[r].sa=!0);this.qc(this,!a)}},s:function(){var b=this[r];!b.J&&b.I&&a.a.P(b.I,function(a,b){b.s&&b.s()});b.l&&b.Rb&&a.a.K.yb(b.l,b.Rb);b.I=n;b.V=0;b.ra=!0;b.sa=!1;b.ka=!1;b.J=!1;b.l=n;b.Sa=n;b.Wc=n;this.Nc||(b.nb=n)}},da={Qa:function(b){var c=this,d=c[r];if(!d.ra&&d.J&&"change"==b){d.J=!1;if(d.sa||c.Xa())d.I=null,d.V=
0,c.ha()&&c.Gb();else{var e=[];a.a.P(d.I,function(a,b){e[b.Ka]=a});a.a.D(e,function(a,b){var e=d.I[a],m=c.$c(e.da);m.Ka=b;m.La=e.La;d.I[a]=m});c.Xa()&&c.ha()&&c.Gb()}d.ra||c.notifySubscribers(d.X,"awake")}},hb:function(b){var c=this[r];c.ra||"change"!=b||this.Wa("change")||(a.a.P(c.I,function(a,b){b.s&&(c.I[a]={da:b.da,Ka:b.Ka,La:b.La},b.s())}),c.J=!0,this.notifySubscribers(n,"asleep"))},ob:function(){var b=this[r];b.J&&(b.sa||this.Xa())&&this.ha();return a.T.fn.ob.call(this)}},ea={Qa:function(a){"change"!=
a&&"beforeChange"!=a||this.v()}};a.a.Ba&&a.a.setPrototypeOf(C,a.T.fn);var N=a.ta.Ma;C[N]=a.o;a.Oc=function(a){return"function"==typeof a&&a[N]===C[N]};a.Fd=function(b){return a.Oc(b)&&b[r]&&b[r].wb};a.b("computed",a.o);a.b("dependentObservable",a.o);a.b("isComputed",a.Oc);a.b("isPureComputed",a.Fd);a.b("computed.fn",C);a.L(C,"peek",C.v);a.L(C,"dispose",C.s);a.L(C,"isActive",C.ja);a.L(C,"getDependenciesCount",C.qa);a.L(C,"getDependencies",C.Va);a.xb=function(b,c){if("function"===typeof b)return a.o(b,
c,{pure:!0});b=a.a.extend({},b);b.pure=!0;return a.o(b,c)};a.b("pureComputed",a.xb);(function(){function b(a,f,g){g=g||new d;a=f(a);if("object"!=typeof a||null===a||a===n||a instanceof RegExp||a instanceof Date||a instanceof String||a instanceof Number||a instanceof Boolean)return a;var h=a instanceof Array?[]:{};g.save(a,h);c(a,function(c){var d=f(a[c]);switch(typeof d){case "boolean":case "number":case "string":case "function":h[c]=d;break;case "object":case "undefined":var l=g.get(d);h[c]=l!==
n?l:b(d,f,g)}});return h}function c(a,b){if(a instanceof Array){for(var c=0;c<a.length;c++)b(c);"function"==typeof a.toJSON&&b("toJSON")}else for(c in a)b(c)}function d(){this.keys=[];this.values=[]}a.ad=function(c){if(0==arguments.length)throw Error("When calling ko.toJS, pass the object you want to convert.");return b(c,function(b){for(var c=0;a.O(b)&&10>c;c++)b=b();return b})};a.toJSON=function(b,c,d){b=a.ad(b);return a.a.hc(b,c,d)};d.prototype={constructor:d,save:function(b,c){var d=a.a.A(this.keys,
b);0<=d?this.values[d]=c:(this.keys.push(b),this.values.push(c))},get:function(b){b=a.a.A(this.keys,b);return 0<=b?this.values[b]:n}}})();a.b("toJS",a.ad);a.b("toJSON",a.toJSON);a.Wd=function(b,c,d){function e(c){var e=a.xb(b,d).extend({ma:"always"}),h=e.subscribe(function(a){a&&(h.s(),c(a))});e.notifySubscribers(e.v());return h}return"function"!==typeof Promise||c?e(c.bind(d)):new Promise(e)};a.b("when",a.Wd);(function(){a.w={M:function(b){switch(a.a.R(b)){case "option":return!0===b.__ko__hasDomDataOptionValue__?
a.a.g.get(b,a.c.options.$b):7>=a.a.W?b.getAttributeNode("value")&&b.getAttributeNode("value").specified?b.value:b.text:b.value;case "select":return 0<=b.selectedIndex?a.w.M(b.options[b.selectedIndex]):n;default:return b.value}},cb:function(b,c,d){switch(a.a.R(b)){case "option":"string"===typeof c?(a.a.g.set(b,a.c.options.$b,n),"__ko__hasDomDataOptionValue__"in b&&delete b.__ko__hasDomDataOptionValue__,b.value=c):(a.a.g.set(b,a.c.options.$b,c),b.__ko__hasDomDataOptionValue__=!0,b.value="number"===
typeof c?c:"");break;case "select":if(""===c||null===c)c=n;for(var e=-1,f=0,g=b.options.length,h;f<g;++f)if(h=a.w.M(b.options[f]),h==c||""===h&&c===n){e=f;break}if(d||0<=e||c===n&&1<b.size)b.selectedIndex=e,6===a.a.W&&a.a.setTimeout(function(){b.selectedIndex=e},0);break;default:if(null===c||c===n)c="";b.value=c}}}})();a.b("selectExtensions",a.w);a.b("selectExtensions.readValue",a.w.M);a.b("selectExtensions.writeValue",a.w.cb);a.m=function(){function b(b){b=a.a.Db(b);123===b.charCodeAt(0)&&(b=b.slice(1,
-1));b+="\n,";var c=[],d=b.match(e),p,q=[],h=0;if(1<d.length){for(var x=0,B;B=d[x];++x){var u=B.charCodeAt(0);if(44===u){if(0>=h){c.push(p&&q.length?{key:p,value:q.join("")}:{unknown:p||q.join("")});p=h=0;q=[];continue}}else if(58===u){if(!h&&!p&&1===q.length){p=q.pop();continue}}else if(47===u&&1<B.length&&(47===B.charCodeAt(1)||42===B.charCodeAt(1)))continue;else 47===u&&x&&1<B.length?(u=d[x-1].match(f))&&!g[u[0]]&&(b=b.substr(b.indexOf(B)+1),d=b.match(e),x=-1,B="/"):40===u||123===u||91===u?++h:
41===u||125===u||93===u?--h:p||q.length||34!==u&&39!==u||(B=B.slice(1,-1));q.push(B)}if(0<h)throw Error("Unbalanced parentheses, braces, or brackets");}return c}var c=["true","false","null","undefined"],d=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,e=RegExp("\"(?:\\\\.|[^\"])*\"|'(?:\\\\.|[^'])*'|`(?:\\\\.|[^`])*`|/\\*(?:[^*]|\\*+[^*/])*\\*+/|//.*\n|/(?:\\\\.|[^/])+/w*|[^\\s:,/][^,\"'`{}()/:[\\]]*[^\\s,\"'`{}()/:[\\]]|[^\\s]","g"),f=/[\])"'A-Za-z0-9_$]+$/,g={"in":1,"return":1,"typeof":1},
h={};return{Ra:[],wa:h,ac:b,vb:function(e,f){function l(b,e){var f;if(!x){var k=a.getBindingHandler(b);if(k&&k.preprocess&&!(e=k.preprocess(e,b,l)))return;if(k=h[b])f=e,0<=a.a.A(c,f)?f=!1:(k=f.match(d),f=null===k?!1:k[1]?"Object("+k[1]+")"+k[2]:f),k=f;k&&q.push("'"+("string"==typeof h[b]?h[b]:b)+"':function(_z){"+f+"=_z}")}g&&(e="function(){return "+e+" }");p.push("'"+b+"':"+e)}f=f||{};var p=[],q=[],g=f.valueAccessors,x=f.bindingParams,B="string"===typeof e?b(e):e;a.a.D(B,function(a){l(a.key||a.unknown,
a.value)});q.length&&l("_ko_property_writers","{"+q.join(",")+" }");return p.join(",")},Id:function(a,b){for(var c=0;c<a.length;c++)if(a[c].key==b)return!0;return!1},eb:function(b,c,d,e,f){if(b&&a.O(b))!a.Za(b)||f&&b.v()===e||b(e);else if((b=c.get("_ko_property_writers"))&&b[d])b[d](e)}}}();a.b("expressionRewriting",a.m);a.b("expressionRewriting.bindingRewriteValidators",a.m.Ra);a.b("expressionRewriting.parseObjectLiteral",a.m.ac);a.b("expressionRewriting.preProcessBindings",a.m.vb);a.b("expressionRewriting._twoWayBindings",
a.m.wa);a.b("jsonExpressionRewriting",a.m);a.b("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",a.m.vb);(function(){function b(a){return 8==a.nodeType&&g.test(f?a.text:a.nodeValue)}function c(a){return 8==a.nodeType&&h.test(f?a.text:a.nodeValue)}function d(d,e){for(var f=d,h=1,g=[];f=f.nextSibling;){if(c(f)&&(a.a.g.set(f,k,!0),h--,0===h))return g;g.push(f);b(f)&&h++}if(!e)throw Error("Cannot find closing comment tag to match: "+d.nodeValue);return null}function e(a,b){var c=d(a,b);return c?
0<c.length?c[c.length-1].nextSibling:a.nextSibling:null}var f=w&&"\x3c!--test--\x3e"===w.createComment("test").text,g=f?/^\x3c!--\s*ko(?:\s+([\s\S]+))?\s*--\x3e$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,h=f?/^\x3c!--\s*\/ko\s*--\x3e$/:/^\s*\/ko\s*$/,m={ul:!0,ol:!0},k="__ko_matchedEndComment__";a.h={ea:{},childNodes:function(a){return b(a)?d(a):a.childNodes},Ea:function(c){if(b(c)){c=a.h.childNodes(c);for(var d=0,e=c.length;d<e;d++)a.removeNode(c[d])}else a.a.Tb(c)},va:function(c,d){if(b(c)){a.h.Ea(c);for(var e=
c.nextSibling,f=0,k=d.length;f<k;f++)e.parentNode.insertBefore(d[f],e)}else a.a.va(c,d)},Vc:function(a,c){var d;b(a)?(d=a.nextSibling,a=a.parentNode):d=a.firstChild;d?c!==d&&a.insertBefore(c,d):a.appendChild(c)},Wb:function(c,d,e){e?(e=e.nextSibling,b(c)&&(c=c.parentNode),e?d!==e&&c.insertBefore(d,e):c.appendChild(d)):a.h.Vc(c,d)},firstChild:function(a){if(b(a))return!a.nextSibling||c(a.nextSibling)?null:a.nextSibling;if(a.firstChild&&c(a.firstChild))throw Error("Found invalid end comment, as the first child of "+
a);return a.firstChild},nextSibling:function(d){b(d)&&(d=e(d));if(d.nextSibling&&c(d.nextSibling)){var f=d.nextSibling;if(c(f)&&!a.a.g.get(f,k))throw Error("Found end comment without a matching opening comment, as child of "+d);return null}return d.nextSibling},Cd:b,Vd:function(a){return(a=(f?a.text:a.nodeValue).match(g))?a[1]:null},Sc:function(d){if(m[a.a.R(d)]){var f=d.firstChild;if(f){do if(1===f.nodeType){var k;k=f.firstChild;var h=null;if(k){do if(h)h.push(k);else if(b(k)){var g=e(k,!0);g?k=
g:h=[k]}else c(k)&&(h=[k]);while(k=k.nextSibling)}if(k=h)for(h=f.nextSibling,g=0;g<k.length;g++)h?d.insertBefore(k[g],h):d.appendChild(k[g])}while(f=f.nextSibling)}}}}})();a.b("virtualElements",a.h);a.b("virtualElements.allowedBindings",a.h.ea);a.b("virtualElements.emptyNode",a.h.Ea);a.b("virtualElements.insertAfter",a.h.Wb);a.b("virtualElements.prepend",a.h.Vc);a.b("virtualElements.setDomNodeChildren",a.h.va);(function(){a.ga=function(){this.nd={}};a.a.extend(a.ga.prototype,{nodeHasBindings:function(b){switch(b.nodeType){case 1:return null!=
b.getAttribute("data-bind")||a.j.getComponentNameForNode(b);case 8:return a.h.Cd(b);default:return!1}},getBindings:function(b,c){var d=this.getBindingsString(b,c),d=d?this.parseBindingsString(d,c,b):null;return a.j.tc(d,b,c,!1)},getBindingAccessors:function(b,c){var d=this.getBindingsString(b,c),d=d?this.parseBindingsString(d,c,b,{valueAccessors:!0}):null;return a.j.tc(d,b,c,!0)},getBindingsString:function(b){switch(b.nodeType){case 1:return b.getAttribute("data-bind");case 8:return a.h.Vd(b);default:return null}},
parseBindingsString:function(b,c,d,e){try{var f=this.nd,g=b+(e&&e.valueAccessors||""),h;if(!(h=f[g])){var m,k="with($context){with($data||{}){return{"+a.m.vb(b,e)+"}}}";m=new Function("$context","$element",k);h=f[g]=m}return h(c,d)}catch(l){throw l.message="Unable to parse bindings.\nBindings value: "+b+"\nMessage: "+l.message,l;}}});a.ga.instance=new a.ga})();a.b("bindingProvider",a.ga);(function(){function b(b){var c=(b=a.a.g.get(b,z))&&b.N;c&&(b.N=null,c.Tc())}function c(c,d,e){this.node=c;this.yc=
d;this.kb=[];this.H=!1;d.N||a.a.K.za(c,b);e&&e.N&&(e.N.kb.push(c),this.Kb=e)}function d(a){return function(){return a}}function e(a){return a()}function f(b){return a.a.Ga(a.u.G(b),function(a,c){return function(){return b()[c]}})}function g(b,c,e){return"function"===typeof b?f(b.bind(null,c,e)):a.a.Ga(b,d)}function h(a,b){return f(this.getBindings.bind(this,a,b))}function m(b,c){var d=a.h.firstChild(c);if(d){var e,f=a.ga.instance,l=f.preprocessNode;if(l){for(;e=d;)d=a.h.nextSibling(e),l.call(f,e);
d=a.h.firstChild(c)}for(;e=d;)d=a.h.nextSibling(e),k(b,e)}a.i.ma(c,a.i.H)}function k(b,c){var d=b,e=1===c.nodeType;e&&a.h.Sc(c);if(e||a.ga.instance.nodeHasBindings(c))d=p(c,null,b).bindingContextForDescendants;d&&!u[a.a.R(c)]&&m(d,c)}function l(b){var c=[],d={},e=[];a.a.P(b,function ca(f){if(!d[f]){var k=a.getBindingHandler(f);k&&(k.after&&(e.push(f),a.a.D(k.after,function(c){if(b[c]){if(-1!==a.a.A(e,c))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+e.join(", "));
ca(c)}}),e.length--),c.push({key:f,Mc:k}));d[f]=!0}});return c}function p(b,c,d){var f=a.a.g.Ub(b,z,{}),k=f.hd;if(!c){if(k)throw Error("You cannot apply bindings multiple times to the same element.");f.hd=!0}k||(f.context=d);f.Zb||(f.Zb={});var g;if(c&&"function"!==typeof c)g=c;else{var p=a.ga.instance,q=p.getBindingAccessors||h,m=a.$(function(){if(g=c?c(d,b):q.call(p,b,d)){if(d[t])d[t]();if(d[B])d[B]()}return g},null,{l:b});g&&m.ja()||(m=null)}var x=d,u;if(g){var J=function(){return a.a.Ga(m?m():
g,e)},r=m?function(a){return function(){return e(m()[a])}}:function(a){return g[a]};J.get=function(a){return g[a]&&e(r(a))};J.has=function(a){return a in g};a.i.H in g&&a.i.subscribe(b,a.i.H,function(){var c=(0,g[a.i.H])();if(c){var d=a.h.childNodes(b);d.length&&c(d,a.Ec(d[0]))}});a.i.pa in g&&(x=a.i.Cb(b,d),a.i.subscribe(b,a.i.pa,function(){var c=(0,g[a.i.pa])();c&&a.h.firstChild(b)&&c(b)}));f=l(g);a.a.D(f,function(c){var d=c.Mc.init,e=c.Mc.update,f=c.key;if(8===b.nodeType&&!a.h.ea[f])throw Error("The binding '"+
f+"' cannot be used with virtual elements");try{"function"==typeof d&&a.u.G(function(){var a=d(b,r(f),J,x.$data,x);if(a&&a.controlsDescendantBindings){if(u!==n)throw Error("Multiple bindings ("+u+" and "+f+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");u=f}}),"function"==typeof e&&a.$(function(){e(b,r(f),J,x.$data,x)},null,{l:b})}catch(k){throw k.message='Unable to process binding "'+f+": "+g[f]+'"\nMessage: '+k.message,
k;}})}f=u===n;return{shouldBindDescendants:f,bindingContextForDescendants:f&&x}}function q(b,c){return b&&b instanceof a.fa?b:new a.fa(b,n,n,c)}var t=a.a.Da("_subscribable"),x=a.a.Da("_ancestorBindingInfo"),B=a.a.Da("_dataDependency");a.c={};var u={script:!0,textarea:!0,template:!0};a.getBindingHandler=function(b){return a.c[b]};var J={};a.fa=function(b,c,d,e,f){function k(){var b=p?h():h,f=a.a.f(b);c?(a.a.extend(l,c),x in c&&(l[x]=c[x])):(l.$parents=[],l.$root=f,l.ko=a);l[t]=q;g?f=l.$data:(l.$rawData=
b,l.$data=f);d&&(l[d]=f);e&&e(l,c,f);if(c&&c[t]&&!a.S.o().Vb(c[t]))c[t]();m&&(l[B]=m);return l.$data}var l=this,g=b===J,h=g?n:b,p="function"==typeof h&&!a.O(h),q,m=f&&f.dataDependency;f&&f.exportDependencies?k():(q=a.xb(k),q.v(),q.ja()?q.equalityComparer=null:l[t]=n)};a.fa.prototype.createChildContext=function(b,c,d,e){!e&&c&&"object"==typeof c&&(e=c,c=e.as,d=e.extend);if(c&&e&&e.noChildContext){var f="function"==typeof b&&!a.O(b);return new a.fa(J,this,null,function(a){d&&d(a);a[c]=f?b():b},e)}return new a.fa(b,
this,c,function(a,b){a.$parentContext=b;a.$parent=b.$data;a.$parents=(b.$parents||[]).slice(0);a.$parents.unshift(a.$parent);d&&d(a)},e)};a.fa.prototype.extend=function(b,c){return new a.fa(J,this,null,function(c){a.a.extend(c,"function"==typeof b?b(c):b)},c)};var z=a.a.g.Z();c.prototype.Tc=function(){this.Kb&&this.Kb.N&&this.Kb.N.sd(this.node)};c.prototype.sd=function(b){a.a.Pa(this.kb,b);!this.kb.length&&this.H&&this.Cc()};c.prototype.Cc=function(){this.H=!0;this.yc.N&&!this.kb.length&&(this.yc.N=
null,a.a.K.yb(this.node,b),a.i.ma(this.node,a.i.pa),this.Tc())};a.i={H:"childrenComplete",pa:"descendantsComplete",subscribe:function(b,c,d,e,f){var k=a.a.g.Ub(b,z,{});k.Fa||(k.Fa=new a.T);f&&f.notifyImmediately&&k.Zb[c]&&a.u.G(d,e,[b]);return k.Fa.subscribe(d,e,c)},ma:function(b,c){var d=a.a.g.get(b,z);if(d&&(d.Zb[c]=!0,d.Fa&&d.Fa.notifySubscribers(b,c),c==a.i.H))if(d.N)d.N.Cc();else if(d.N===n&&d.Fa&&d.Fa.Wa(a.i.pa))throw Error("descendantsComplete event not supported for bindings on this node");
},Cb:function(b,d){var e=a.a.g.Ub(b,z,{});e.N||(e.N=new c(b,e,d[x]));return d[x]==e?d:d.extend(function(a){a[x]=e})}};a.Td=function(b){return(b=a.a.g.get(b,z))&&b.context};a.ib=function(b,c,d){1===b.nodeType&&a.h.Sc(b);return p(b,c,q(d))};a.ld=function(b,c,d){d=q(d);return a.ib(b,g(c,d,b),d)};a.Oa=function(a,b){1!==b.nodeType&&8!==b.nodeType||m(q(a),b)};a.vc=function(a,b,c){!v&&A.jQuery&&(v=A.jQuery);if(2>arguments.length){if(b=w.body,!b)throw Error("ko.applyBindings: could not find document.body; has the document been loaded?");
}else if(!b||1!==b.nodeType&&8!==b.nodeType)throw Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");k(q(a,c),b)};a.Dc=function(b){return!b||1!==b.nodeType&&8!==b.nodeType?n:a.Td(b)};a.Ec=function(b){return(b=a.Dc(b))?b.$data:n};a.b("bindingHandlers",a.c);a.b("bindingEvent",a.i);a.b("bindingEvent.subscribe",a.i.subscribe);a.b("bindingEvent.startPossiblyAsyncContentBinding",a.i.Cb);a.b("applyBindings",a.vc);a.b("applyBindingsToDescendants",a.Oa);
a.b("applyBindingAccessorsToNode",a.ib);a.b("applyBindingsToNode",a.ld);a.b("contextFor",a.Dc);a.b("dataFor",a.Ec)})();(function(b){function c(c,e){var k=Object.prototype.hasOwnProperty.call(f,c)?f[c]:b,l;k?k.subscribe(e):(k=f[c]=new a.T,k.subscribe(e),d(c,function(b,d){var e=!(!d||!d.synchronous);g[c]={definition:b,Gd:e};delete f[c];l||e?k.notifySubscribers(b):a.na.zb(function(){k.notifySubscribers(b)})}),l=!0)}function d(a,b){e("getConfig",[a],function(c){c?e("loadComponent",[a,c],function(a){b(a,
c)}):b(null,null)})}function e(c,d,f,l){l||(l=a.j.loaders.slice(0));var g=l.shift();if(g){var q=g[c];if(q){var t=!1;if(q.apply(g,d.concat(function(a){t?f(null):null!==a?f(a):e(c,d,f,l)}))!==b&&(t=!0,!g.suppressLoaderExceptions))throw Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.");}else e(c,d,f,l)}else f(null)}var f={},g={};a.j={get:function(d,e){var f=Object.prototype.hasOwnProperty.call(g,d)?g[d]:b;f?f.Gd?a.u.G(function(){e(f.definition)}):
a.na.zb(function(){e(f.definition)}):c(d,e)},Bc:function(a){delete g[a]},oc:e};a.j.loaders=[];a.b("components",a.j);a.b("components.get",a.j.get);a.b("components.clearCachedDefinition",a.j.Bc)})();(function(){function b(b,c,d,e){function g(){0===--B&&e(h)}var h={},B=2,u=d.template;d=d.viewModel;u?f(c,u,function(c){a.j.oc("loadTemplate",[b,c],function(a){h.template=a;g()})}):g();d?f(c,d,function(c){a.j.oc("loadViewModel",[b,c],function(a){h[m]=a;g()})}):g()}function c(a,b,d){if("function"===typeof b)d(function(a){return new b(a)});
else if("function"===typeof b[m])d(b[m]);else if("instance"in b){var e=b.instance;d(function(){return e})}else"viewModel"in b?c(a,b.viewModel,d):a("Unknown viewModel value: "+b)}function d(b){switch(a.a.R(b)){case "script":return a.a.ua(b.text);case "textarea":return a.a.ua(b.value);case "template":if(e(b.content))return a.a.Ca(b.content.childNodes)}return a.a.Ca(b.childNodes)}function e(a){return A.DocumentFragment?a instanceof DocumentFragment:a&&11===a.nodeType}function f(a,b,c){"string"===typeof b.require?
T||A.require?(T||A.require)([b.require],function(a){a&&"object"===typeof a&&a.Xd&&a["default"]&&(a=a["default"]);c(a)}):a("Uses require, but no AMD loader is present"):c(b)}function g(a){return function(b){throw Error("Component '"+a+"': "+b);}}var h={};a.j.register=function(b,c){if(!c)throw Error("Invalid configuration for "+b);if(a.j.tb(b))throw Error("Component "+b+" is already registered");h[b]=c};a.j.tb=function(a){return Object.prototype.hasOwnProperty.call(h,a)};a.j.unregister=function(b){delete h[b];
a.j.Bc(b)};a.j.Fc={getConfig:function(b,c){c(a.j.tb(b)?h[b]:null)},loadComponent:function(a,c,d){var e=g(a);f(e,c,function(c){b(a,e,c,d)})},loadTemplate:function(b,c,f){b=g(b);if("string"===typeof c)f(a.a.ua(c));else if(c instanceof Array)f(c);else if(e(c))f(a.a.la(c.childNodes));else if(c.element)if(c=c.element,A.HTMLElement?c instanceof HTMLElement:c&&c.tagName&&1===c.nodeType)f(d(c));else if("string"===typeof c){var h=w.getElementById(c);h?f(d(h)):b("Cannot find element with ID "+c)}else b("Unknown element type: "+
c);else b("Unknown template value: "+c)},loadViewModel:function(a,b,d){c(g(a),b,d)}};var m="createViewModel";a.b("components.register",a.j.register);a.b("components.isRegistered",a.j.tb);a.b("components.unregister",a.j.unregister);a.b("components.defaultLoader",a.j.Fc);a.j.loaders.push(a.j.Fc);a.j.dd=h})();(function(){function b(b,e){var f=b.getAttribute("params");if(f){var f=c.parseBindingsString(f,e,b,{valueAccessors:!0,bindingParams:!0}),f=a.a.Ga(f,function(c){return a.o(c,null,{l:b})}),g=a.a.Ga(f,
function(c){var e=c.v();return c.ja()?a.o({read:function(){return a.a.f(c())},write:a.Za(e)&&function(a){c()(a)},l:b}):e});Object.prototype.hasOwnProperty.call(g,"$raw")||(g.$raw=f);return g}return{$raw:{}}}a.j.getComponentNameForNode=function(b){var c=a.a.R(b);if(a.j.tb(c)&&(-1!=c.indexOf("-")||"[object HTMLUnknownElement]"==""+b||8>=a.a.W&&b.tagName===c))return c};a.j.tc=function(c,e,f,g){if(1===e.nodeType){var h=a.j.getComponentNameForNode(e);if(h){c=c||{};if(c.component)throw Error('Cannot use the "component" binding on a custom element matching a component');
var m={name:h,params:b(e,f)};c.component=g?function(){return m}:m}}return c};var c=new a.ga;9>a.a.W&&(a.j.register=function(a){return function(b){return a.apply(this,arguments)}}(a.j.register),w.createDocumentFragment=function(b){return function(){var c=b(),f=a.j.dd,g;for(g in f);return c}}(w.createDocumentFragment))})();(function(){function b(b,c,d){c=c.template;if(!c)throw Error("Component '"+b+"' has no template");b=a.a.Ca(c);a.h.va(d,b)}function c(a,b,c){var d=a.createViewModel;return d?d.call(a,
b,c):b}var d=0;a.c.component={init:function(e,f,g,h,m){function k(){var a=l&&l.dispose;"function"===typeof a&&a.call(l);q&&q.s();p=l=q=null}var l,p,q,t=a.a.la(a.h.childNodes(e));a.h.Ea(e);a.a.K.za(e,k);a.o(function(){var g=a.a.f(f()),h,u;"string"===typeof g?h=g:(h=a.a.f(g.name),u=a.a.f(g.params));if(!h)throw Error("No component name specified");var n=a.i.Cb(e,m),z=p=++d;a.j.get(h,function(d){if(p===z){k();if(!d)throw Error("Unknown component '"+h+"'");b(h,d,e);var f=c(d,u,{element:e,templateNodes:t});
d=n.createChildContext(f,{extend:function(a){a.$component=f;a.$componentTemplateNodes=t}});f&&f.koDescendantsComplete&&(q=a.i.subscribe(e,a.i.pa,f.koDescendantsComplete,f));l=f;a.Oa(d,e)}})},null,{l:e});return{controlsDescendantBindings:!0}}};a.h.ea.component=!0})();var V={"class":"className","for":"htmlFor"};a.c.attr={update:function(b,c){var d=a.a.f(c())||{};a.a.P(d,function(c,d){d=a.a.f(d);var g=c.indexOf(":"),g="lookupNamespaceURI"in b&&0<g&&b.lookupNamespaceURI(c.substr(0,g)),h=!1===d||null===
d||d===n;h?g?b.removeAttributeNS(g,c):b.removeAttribute(c):d=d.toString();8>=a.a.W&&c in V?(c=V[c],h?b.removeAttribute(c):b[c]=d):h||(g?b.setAttributeNS(g,c,d):b.setAttribute(c,d));"name"===c&&a.a.Yc(b,h?"":d)})}};(function(){a.c.checked={after:["value","attr"],init:function(b,c,d){function e(){var e=b.checked,f=g();if(!a.S.Ya()&&(e||!m&&!a.S.qa())){var k=a.u.G(c);if(l){var q=p?k.v():k,z=t;t=f;z!==f?e&&(a.a.Na(q,f,!0),a.a.Na(q,z,!1)):a.a.Na(q,f,e);p&&a.Za(k)&&k(q)}else h&&(f===n?f=e:e||(f=n)),a.m.eb(k,
d,"checked",f,!0)}}function f(){var d=a.a.f(c()),e=g();l?(b.checked=0<=a.a.A(d,e),t=e):b.checked=h&&e===n?!!d:g()===d}var g=a.xb(function(){if(d.has("checkedValue"))return a.a.f(d.get("checkedValue"));if(q)return d.has("value")?a.a.f(d.get("value")):b.value}),h="checkbox"==b.type,m="radio"==b.type;if(h||m){var k=c(),l=h&&a.a.f(k)instanceof Array,p=!(l&&k.push&&k.splice),q=m||l,t=l?g():n;m&&!b.name&&a.c.uniqueName.init(b,function(){return!0});a.o(e,null,{l:b});a.a.B(b,"click",e);a.o(f,null,{l:b});
k=n}}};a.m.wa.checked=!0;a.c.checkedValue={update:function(b,c){b.value=a.a.f(c())}}})();a.c["class"]={update:function(b,c){var d=a.a.Db(a.a.f(c()));a.a.Eb(b,b.__ko__cssValue,!1);b.__ko__cssValue=d;a.a.Eb(b,d,!0)}};a.c.css={update:function(b,c){var d=a.a.f(c());null!==d&&"object"==typeof d?a.a.P(d,function(c,d){d=a.a.f(d);a.a.Eb(b,c,d)}):a.c["class"].update(b,c)}};a.c.enable={update:function(b,c){var d=a.a.f(c());d&&b.disabled?b.removeAttribute("disabled"):d||b.disabled||(b.disabled=!0)}};a.c.disable=
{update:function(b,c){a.c.enable.update(b,function(){return!a.a.f(c())})}};a.c.event={init:function(b,c,d,e,f){var g=c()||{};a.a.P(g,function(g){"string"==typeof g&&a.a.B(b,g,function(b){var k,l=c()[g];if(l){try{var p=a.a.la(arguments);e=f.$data;p.unshift(e);k=l.apply(e,p)}finally{!0!==k&&(b.preventDefault?b.preventDefault():b.returnValue=!1)}!1===d.get(g+"Bubble")&&(b.cancelBubble=!0,b.stopPropagation&&b.stopPropagation())}})})}};a.c.foreach={Rc:function(b){return function(){var c=b(),d=a.a.bc(c);
if(!d||"number"==typeof d.length)return{foreach:c,templateEngine:a.ba.Ma};a.a.f(c);return{foreach:d.data,as:d.as,noChildContext:d.noChildContext,includeDestroyed:d.includeDestroyed,afterAdd:d.afterAdd,beforeRemove:d.beforeRemove,afterRender:d.afterRender,beforeMove:d.beforeMove,afterMove:d.afterMove,templateEngine:a.ba.Ma}}},init:function(b,c){return a.c.template.init(b,a.c.foreach.Rc(c))},update:function(b,c,d,e,f){return a.c.template.update(b,a.c.foreach.Rc(c),d,e,f)}};a.m.Ra.foreach=!1;a.h.ea.foreach=
!0;a.c.hasfocus={init:function(b,c,d){function e(e){b.__ko_hasfocusUpdating=!0;var f=b.ownerDocument;if("activeElement"in f){var g;try{g=f.activeElement}catch(l){g=f.body}e=g===b}f=c();a.m.eb(f,d,"hasfocus",e,!0);b.__ko_hasfocusLastValue=e;b.__ko_hasfocusUpdating=!1}var f=e.bind(null,!0),g=e.bind(null,!1);a.a.B(b,"focus",f);a.a.B(b,"focusin",f);a.a.B(b,"blur",g);a.a.B(b,"focusout",g);b.__ko_hasfocusLastValue=!1},update:function(b,c){var d=!!a.a.f(c());b.__ko_hasfocusUpdating||b.__ko_hasfocusLastValue===
d||(d?b.focus():b.blur(),!d&&b.__ko_hasfocusLastValue&&b.ownerDocument.body.focus(),a.u.G(a.a.Fb,null,[b,d?"focusin":"focusout"]))}};a.m.wa.hasfocus=!0;a.c.hasFocus=a.c.hasfocus;a.m.wa.hasFocus="hasfocus";a.c.html={init:function(){return{controlsDescendantBindings:!0}},update:function(b,c){a.a.fc(b,c())}};(function(){function b(b,d,e){a.c[b]={init:function(b,c,h,m,k){var l,p,q={},t,x,n;if(d){m=h.get("as");var u=h.get("noChildContext");n=!(m&&u);q={as:m,noChildContext:u,exportDependencies:n}}x=(t=
"render"==h.get("completeOn"))||h.has(a.i.pa);a.o(function(){var h=a.a.f(c()),m=!e!==!h,u=!p,r;if(n||m!==l){x&&(k=a.i.Cb(b,k));if(m){if(!d||n)q.dataDependency=a.S.o();r=d?k.createChildContext("function"==typeof h?h:c,q):a.S.qa()?k.extend(null,q):k}u&&a.S.qa()&&(p=a.a.Ca(a.h.childNodes(b),!0));m?(u||a.h.va(b,a.a.Ca(p)),a.Oa(r,b)):(a.h.Ea(b),t||a.i.ma(b,a.i.H));l=m}},null,{l:b});return{controlsDescendantBindings:!0}}};a.m.Ra[b]=!1;a.h.ea[b]=!0}b("if");b("ifnot",!1,!0);b("with",!0)})();a.c.let={init:function(b,
c,d,e,f){c=f.extend(c);a.Oa(c,b);return{controlsDescendantBindings:!0}}};a.h.ea.let=!0;var Q={};a.c.options={init:function(b){if("select"!==a.a.R(b))throw Error("options binding applies only to SELECT elements");for(;0<b.length;)b.remove(0);return{controlsDescendantBindings:!0}},update:function(b,c,d){function e(){return a.a.jb(b.options,function(a){return a.selected})}function f(a,b,c){var d=typeof b;return"function"==d?b(a):"string"==d?a[b]:c}function g(c,d){if(x&&l)a.i.ma(b,a.i.H);else if(t.length){var e=
0<=a.a.A(t,a.w.M(d[0]));a.a.Zc(d[0],e);x&&!e&&a.u.G(a.a.Fb,null,[b,"change"])}}var h=b.multiple,m=0!=b.length&&h?b.scrollTop:null,k=a.a.f(c()),l=d.get("valueAllowUnset")&&d.has("value"),p=d.get("optionsIncludeDestroyed");c={};var q,t=[];l||(h?t=a.a.Mb(e(),a.w.M):0<=b.selectedIndex&&t.push(a.w.M(b.options[b.selectedIndex])));k&&("undefined"==typeof k.length&&(k=[k]),q=a.a.jb(k,function(b){return p||b===n||null===b||!a.a.f(b._destroy)}),d.has("optionsCaption")&&(k=a.a.f(d.get("optionsCaption")),null!==
k&&k!==n&&q.unshift(Q)));var x=!1;c.beforeRemove=function(a){b.removeChild(a)};k=g;d.has("optionsAfterRender")&&"function"==typeof d.get("optionsAfterRender")&&(k=function(b,c){g(0,c);a.u.G(d.get("optionsAfterRender"),null,[c[0],b!==Q?b:n])});a.a.ec(b,q,function(c,e,g){g.length&&(t=!l&&g[0].selected?[a.w.M(g[0])]:[],x=!0);e=b.ownerDocument.createElement("option");c===Q?(a.a.Bb(e,d.get("optionsCaption")),a.w.cb(e,n)):(g=f(c,d.get("optionsValue"),c),a.w.cb(e,a.a.f(g)),c=f(c,d.get("optionsText"),g),
a.a.Bb(e,c));return[e]},c,k);if(!l){var B;h?B=t.length&&e().length<t.length:B=t.length&&0<=b.selectedIndex?a.w.M(b.options[b.selectedIndex])!==t[0]:t.length||0<=b.selectedIndex;B&&a.u.G(a.a.Fb,null,[b,"change"])}(l||a.S.Ya())&&a.i.ma(b,a.i.H);a.a.wd(b);m&&20<Math.abs(m-b.scrollTop)&&(b.scrollTop=m)}};a.c.options.$b=a.a.g.Z();a.c.selectedOptions={init:function(b,c,d){function e(){var e=c(),f=[];a.a.D(b.getElementsByTagName("option"),function(b){b.selected&&f.push(a.w.M(b))});a.m.eb(e,d,"selectedOptions",
f)}function f(){var d=a.a.f(c()),e=b.scrollTop;d&&"number"==typeof d.length&&a.a.D(b.getElementsByTagName("option"),function(b){var c=0<=a.a.A(d,a.w.M(b));b.selected!=c&&a.a.Zc(b,c)});b.scrollTop=e}if("select"!=a.a.R(b))throw Error("selectedOptions binding applies only to SELECT elements");var g;a.i.subscribe(b,a.i.H,function(){g?e():(a.a.B(b,"change",e),g=a.o(f,null,{l:b}))},null,{notifyImmediately:!0})},update:function(){}};a.m.wa.selectedOptions=!0;a.c.style={update:function(b,c){var d=a.a.f(c()||
{});a.a.P(d,function(c,d){d=a.a.f(d);if(null===d||d===n||!1===d)d="";if(v)v(b).css(c,d);else if(/^--/.test(c))b.style.setProperty(c,d);else{c=c.replace(/-(\w)/g,function(a,b){return b.toUpperCase()});var g=b.style[c];b.style[c]=d;d===g||b.style[c]!=g||isNaN(d)||(b.style[c]=d+"px")}})}};a.c.submit={init:function(b,c,d,e,f){if("function"!=typeof c())throw Error("The value for a submit binding must be a function");a.a.B(b,"submit",function(a){var d,e=c();try{d=e.call(f.$data,b)}finally{!0!==d&&(a.preventDefault?
a.preventDefault():a.returnValue=!1)}})}};a.c.text={init:function(){return{controlsDescendantBindings:!0}},update:function(b,c){a.a.Bb(b,c())}};a.h.ea.text=!0;(function(){if(A&&A.navigator){var b=function(a){if(a)return parseFloat(a[1])},c=A.navigator.userAgent,d,e,f,g,h;(d=A.opera&&A.opera.version&&parseInt(A.opera.version()))||(h=b(c.match(/Edge\/([^ ]+)$/)))||b(c.match(/Chrome\/([^ ]+)/))||(e=b(c.match(/Version\/([^ ]+) Safari/)))||(f=b(c.match(/Firefox\/([^ ]+)/)))||(g=a.a.W||b(c.match(/MSIE ([^ ]+)/)))||
(g=b(c.match(/rv:([^ )]+)/)))}if(8<=g&&10>g)var m=a.a.g.Z(),k=a.a.g.Z(),l=function(b){var c=this.activeElement;(c=c&&a.a.g.get(c,k))&&c(b)},p=function(b,c){var d=b.ownerDocument;a.a.g.get(d,m)||(a.a.g.set(d,m,!0),a.a.B(d,"selectionchange",l));a.a.g.set(b,k,c)};a.c.textInput={init:function(b,c,k){function l(c,d){a.a.B(b,c,d)}function m(){var d=a.a.f(c());if(null===d||d===n)d="";L!==n&&d===L?a.a.setTimeout(m,4):b.value!==d&&(y=!0,b.value=d,y=!1,v=b.value)}function r(){w||(L=b.value,w=a.a.setTimeout(z,
4))}function z(){clearTimeout(w);L=w=n;var d=b.value;v!==d&&(v=d,a.m.eb(c(),k,"textInput",d))}var v=b.value,w,L,A=9==a.a.W?r:z,y=!1;g&&l("keypress",z);11>g&&l("propertychange",function(a){y||"value"!==a.propertyName||A(a)});8==g&&(l("keyup",z),l("keydown",z));p&&(p(b,A),l("dragend",r));(!g||9<=g)&&l("input",A);5>e&&"textarea"===a.a.R(b)?(l("keydown",r),l("paste",r),l("cut",r)):11>d?l("keydown",r):4>f?(l("DOMAutoComplete",z),l("dragdrop",z),l("drop",z)):h&&"number"===b.type&&l("keydown",r);l("change",
z);l("blur",z);a.o(m,null,{l:b})}};a.m.wa.textInput=!0;a.c.textinput={preprocess:function(a,b,c){c("textInput",a)}}})();a.c.uniqueName={init:function(b,c){if(c()){var d="ko_unique_"+ ++a.c.uniqueName.rd;a.a.Yc(b,d)}}};a.c.uniqueName.rd=0;a.c.using={init:function(b,c,d,e,f){var g;d.has("as")&&(g={as:d.get("as"),noChildContext:d.get("noChildContext")});c=f.createChildContext(c,g);a.Oa(c,b);return{controlsDescendantBindings:!0}}};a.h.ea.using=!0;a.c.value={init:function(b,c,d){var e=a.a.R(b),f="input"==
e;if(!f||"checkbox"!=b.type&&"radio"!=b.type){var g=[],h=d.get("valueUpdate"),m=!1,k=null;h&&("string"==typeof h?g=[h]:g=a.a.wc(h),a.a.Pa(g,"change"));var l=function(){k=null;m=!1;var e=c(),f=a.w.M(b);a.m.eb(e,d,"value",f)};!a.a.W||!f||"text"!=b.type||"off"==b.autocomplete||b.form&&"off"==b.form.autocomplete||-1!=a.a.A(g,"propertychange")||(a.a.B(b,"propertychange",function(){m=!0}),a.a.B(b,"focus",function(){m=!1}),a.a.B(b,"blur",function(){m&&l()}));a.a.D(g,function(c){var d=l;a.a.Ud(c,"after")&&
(d=function(){k=a.w.M(b);a.a.setTimeout(l,0)},c=c.substring(5));a.a.B(b,c,d)});var p;p=f&&"file"==b.type?function(){var d=a.a.f(c());null===d||d===n||""===d?b.value="":a.u.G(l)}:function(){var f=a.a.f(c()),g=a.w.M(b);if(null!==k&&f===k)a.a.setTimeout(p,0);else if(f!==g||g===n)"select"===e?(g=d.get("valueAllowUnset"),a.w.cb(b,f,g),g||f===a.w.M(b)||a.u.G(l)):a.w.cb(b,f)};if("select"===e){var q;a.i.subscribe(b,a.i.H,function(){q?d.get("valueAllowUnset")?p():l():(a.a.B(b,"change",l),q=a.o(p,null,{l:b}))},
null,{notifyImmediately:!0})}else a.a.B(b,"change",l),a.o(p,null,{l:b})}else a.ib(b,{checkedValue:c})},update:function(){}};a.m.wa.value=!0;a.c.visible={update:function(b,c){var d=a.a.f(c()),e="none"!=b.style.display;d&&!e?b.style.display="":!d&&e&&(b.style.display="none")}};a.c.hidden={update:function(b,c){a.c.visible.update(b,function(){return!a.a.f(c())})}};(function(b){a.c[b]={init:function(c,d,e,f,g){return a.c.event.init.call(this,c,function(){var a={};a[b]=d();return a},e,f,g)}}})("click");
a.ca=function(){};a.ca.prototype.renderTemplateSource=function(){throw Error("Override renderTemplateSource");};a.ca.prototype.createJavaScriptEvaluatorBlock=function(){throw Error("Override createJavaScriptEvaluatorBlock");};a.ca.prototype.makeTemplateSource=function(b,c){if("string"==typeof b){c=c||w;var d=c.getElementById(b);if(!d)throw Error("Cannot find template with ID "+b);return new a.C.F(d)}if(1==b.nodeType||8==b.nodeType)return new a.C.ia(b);throw Error("Unknown template type: "+b);};a.ca.prototype.renderTemplate=
function(a,c,d,e){a=this.makeTemplateSource(a,e);return this.renderTemplateSource(a,c,d,e)};a.ca.prototype.isTemplateRewritten=function(a,c){return!1===this.allowTemplateRewriting?!0:this.makeTemplateSource(a,c).data("isRewritten")};a.ca.prototype.rewriteTemplate=function(a,c,d){a=this.makeTemplateSource(a,d);c=c(a.text());a.text(c);a.data("isRewritten",!0)};a.b("templateEngine",a.ca);a.kc=function(){function b(b,c,d,h){b=a.m.ac(b);for(var m=a.m.Ra,k=0;k<b.length;k++){var l=b[k].key;if(Object.prototype.hasOwnProperty.call(m,
l)){var p=m[l];if("function"===typeof p){if(l=p(b[k].value))throw Error(l);}else if(!p)throw Error("This template engine does not support the '"+l+"' binding within its templates");}}d="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+a.m.vb(b,{valueAccessors:!0})+" } })()},'"+d.toLowerCase()+"')";return h.createJavaScriptEvaluatorBlock(d)+c}var c=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,
d=/\x3c!--\s*ko\b\s*([\s\S]*?)\s*--\x3e/g;return{xd:function(b,c,d){c.isTemplateRewritten(b,d)||c.rewriteTemplate(b,function(b){return a.kc.Ld(b,c)},d)},Ld:function(a,f){return a.replace(c,function(a,c,d,e,l){return b(l,c,d,f)}).replace(d,function(a,c){return b(c,"\x3c!-- ko --\x3e","#comment",f)})},md:function(b,c){return a.aa.Xb(function(d,h){var m=d.nextSibling;m&&m.nodeName.toLowerCase()===c&&a.ib(m,b,h)})}}}();a.b("__tr_ambtns",a.kc.md);(function(){a.C={};a.C.F=function(b){if(this.F=b){var c=
a.a.R(b);this.ab="script"===c?1:"textarea"===c?2:"template"==c&&b.content&&11===b.content.nodeType?3:4}};a.C.F.prototype.text=function(){var b=1===this.ab?"text":2===this.ab?"value":"innerHTML";if(0==arguments.length)return this.F[b];var c=arguments[0];"innerHTML"===b?a.a.fc(this.F,c):this.F[b]=c};var b=a.a.g.Z()+"_";a.C.F.prototype.data=function(c){if(1===arguments.length)return a.a.g.get(this.F,b+c);a.a.g.set(this.F,b+c,arguments[1])};var c=a.a.g.Z();a.C.F.prototype.nodes=function(){var b=this.F;
if(0==arguments.length){var e=a.a.g.get(b,c)||{},f=e.lb||(3===this.ab?b.content:4===this.ab?b:n);if(!f||e.jd){var g=this.text();g&&g!==e.bb&&(f=a.a.Md(g,b.ownerDocument),a.a.g.set(b,c,{lb:f,bb:g,jd:!0}))}return f}e=arguments[0];this.ab!==n&&this.text("");a.a.g.set(b,c,{lb:e})};a.C.ia=function(a){this.F=a};a.C.ia.prototype=new a.C.F;a.C.ia.prototype.constructor=a.C.ia;a.C.ia.prototype.text=function(){if(0==arguments.length){var b=a.a.g.get(this.F,c)||{};b.bb===n&&b.lb&&(b.bb=b.lb.innerHTML);return b.bb}a.a.g.set(this.F,
c,{bb:arguments[0]})};a.b("templateSources",a.C);a.b("templateSources.domElement",a.C.F);a.b("templateSources.anonymousTemplate",a.C.ia)})();(function(){function b(b,c,d){var e;for(c=a.h.nextSibling(c);b&&(e=b)!==c;)b=a.h.nextSibling(e),d(e,b)}function c(c,d){if(c.length){var e=c[0],f=c[c.length-1],g=e.parentNode,h=a.ga.instance,m=h.preprocessNode;if(m){b(e,f,function(a,b){var c=a.previousSibling,d=m.call(h,a);d&&(a===e&&(e=d[0]||b),a===f&&(f=d[d.length-1]||c))});c.length=0;if(!e)return;e===f?c.push(e):
(c.push(e,f),a.a.Ua(c,g))}b(e,f,function(b){1!==b.nodeType&&8!==b.nodeType||a.vc(d,b)});b(e,f,function(b){1!==b.nodeType&&8!==b.nodeType||a.aa.cd(b,[d])});a.a.Ua(c,g)}}function d(a){return a.nodeType?a:0<a.length?a[0]:null}function e(b,e,f,h,m){m=m||{};var n=(b&&d(b)||f||{}).ownerDocument,B=m.templateEngine||g;a.kc.xd(f,B,n);f=B.renderTemplate(f,h,m,n);if("number"!=typeof f.length||0<f.length&&"number"!=typeof f[0].nodeType)throw Error("Template engine must return an array of DOM nodes");n=!1;switch(e){case "replaceChildren":a.h.va(b,
f);n=!0;break;case "replaceNode":a.a.Xc(b,f);n=!0;break;case "ignoreTargetNode":break;default:throw Error("Unknown renderMode: "+e);}n&&(c(f,h),m.afterRender&&a.u.G(m.afterRender,null,[f,h[m.as||"$data"]]),"replaceChildren"==e&&a.i.ma(b,a.i.H));return f}function f(b,c,d){return a.O(b)?b():"function"===typeof b?b(c,d):b}var g;a.gc=function(b){if(b!=n&&!(b instanceof a.ca))throw Error("templateEngine must inherit from ko.templateEngine");g=b};a.dc=function(b,c,h,m,t){h=h||{};if((h.templateEngine||g)==
n)throw Error("Set a template engine before calling renderTemplate");t=t||"replaceChildren";if(m){var x=d(m);return a.$(function(){var g=c&&c instanceof a.fa?c:new a.fa(c,null,null,null,{exportDependencies:!0}),n=f(b,g.$data,g),g=e(m,t,n,g,h);"replaceNode"==t&&(m=g,x=d(m))},null,{Sa:function(){return!x||!a.a.Sb(x)},l:x&&"replaceNode"==t?x.parentNode:x})}return a.aa.Xb(function(d){a.dc(b,c,h,d,"replaceNode")})};a.Qd=function(b,d,g,h,m){function x(b,c){a.u.G(a.a.ec,null,[h,b,u,g,r,c]);a.i.ma(h,a.i.H)}
function r(a,b){c(b,v);g.afterRender&&g.afterRender(b,a);v=null}function u(a,c){v=m.createChildContext(a,{as:z,noChildContext:g.noChildContext,extend:function(a){a.$index=c;z&&(a[z+"Index"]=c)}});var d=f(b,a,v);return e(h,"ignoreTargetNode",d,v,g)}var v,z=g.as,w=!1===g.includeDestroyed||a.options.foreachHidesDestroyed&&!g.includeDestroyed;if(w||g.beforeRemove||!a.Pc(d))return a.$(function(){var b=a.a.f(d)||[];"undefined"==typeof b.length&&(b=[b]);w&&(b=a.a.jb(b,function(b){return b===n||null===b||
!a.a.f(b._destroy)}));x(b)},null,{l:h});x(d.v());var A=d.subscribe(function(a){x(d(),a)},null,"arrayChange");A.l(h);return A};var h=a.a.g.Z(),m=a.a.g.Z();a.c.template={init:function(b,c){var d=a.a.f(c());if("string"==typeof d||"name"in d)a.h.Ea(b);else if("nodes"in d){d=d.nodes||[];if(a.O(d))throw Error('The "nodes" option must be a plain, non-observable array.');var e=d[0]&&d[0].parentNode;e&&a.a.g.get(e,m)||(e=a.a.Yb(d),a.a.g.set(e,m,!0));(new a.C.ia(b)).nodes(e)}else if(d=a.h.childNodes(b),0<d.length)e=
a.a.Yb(d),(new a.C.ia(b)).nodes(e);else throw Error("Anonymous template defined, but no template content was provided");return{controlsDescendantBindings:!0}},update:function(b,c,d,e,f){var g=c();c=a.a.f(g);d=!0;e=null;"string"==typeof c?c={}:(g="name"in c?c.name:b,"if"in c&&(d=a.a.f(c["if"])),d&&"ifnot"in c&&(d=!a.a.f(c.ifnot)),d&&!g&&(d=!1));"foreach"in c?e=a.Qd(g,d&&c.foreach||[],c,b,f):d?(d=f,"data"in c&&(d=f.createChildContext(c.data,{as:c.as,noChildContext:c.noChildContext,exportDependencies:!0})),
e=a.dc(g,d,c,b)):a.h.Ea(b);f=e;(c=a.a.g.get(b,h))&&"function"==typeof c.s&&c.s();a.a.g.set(b,h,!f||f.ja&&!f.ja()?n:f)}};a.m.Ra.template=function(b){b=a.m.ac(b);return 1==b.length&&b[0].unknown||a.m.Id(b,"name")?null:"This template engine does not support anonymous templates nested within its templates"};a.h.ea.template=!0})();a.b("setTemplateEngine",a.gc);a.b("renderTemplate",a.dc);a.a.Kc=function(a,c,d){if(a.length&&c.length){var e,f,g,h,m;for(e=f=0;(!d||e<d)&&(h=a[f]);++f){for(g=0;m=c[g];++g)if(h.value===
m.value){h.moved=m.index;m.moved=h.index;c.splice(g,1);e=g=0;break}e+=g}}};a.a.Pb=function(){function b(b,d,e,f,g){var h=Math.min,m=Math.max,k=[],l,p=b.length,q,n=d.length,r=n-p||1,v=p+n+1,u,w,z;for(l=0;l<=p;l++)for(w=u,k.push(u=[]),z=h(n,l+r),q=m(0,l-1);q<=z;q++)u[q]=q?l?b[l-1]===d[q-1]?w[q-1]:h(w[q]||v,u[q-1]||v)+1:q+1:l+1;h=[];m=[];r=[];l=p;for(q=n;l||q;)n=k[l][q]-1,q&&n===k[l][q-1]?m.push(h[h.length]={status:e,value:d[--q],index:q}):l&&n===k[l-1][q]?r.push(h[h.length]={status:f,value:b[--l],index:l}):
(--q,--l,g.sparse||h.push({status:"retained",value:d[q]}));a.a.Kc(r,m,!g.dontLimitMoves&&10*p);return h.reverse()}return function(a,d,e){e="boolean"===typeof e?{dontLimitMoves:e}:e||{};a=a||[];d=d||[];return a.length<d.length?b(a,d,"added","deleted",e):b(d,a,"deleted","added",e)}}();a.b("utils.compareArrays",a.a.Pb);(function(){function b(b,c,d,h,m){var k=[],l=a.$(function(){var l=c(d,m,a.a.Ua(k,b))||[];0<k.length&&(a.a.Xc(k,l),h&&a.u.G(h,null,[d,l,m]));k.length=0;a.a.Nb(k,l)},null,{l:b,Sa:function(){return!a.a.kd(k)}});
return{Y:k,$:l.ja()?l:n}}var c=a.a.g.Z(),d=a.a.g.Z();a.a.ec=function(e,f,g,h,m,k){function l(b){y={Aa:b,pb:a.ta(w++)};v.push(y);r||F.push(y)}function p(b){y=t[b];w!==y.pb.v()&&D.push(y);y.pb(w++);a.a.Ua(y.Y,e);v.push(y)}function q(b,c){if(b)for(var d=0,e=c.length;d<e;d++)a.a.D(c[d].Y,function(a){b(a,d,c[d].Aa)})}f=f||[];"undefined"==typeof f.length&&(f=[f]);h=h||{};var t=a.a.g.get(e,c),r=!t,v=[],u=0,w=0,z=[],A=[],C=[],D=[],F=[],y,I=0;if(r)a.a.D(f,l);else{if(!k||t&&t._countWaitingForRemove){var E=
a.a.Mb(t,function(a){return a.Aa});k=a.a.Pb(E,f,{dontLimitMoves:h.dontLimitMoves,sparse:!0})}for(var E=0,G,H,K;G=k[E];E++)switch(H=G.moved,K=G.index,G.status){case "deleted":for(;u<K;)p(u++);H===n&&(y=t[u],y.$&&(y.$.s(),y.$=n),a.a.Ua(y.Y,e).length&&(h.beforeRemove&&(v.push(y),I++,y.Aa===d?y=null:C.push(y)),y&&z.push.apply(z,y.Y)));u++;break;case "added":for(;w<K;)p(u++);H!==n?(A.push(v.length),p(H)):l(G.value)}for(;w<f.length;)p(u++);v._countWaitingForRemove=I}a.a.g.set(e,c,v);q(h.beforeMove,D);a.a.D(z,
h.beforeRemove?a.oa:a.removeNode);var M,O,P;try{P=e.ownerDocument.activeElement}catch(N){}if(A.length)for(;(E=A.shift())!=n;){y=v[E];for(M=n;E;)if((O=v[--E].Y)&&O.length){M=O[O.length-1];break}for(f=0;u=y.Y[f];M=u,f++)a.h.Wb(e,u,M)}for(E=0;y=v[E];E++){y.Y||a.a.extend(y,b(e,g,y.Aa,m,y.pb));for(f=0;u=y.Y[f];M=u,f++)a.h.Wb(e,u,M);!y.Ed&&m&&(m(y.Aa,y.Y,y.pb),y.Ed=!0,M=y.Y[y.Y.length-1])}P&&e.ownerDocument.activeElement!=P&&P.focus();q(h.beforeRemove,C);for(E=0;E<C.length;++E)C[E].Aa=d;q(h.afterMove,D);
q(h.afterAdd,F)}})();a.b("utils.setDomNodeChildrenFromArrayMapping",a.a.ec);a.ba=function(){this.allowTemplateRewriting=!1};a.ba.prototype=new a.ca;a.ba.prototype.constructor=a.ba;a.ba.prototype.renderTemplateSource=function(b,c,d,e){if(c=(9>a.a.W?0:b.nodes)?b.nodes():null)return a.a.la(c.cloneNode(!0).childNodes);b=b.text();return a.a.ua(b,e)};a.ba.Ma=new a.ba;a.gc(a.ba.Ma);a.b("nativeTemplateEngine",a.ba);(function(){a.$a=function(){var a=this.Hd=function(){if(!v||!v.tmpl)return 0;try{if(0<=v.tmpl.tag.tmpl.open.toString().indexOf("__"))return 2}catch(a){}return 1}();
this.renderTemplateSource=function(b,e,f,g){g=g||w;f=f||{};if(2>a)throw Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");var h=b.data("precompiled");h||(h=b.text()||"",h=v.template(null,"{{ko_with $item.koBindingContext}}"+h+"{{/ko_with}}"),b.data("precompiled",h));b=[e.$data];e=v.extend({koBindingContext:e},f.templateOptions);e=v.tmpl(h,b,e);e.appendTo(g.createElement("div"));v.fragments={};return e};this.createJavaScriptEvaluatorBlock=function(a){return"{{ko_code ((function() { return "+
a+" })()) }}"};this.addTemplate=function(a,b){w.write("<script type='text/html' id='"+a+"'>"+b+"\x3c/script>")};0<a&&(v.tmpl.tag.ko_code={open:"__.push($1 || '');"},v.tmpl.tag.ko_with={open:"with($1) {",close:"} "})};a.$a.prototype=new a.ca;a.$a.prototype.constructor=a.$a;var b=new a.$a;0<b.Hd&&a.gc(b);a.b("jqueryTmplTemplateEngine",a.$a)})()})})();})();
;
!function(n,a){"use strict";var s;function i(e,n){var r;if(e&&"object"==typeof e)return(r=n)&&"object"==typeof r&&r.constructor===Object?(n.deep=n.deep||!1,n.fields=n.fields||Object.getOwnPropertyNames(e),n.lazy=n.lazy||!1,p(e,n.fields,n)):p(e,n||Object.getOwnPropertyNames(e),{}),e;throw new Error("When calling ko.track, you must pass an object as the first parameter.")}var t,o,u,e,r=/^function\s*([^\s(]+)/;function c(e){return e&&"object"==typeof e&&"Object"===((e=e.constructor).name||(e.toString().trim().match(r)||[])[1])}function f(e,n,r){var t=s.isObservable(e),i=!t&&Array.isArray(e),o=t?e:i?s.observableArray(e):s.observable(e);return r[n]=function(){return o},(i||t&&"push"in o)&&y(s,o),{configurable:!0,enumerable:!0,get:o,set:s.isWriteableObservable(o)?o:a}}function l(e,n,r){var t;return s.isObservable(e)?f(e,n,r):(r[n]=function(){return i(e)},{configurable:!0,enumerable:!0,get:function(){return i(e)()},set:function(e){i(e,!0)}});function i(e,n){return t?n?t(e):t:Array.isArray(e)?(t=s.observableArray(e),y(s,t),t):t=s.observable(e)}}function p(r,e,t){var i,o;e.length&&(i=b(r,!0),o={},e.forEach(function(e){var n;e in i||!1!==Object.getOwnPropertyDescriptor(r,e).configurable&&(n=r[e],o[e]=(t.lazy?l:f)(n,e,i),t.deep)&&c(n)&&p(n,Object.keys(n),t)}),Object.defineProperties(r,o))}function b(e,n){var r=(t=t||u()).get(e);return!r&&n&&t.set(e,r={}),r}function d(e,n){var r;t&&(1===arguments.length?t.delete(e):(r=b(e,!1))&&n.forEach(function(e){delete r[e]}))}function v(e,n,r){var t={owner:e,deferEvaluation:!0};if("function"==typeof r)t.read=r;else{if("value"in r)throw new Error('For ko.defineProperty, you must not specify a "value" for the property. You must provide a "get" function.');if("function"!=typeof r.get)throw new Error('For ko.defineProperty, the third parameter must be either an evaluator function, or an options object containing a function called "get".');t.read=r.get,t.write=r.set}return e[n]=this.computed(t),i.call(this,e,[n]),e}function y(r,t){var i=null;r.computed(function(){i&&(i.dispose(),i=null);var e,n=t();n instanceof Array&&(e=t,i=function(e,n){o=o||u();var r=o.get(n);{var t;r||(r=new e.subscribable,o.set(n,r),function(r,t,i){["pop","push","reverse","shift","sort","splice","unshift"].forEach(function(e){var n=r[e];r[e]=function(){var e=n.apply(this,arguments);return!0!==i.pause&&t.notifySubscribers(this),e}})}(n,r,t={}),function(r,t,i,o){["remove","removeAll","destroy","destroyAll","replace"].forEach(function(n){Object.defineProperty(t,n,{enumerable:!1,value:function(){var e;o.pause=!0;try{e=r.observableArray.fn[n].apply(r.observableArray(t),arguments)}finally{o.pause=!1}return i.notifySubscribers(t),e}})})}(e,n,r,t))}return r}(r,n).subscribe(e))})}function g(e,n){return e&&"object"==typeof e&&(e=b(e,!1))&&n in e?e[n]():null}function h(e,n){return!(!e||"object"!=typeof e||!(e=b(e,!1)))&&n in e}function m(e,n){e=g(e,n);e&&e.valueHasMutated()}function w(u){function e(e){this.bindingCache={},this._providerToWrap=e,this._nativeBindingProvider=new u.bindingProvider}u.track=i,u.untrack=d,u.getObservable=g,u.valueHasMutated=m,u.defineProperty=v,u.es5={getAllObservablesForObject:b,notifyWhenPresentOrFutureArrayValuesMutate:y,isTracked:h},e.prototype.nodeHasBindings=function(){return this._providerToWrap.nodeHasBindings.apply(this._providerToWrap,arguments)},e.prototype.getBindingAccessors=function(e,n){var r=this._nativeBindingProvider.getBindingsString(e,n);return r?this.parseBindingsString(r,n,e,{valueAccessors:!0}):null},e.prototype.parseBindingsString=function(n,e,r,t){try{return i=n,o=this.bindingCache,s=i+((a=t)&&a.valueAccessors||""),(o[s]||(o[s]=function(e,n){e=function(e,n){n=n||{};var r=[];return("string"==typeof e?u.expressionRewriting.parseObjectLiteral(e):e).forEach(function(e){var n;n=e.key||e.unknown,(e=e.value).match(/^\[/)?r.push(n+":ko.observableArray("+e+")"):r.push(n+':ko.getObservable($data,"'+e+'")||'+e)}),u.expressionRewriting.preProcessBindings(r.join(","),n)}(e,n);return new Function("$context","$element","with($context){with($data||{}){return{"+e+"}}}")}(i,a)))(e,r)}catch(e){throw e.message="Unable to parse bindings.\nBindings value: "+n+"\nMessage: "+e.message,e}var i,o,a,s},u.es5BindingProvider=e,u.bindingProvider.instance=new e(u.bindingProvider.instance)}"object"==typeof exports&&"object"==typeof module?(s=require("knockout"),e=require("../lib/weakmap"),w(s),u=function(){return new e},module.exports=s):"function"==typeof define&&define.amd?define(["knockout"],function(e){return w(s=e),u=function(){return new n.WeakMap},e}):"ko"in n&&(s=n.ko,w(n.ko),u=function(){return new n.WeakMap})}(this);;
// knockout-sortable 1.2.0 | (c) 2019 Ryan Niemeyer |  http://www.opensource.org/licenses/mit-license
!function(a){if("function"==typeof define&&define.amd)define(["knockout","jquery","jquery-ui/ui/widgets/sortable","jquery-ui/ui/widgets/draggable","jquery-ui/ui/widgets/droppable"],a);else if("function"==typeof require&&"object"==typeof exports&&"object"==typeof module){var b=require("knockout"),c=require("jquery");require("jquery-ui/ui/widgets/sortable"),require("jquery-ui/ui/widgets/draggable"),require("jquery-ui/ui/widgets/droppable"),a(b,c)}else a(window.ko,window.jQuery)}(function(a,b){var c="ko_sortItem",d="ko_sourceIndex",e="ko_sortList",f="ko_parentList",g="ko_dragItem",h=a.utils.unwrapObservable,i=a.utils.domData.get,j=a.utils.domData.set,k=b.ui&&b.ui.version,l=k&&k.indexOf("1.6.")&&k.indexOf("1.7.")&&(k.indexOf("1.8.")||"1.8.24"===k),m=function(b,d){a.utils.arrayForEach(b,function(a){1===a.nodeType&&(j(a,c,d),j(a,f,i(a.parentNode,e)))})},n=function(b,c){var d,e={},f={};return a.utils.peekObservable(b()).data?(f=h(b()||{}),e[c]=f.data,f.hasOwnProperty("template")&&(e.name=f.template)):e[c]=b(),a.utils.arrayForEach(["afterAdd","afterRender","as","beforeRemove","includeDestroyed","templateEngine","templateOptions","nodes"],function(b){f.hasOwnProperty(b)?e[b]=f[b]:a.bindingHandlers.sortable.hasOwnProperty(b)&&(e[b]=a.bindingHandlers.sortable[b])}),"foreach"===c&&(e.afterRender?(d=e.afterRender,e.afterRender=function(a,b){m.call(b,a,b),d.call(b,a,b)}):e.afterRender=m),e},o=function(a,b){var c=h(b);if(c)for(var d=0;d<=a;d++)c[d]&&h(c[d]._destroy)&&a++;return a},p=function(c,d){var e,f;d?(f=document.getElementById(d),f&&(e=new a.templateSources.domElement(f),e.text(b.trim(e.text())))):b(c).contents().each(function(){this&&1!==this.nodeType&&c.removeChild(this)})};a.bindingHandlers.sortable={init:function(k,m,q,r,s){var t,u,v=b(k),w=h(m())||{},x=n(m,"foreach"),y={};p(k,x.name),b.extend(!0,y,a.bindingHandlers.sortable),w.options&&y.options&&(a.utils.extend(y.options,w.options),delete w.options),a.utils.extend(y,w),y.connectClass&&(a.isObservable(y.allowDrop)||"function"==typeof y.allowDrop)?a.computed({read:function(){var b=h(y.allowDrop),c="function"==typeof b?b.call(this,x.foreach):b;a.utils.toggleDomNodeCssClass(k,y.connectClass,c)},disposeWhenNodeIsRemoved:k},this):a.utils.toggleDomNodeCssClass(k,y.connectClass,y.allowDrop),a.bindingHandlers.template.init(k,function(){return x},q,r,s),t=y.options.start,u=y.options.update,y.options.helper||(y.options.helper=function(a,c){return c.is("tr")&&c.children().each(function(){b(this).width(b(this).width())}),c});var z=setTimeout(function(){var m,n=y.options.receive;v.sortable(a.utils.extend(y.options,{start:function(b,c){var e=c.item[0];j(e,d,a.utils.arrayIndexOf(c.item.parent().children(),e)),c.item.find("input:focus").change(),t&&t.apply(this,arguments)},receive:function(a,b){"function"==typeof n&&n.call(this,a,b),m=i(b.item[0],g),m&&(m.clone&&(m=m.clone()),y.dragged&&(m=y.dragged.call(this,m,a,b)||m))},update:function(g,k){var n,p,q,r,s,t=k.item[0],v=k.item.parent()[0],w=i(t,c)||m;if(w||b(t).remove(),m=null,w&&this===v||!l&&b.contains(this,v)){if(n=i(t,f),q=i(t,d),p=i(t.parentNode,e),r=a.utils.arrayIndexOf(k.item.parent().children(),t),x.includeDestroyed||(q=o(q,n),r=o(r,p)),(y.beforeMove||y.afterMove)&&(s={item:w,sourceParent:n,sourceParentNode:n&&k.sender||t.parentNode,sourceIndex:q,targetParent:p,targetIndex:r,cancelDrop:!1},y.beforeMove&&y.beforeMove.call(this,s,g,k)),n?b(n===p?this:k.sender||this).sortable("cancel"):b(t).remove(),s&&s.cancelDrop)return;if(y.hasOwnProperty("strategyMove")&&y.strategyMove!==!1){if(r>=0)if(n)if(n!==p)n.splice(q,1),p.splice(r,0,w),j(t,c,null),k.item.remove();else{var z=h(n);n.valueWillMutate&&n.valueWillMutate(),z.splice(q,1),z.splice(r,0,w),n.valueHasMutated&&n.valueHasMutated()}else p.splice(r,0,w),j(t,c,null),k.item.remove()}else r>=0&&(n&&(n.splice(q,1),a.processAllDeferredBindingUpdates&&a.processAllDeferredBindingUpdates(),a.options&&a.options.deferUpdates&&a.tasks.runEarly()),p.splice(r,0,w)),j(t,c,null);a.processAllDeferredBindingUpdates&&a.processAllDeferredBindingUpdates(),y.afterMove&&y.afterMove.call(this,s,g,k)}u&&u.apply(this,arguments)},connectWith:!!y.connectClass&&"."+y.connectClass})),void 0!==y.isEnabled&&a.computed({read:function(){v.sortable(h(y.isEnabled)?"enable":"disable")},disposeWhenNodeIsRemoved:k})},0);return a.utils.domNodeDisposal.addDisposeCallback(k,function(){(v.data("ui-sortable")||v.data("sortable"))&&v.sortable("destroy"),a.utils.toggleDomNodeCssClass(k,y.connectClass,!1),clearTimeout(z)}),{controlsDescendantBindings:!0}},update:function(b,c,d,f,g){var h=n(c,"foreach");j(b,e,h.foreach),a.bindingHandlers.template.update(b,function(){return h},d,f,g)},connectClass:"ko_container",allowDrop:!0,afterMove:null,beforeMove:null,options:{}},a.bindingHandlers.draggable={init:function(c,d,e,f,i){var k=h(d())||{},l=k.options||{},m=a.utils.extend({},a.bindingHandlers.draggable.options),o=n(d,"data"),p=k.connectClass||a.bindingHandlers.draggable.connectClass,q=void 0!==k.isEnabled?k.isEnabled:a.bindingHandlers.draggable.isEnabled;return k="data"in k?k.data:k,j(c,g,k),a.utils.extend(m,l),m.connectToSortable=!!p&&"."+p,b(c).draggable(m),void 0!==q&&a.computed({read:function(){b(c).draggable(h(q)?"enable":"disable")},disposeWhenNodeIsRemoved:c}),a.utils.domNodeDisposal.addDisposeCallback(c,function(){b(c).draggable("destroy")}),a.bindingHandlers.template.init(c,function(){return o},e,f,i)},update:function(b,c,d,e,f){var g=n(c,"data");return a.bindingHandlers.template.update(b,function(){return g},d,e,f)},connectClass:a.bindingHandlers.sortable.connectClass,options:{helper:"clone"}},a.bindingHandlers.droppable={init:function(d,e,f,j,k){var l=h(e())||{},m=l.options||{},n=a.utils.extend({},a.bindingHandlers.droppable.options),o=void 0!==l.isEnabled?l.isEnabled:a.bindingHandlers.droppable.isEnabled;a.utils.extend(n,m),l="data"in l?l.data:e(),n.drop=function(a,b){var d=i(b.draggable[0],g)||i(b.draggable[0],c);l(d)},b(d).droppable(n),void 0!==o&&a.computed({read:function(){b(d).droppable(h(o)?"enable":"disable")},disposeWhenNodeIsRemoved:d}),a.utils.domNodeDisposal.addDisposeCallback(d,function(){b(d).droppable("destroy")})},options:{accept:"*"}}});;
/*
 Knockout.Punches
 Enhanced binding syntaxes for Knockout 3+
 (c) Michael Best
 License: MIT (http://www.opensource.org/licenses/mit-license.php)
 Version 0.5.1
*/
(function(c){if("function"===typeof define&&define.amd)define(["knockout"],c);else if("object"===typeof module){var g=require("knockout");c(g)}else c(window.ko)})(function(c){function g(a,b){return u(A(a),"preprocess",b)}function A(a){return"object"===typeof a?a:c.getBindingHandler(a)||(c.bindingHandlers[a]={})}function u(a,b,d){if(a[b]){var h=a[b];a[b]=function(a,b,c){if(a=h.call(this,a,b,c))return d.call(this,a,b,c)}}else a[b]=d;return a}function q(a){var b=c.bindingProvider.instance;if(b.preprocessNode){var d=
b.preprocessNode;b.preprocessNode=function(b){var c=d.call(this,b);c||(c=a.call(this,b));return c}}else b.preprocessNode=a}function C(a,b){var d=c.getBindingHandler;c.getBindingHandler=function(c){var e;return d(c)||(e=c.match(a))&&b(e,c)}}function v(a){if(-1===a.indexOf("|"))return a;var b=a.match(/"([^"\\]|\\.)*"|'([^'\\]|\\.)*'|\|\||[|:]|[^\s|:"'][^|:"']*[^\s|:"']|[^\s|:"']/g);if(b&&1<b.length){b.push("|");a=b[0];for(var d,c,e=!1,f=!1,B=1;c=b[B];++B)"|"===c?(e&&(":"===d&&(a+="undefined"),a+=")"),
e=f=!0):(f?a="ko.filters['"+c+"']("+a:e&&":"===c?(":"===d&&(a+="undefined"),a+=","):a+=c,f=!1),d=c}return a}function w(a){g(a,v)}function x(a,b,d){function h(d){e[d]&&(e[d]=function(e,h){var g=Array.prototype.slice.call(arguments,0);g[1]=function(){var b={};b[a]=h();return b};return c.bindingHandlers[b][d].apply(this,g)})}var e=c.utils.extend({},this);h("init");h("update");e.preprocess&&(e.preprocess=null);c.virtualElements.allowedBindings[b]&&(c.virtualElements.allowedBindings[d]=!0);return e}function r(a,
b){var d=c.getBindingHandler(a);if(d){var h=d.getNamespacedHandler||x;d.getNamespacedHandler=function(){return g(h.apply(this,arguments),b)}}}function D(a,b,d){if("{"!==a.charAt(0))return a;a=c.expressionRewriting.parseObjectLiteral(a);c.utils.arrayForEach(a,function(a){d(b+E+a.key,a.value)})}function n(a){g(a,D)}function m(a){return/^([$_a-z][$\w]*|.+(\.\s*[$_a-z][$\w]*|\[.+\]))$/i.test(a)?"function(_x,_y,_z){return("+a+")(_x,_y,_z);}":a}function s(a){g(a,m)}function p(a,b,d){a=A(a);a._propertyPreprocessors||
(u(a,"preprocess",M),a._propertyPreprocessors={});u(a._propertyPreprocessors,b,d)}function M(a,b,d){if("{"!==a.charAt(0))return a;a=c.expressionRewriting.parseObjectLiteral(a);var h=[],e=this._propertyPreprocessors||{};c.utils.arrayForEach(a,function(a){var b=a.key;a=a.value;e[b]&&(a=e[b](a,b,d));a&&h.push("'"+b+"':"+a)});return"{"+h.join(",")+"}"}function y(a){return function(b){return"function("+a+"){return("+b+");}"}}function F(a,b,d){function c(a){var f=a.match(/^([\s\S]*)}}([\s\S]*?)\{\{([\s\S]*)$/);
f?(c(f[1]),b(f[2]),d(f[3])):d(a)}if(a=a.match(/^([\s\S]*?)\{\{([\s\S]*)}}([\s\S]*)$/))b(a[1]),c(a[2]),b(a[3])}function t(a){return null==a?"":a.trim?a.trim():a.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function G(a){if(3===a.nodeType&&a.nodeValue&&-1!==a.nodeValue.indexOf("{{")&&"TEXTAREA"!=(a.parentNode||{}).nodeName){var b=[];F(a.nodeValue,function(a){a&&b.push(document.createTextNode(a))},function(d){d&&b.push.apply(b,N.wrapExpression(d,a))});if(b.length){if(a.parentNode){for(var d=0,c=b.length,
e=a.parentNode;d<c;++d)e.insertBefore(b[d],a);e.removeChild(a)}return b}}}function H(){q(G)}function I(a){if(1===a.nodeType&&a.attributes.length)for(var b=a.getAttribute(z),d=c.utils.arrayPushAll([],a.attributes),h=d.length,e=0;e<h;++e){var f=d[e];if(f.specified&&f.name!=z&&-1!==f.value.indexOf("{{")){var g=[],k="";F(f.value,function(a){a&&g.push('"'+a.replace(/"/g,'\\"')+'"')},function(a){a&&(k=a,g.push("ko.unwrap("+a+")"))});1<g.length&&(k='""+'+g.join("+"));if(k){var l=f.name.toLowerCase(),l=O.attributeBinding(l,
k,a)||J(l,k,a),b=b?b+(","+l):l;a.setAttribute(z,b);a.removeAttribute(f.name)}}}}function J(a,b,d){return c.getBindingHandler(a)?a+":"+b:"attr."+a+":"+b}function K(){q(I)}var l=c.unwrap,k=c.punches={utils:{addBindingPreprocessor:g,addNodePreprocessor:q,addBindingHandlerCreator:C,setBindingPreprocessor:g,setNodePreprocessor:q}};k.enableAll=function(){H();K();n("attr");n("css");n("event");n("style");c.bindingHandlers.checked.after.push("attr.value");w("text");w("html");r("attr",v);s("click");s("submit");
s("optionsAfterRender");r("event",m);p("template","beforeRemove",m);p("template","afterAdd",m);p("template","afterRender",m)};c.filters={uppercase:function(a){return String.prototype.toUpperCase.call(l(a))},lowercase:function(a){return String.prototype.toLowerCase.call(l(a))},"default":function(a,b){a=l(a);return"function"===typeof a?a:"string"===typeof a?""===t(a)?b:a:null==a||0==a.length?b:a},replace:function(a,b,d){return String.prototype.replace.call(l(a),b,d)},fit:function(a,b,d,c){a=l(a);if(b&&
(""+a).length>b)switch(d=""+(d||"..."),b-=d.length,a=""+a,c){case "left":return d+a.slice(-b);case "middle":return c=Math.ceil(b/2),a.substr(0,c)+d+a.slice(c-b);default:return a.substr(0,b)+d}else return a},json:function(a,b,d){return c.toJSON(a,d,b)},number:function(a){return(+l(a)).toLocaleString()}};k.textFilter={preprocessor:v,enableForBinding:w};var E=".";C(/([^\.]+)\.(.+)/,function(a,b){var d=a[1],h=c.bindingHandlers[d];if(h)return d=(h.getNamespacedHandler||x).call(h,a[2],d,b),c.bindingHandlers[b]=
d});k.namespacedBinding={defaultGetHandler:x,setDefaultBindingPreprocessor:r,addDefaultBindingPreprocessor:r,preprocessor:D,enableForBinding:n};k.wrappedCallback={preprocessor:m,enableForBinding:s};k.preprocessBindingProperty={setPreprocessor:p,addPreprocessor:p};var L=y("$data,$event");k.expressionCallback={makePreprocessor:y,eventPreprocessor:L,enableForBinding:function(a,b){b=Array.prototype.slice.call(arguments,1).join();g(a,y(b))}};c.bindingHandlers.on={getNamespacedHandler:function(a){a=c.getBindingHandler("event"+
E+a);return g(a,L)}};if(!c.virtualElements.allowedBindings.html){var P=c.bindingHandlers.html.update;c.bindingHandlers.html.update=function(a,b){if(8===a.nodeType){var d=l(b());null!=d?(d=c.utils.parseHtmlFragment(""+d),c.virtualElements.setDomNodeChildren(a,d)):c.virtualElements.emptyNode(a)}else P(a,b)};c.virtualElements.allowedBindings.html=!0}var N=k.interpolationMarkup={preprocessor:G,enable:H,wrapExpression:function(a,b){var c=b?b.ownerDocument:document,h=!0,e;a=t(a);var f=a[0],g=a[a.length-
1],k=[];if("#"===f){if("/"===g?e=a.slice(1,-1):(e=a.slice(1),h=!1),f=e.match(/^([^,"'{}()\/:[\]\s]+)\s+([^\s:].*)/))e=f[1]+":"+f[2]}else"/"!==f&&(e="{"===f&&"}"===g?"html:"+t(a.slice(1,-1)):"text:"+t(a));e&&k.push(c.createComment("ko "+e));h&&k.push(c.createComment("/ko"));return k}},z="data-bind",O=k.attributeInterpolationMarkup={preprocessor:I,enable:K,attributeBinding:J};return k});
;
(function(){var a;this.Maslosoft||(this.Maslosoft={}),this.Maslosoft.Sugar||(this.Maslosoft.Sugar={}),a=Object.keys?Object.keys:function(){"use strict";var a,b,c,d;return d=Object.prototype.hasOwnProperty,c=!{toString:null}.propertyIsEnumerable("toString"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],b=a.length,function(e){var f,g,h;if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");h=[],g=void 0,f=void 0;for(g in e)g=g,d.call(e,g)&&h.push(g);if(c)for(f=0;f<b;)d.call(e,a[f])&&h.push(a[f]),f++;return h}}(),this.Maslosoft.Sugar.abstract=function(){throw new Error("This method is abstract")},this.Maslosoft.Sugar.implement=function(b,c){var d;return d=function(){var d,e,f,g;f=a(c.prototype),g=[];for(d in f)if(e=f[d],"function"==typeof c.prototype[e]){if("function"!=typeof b.prototype[e])throw new Error("Class "+b.name+" implementing "+c.name+" must have "+e+" method");g.push(void 0)}else g.push(void 0);return g},setTimeout(d,0)},this.Maslosoft.Sugar.mixin=function(b,c){var d,e,f,g,h;f=b.name,g=a(c.prototype),h=[];for(d in g)e=g[d],h.push(b.prototype[e]=c.prototype[e]);return h}}).call(this);
(function(){var abstract,implement,isArray,isFunction,mixin,parseQueryString,bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;mixin=Maslosoft.Sugar.mixin,implement=Maslosoft.Sugar.implement,abstract=Maslosoft.Sugar["abstract"],parseQueryString=function(queryString){var i,part,query,result;for(query=queryString.split("&"),result={},i=0;i<query.length;)part=query[i].split("=",2),1===part.length?result[part[0]]="":result[part[0]]=decodeURIComponent(part[1].replace(/\+/g," ")),++i;return result},isFunction=function(obj){return!!(obj&&obj.constructor&&obj.call&&obj.apply)},isArray=function(obj){return"[object Array]"===toString.call(obj)},this.Maslosoft||(this.Maslosoft={}),this.Maslosoft.Playlist=function(){function Playlist(element,options){null==options&&(options=null),this.options=new Maslosoft.Playlist.Options(options),this.adapters=this.options.adapters,this.extractor=new this.options.extractor,this.element=jQuery(element),this.element.id?this.id=this.element.id:(this.id="maslosoftPlaylist"+Playlist.idCounter++,this.element.prop("id",this.id)),this.frameId=this.id+"Frame",this.build(),this.msg=new Maslosoft.Playlist.Helpers.Messenger(this.frame)}var frameTemplate;return Playlist.idCounter=0,frameTemplate='<iframe src="" frameborder="" webkitAllowFullScreen mozallowfullscreen allowFullScreen scrolling="no" allowtransparency="true"></iframe>',Playlist.prototype.id="",Playlist.prototype.frameId="",Playlist.prototype.element=null,Playlist.prototype.links=null,Playlist.prototype.adapters=[],Playlist.prototype.msg=null,Playlist.prototype.extractor=null,Playlist.prototype.build=function(){var ad,adapter,currentLink,first,initScroller,j,k,len,len1,link,linkElement,links,playlistHolder,playlistWrapper,ref,src;for(links=this.extractor.getData(this.element),this.element.html("<div class='maslosoft-video-embed-wrapper'> <div class='maslosoft-video-embed-container'> "+frameTemplate+" </div> </div>"),this.playlist=jQuery('<div class="maslosoft-video-playlist" />'),this.frame=this.element.find("iframe"),this.frame.prop("id",this.frameId),first=!0,j=0,len=links.length;len>j;j++)for(link=links[j],ref=this.adapters,k=0,len1=ref.length;len1>k;k++)adapter=ref[k],adapter.match(link.url)&&(ad=new adapter,ad.setUrl(link.url),ad.setTitle(link.title),linkElement=this.createLink(ad),first&&(currentLink=linkElement,this.current=ad,src=ad.getSrc(this.frame),src&&this.frame.prop("src",src),this.frame.one("load",function(_this){return function(e){return ad.onEnd(_this.frame,function(){return _this.next(currentLink)})}}(this)),linkElement.addClass("active"),first=!1));return playlistWrapper=jQuery('<div class="maslosoft-video-playlist-wrapper"></div>'),playlistHolder=jQuery('<div class="maslosoft-video-playlist-holder"></div>'),playlistHolder.append(this.playlist),playlistWrapper.append(playlistHolder),this.element.append(playlistWrapper),this.links=this.playlist.find("a"),1===this.links.length&&(this.element.find(".maslosoft-video-playlist-wrapper").remove(),this.element.find(".maslosoft-video-embed-wrapper").css("width","100%")),"function"==typeof jQuery.fn.tooltip&&jQuery("#"+this.id).tooltip({selector:"a",placement:"left",container:"body"}),initScroller=function(_this){return function(e){return new Maslosoft.Playlist.Helpers.Scroller(_this.element,_this.playlist)}}(this),this.frame.on("load",initScroller),jQuery(window).on("resize",initScroller),initScroller(),!0},Playlist.prototype.next=function(link){var index,j,l,len,ref;for(link=link[0],ref=this.links,index=j=0,len=ref.length;len>j&&(l=ref[index],link.id!==l.id);index=++j);return index++,this.links[index]?(link=this.links[index],link.click()):(console.log("No more videos"),this.links.removeClass("active playing"),void(this.links.get(0)&&jQuery(this.links.get(0)).addClass("active")))},Playlist.prototype.createLink=function(adapter){var caption,link,thumbCallback;return caption=jQuery('<div class="caption"/>'),caption.html(adapter.getTitle()),link=jQuery("<a />"),link.attr("id",adapter.linkId),link.attr("title",adapter.getTitle()),link.attr("href",adapter.getUrl()),link.attr("rel","tooltip"),link.attr("data-placement","left"),link.attr("data-html",!0),thumbCallback=function(src){return link.css("background-image","url('"+src+"')"),link.attr("title",adapter.getTitle())},adapter.setThumb(thumbCallback),link.html("<i></i>"),link.on("mouseout",function(_this){return function(e){return"function"==typeof jQuery.fn.tooltip?link.tooltip("hide"):void 0}}(this)),link.on("click",function(_this){return function(e){var endCb,loaded,src;return e.preventDefault(),console.log("Playing next link..."),"function"==typeof jQuery.fn.tooltip&&link.tooltip("hide"),loaded=!0,adapter!==_this.current&&(_this.current=adapter,loaded=!1,src=adapter.getSrc(_this.frame),src&&_this.frame.prop("src",src)),_this.links.removeClass("active playing"),endCb=function(){return _this.next(link)},loaded||_this.frame.one("load",function(e){return adapter.play(_this.frame),adapter.onEnd(_this.frame,endCb),adapter.isPlaying()?link.addClass("active playing"):void 0}),loaded&&(adapter.isPlaying()?(link.addClass("active"),adapter.pause(_this.frame)):(link.addClass("active playing"),adapter.play(_this.frame),adapter.onEnd(_this.frame,function(){return _this.next(link)}))),link.addClass("active"),adapter.isPlaying()?link.addClass("playing"):link.removeClass("playing")}}(this)),this.playlist.append(link),link},Playlist}(),this.Maslosoft.Playlist.Options=function(){function Options(options){var j,len,name,option;for(null==options&&(options=[]),this.adapters=new Array,name=j=0,len=options.length;len>j;name=++j)option=options[name],this[name]=option;this.adapters.length||(this.adapters=[Maslosoft.Playlist.Adapters.YouTube,Maslosoft.Playlist.Adapters.Vimeo,Maslosoft.Playlist.Adapters.Dailymotion]),this.extractor||(this.extractor=Maslosoft.Playlist.Extractors.LinkExtractor)}return Options.prototype.adapters=[],Options.prototype.extractor=null,Options}(),this.Maslosoft.Playlist.Adapters||(this.Maslosoft.Playlist.Adapters={}),this.Maslosoft.Playlist.Adapters.Abstract=function(){function Abstract(){var id;Abstract.idCounter++,this.linkId="maslosoft-playlist-link-"+Abstract.idCounter,id=this.constructor.name,Abstract.initialized[id]||(Maslosoft.Playlist.Adapters[id].once(),Abstract.initialized[id]=!0)}var title;return Abstract.idCounter=0,Abstract.initialized={},Abstract.prototype.id="",Abstract.prototype.linkId="",Abstract.prototype.url="",Abstract.prototype.frame=null,Abstract.prototype.playing=!1,title="",Abstract.match=function(url){},Abstract.parseEventData=function(rawData){return JSON.parse(rawData)},Abstract.once=function(playlist){},Abstract.prototype.setUrl=function(url1){this.url=url1},Abstract.prototype.getUrl=function(){return this.url},Abstract.prototype.setTitle=function(title){return this.title=title},Abstract.prototype.getTitle=function(){return this.title},Abstract.prototype.setThumb=function(thumbCallback){},Abstract.prototype.getSrc=function(frame1){this.frame=frame1},Abstract.prototype.isPlaying=function(){return this.playing},Abstract.prototype.onEnd=function(frame1,event){this.frame=frame1},Abstract.prototype.play=function(frame1){this.frame=frame1},Abstract.prototype.stop=function(frame1){this.frame=frame1},Abstract.prototype.pause=function(frame1){this.frame=frame1},Abstract}(),this.Maslosoft.Playlist.Adapters||(this.Maslosoft.Playlist.Adapters={}),this.Maslosoft.Playlist.DailymotionOld=function(superClass){function DailymotionOld(){return this.setOnEndCallback=bind(this.setOnEndCallback,this),this.getSrc=bind(this.getSrc,this),DailymotionOld.__super__.constructor.apply(this,arguments)}var apiready,init,ready;return extend(DailymotionOld,superClass),ready=!1,apiready=!1,init=jQuery.noop,DailymotionOld.prototype.endCallback=null,DailymotionOld.match=function(url){return url.match("dailymotion")},DailymotionOld.once=function(){var script,tag;return script=document.createElement("script"),script.async=!0,script.src="https://api.dmcdn.net/all.js",tag=document.getElementsByTagName("script")[0],tag.parentNode.insertBefore(script,tag),window.dmAsyncInit=function(){return DM.init(),init(),ready=!0}},DailymotionOld.prototype.setUrl=function(url1){var part;return this.url=url1,part=this.url.replace(/.+?\//g,""),this.id=part.replace(/_.+/g,"")},DailymotionOld.prototype.getSrc=function(frame1){var frameId,params,src;return this.frame=frame1,frameId=this.frame.get(0).id,init=function(_this){return function(){var config,player;return config={video:_this.id,params:{api:"postMessage",autoplay:ready,origin:document.location.protocol+"//"+document.location.hostname,id:frameId,"endscreen-enable":0,"webkit-playsinline":1,html:1}},player=DM.player(_this.frame.get(0),config),player.addEventListener("apiready",function(){return console.log("DM API ready"),apiready=!0,_this.playing=ready}),player.addEventListener("end",function(){return console.log("On video end..."),console.log(_this.endCallback),_this.endCallback()})}}(this),ready?(init(),!1):(params=["endscreen-enable=0","api=postMessage","autoplay=1","id="+frameId,"origin="+document.location.protocol+"//"+document.location.hostname],src="https://www.dailymotion.com/embed/video/"+this.id+"?"+params.join("&"))},DailymotionOld.prototype.setThumb=function(thumbCallback){var url;return url="//www.dailymotion.com/thumbnail/video/"+this.id,thumbCallback(url)},DailymotionOld.prototype.play=function(frame1){return this.frame=frame1,this.call("play"),this.playing=!0},DailymotionOld.prototype.stop=function(frame1){return this.frame=frame1,this.call("pause"),this.playing=!1},DailymotionOld.prototype.pause=function(frame1){return this.frame=frame1,this.call("pause"),this.playing=!1},DailymotionOld.prototype.setOnEndCallback=function(frame1,callback){var e;this.frame=frame1;try{return this.endCallback=callback,console.log("Setting callback...")}catch(_error){return e=_error,console.log("Could not set callback..."),console.log(e)}},DailymotionOld.prototype.call=function(func,args){var toCall;return null==args&&(args=[]),(toCall=function(_this){return function(){var data,frameId,iframe,result;return ready?apiready?(console.log("Call DM "+func),frameId=_this.frame.get(0).id,iframe=document.getElementById(frameId),data={command:func,parameters:args},result=iframe.contentWindow.postMessage(JSON.stringify(data),"*")):void console.log("api not ready, skipping"):void console.log("Not loaded")}}(this))()},DailymotionOld}(this.Maslosoft.Playlist.Adapters.Abstract),this.Maslosoft.Playlist.Adapters||(this.Maslosoft.Playlist.Adapters={}),this.Maslosoft.Playlist.Adapters.Dailymotion=function(superClass){function Dailymotion(){return this.onEnd=bind(this.onEnd,this),this.getSrc=bind(this.getSrc,this),Dailymotion.__super__.constructor.apply(this,arguments)}var apiready,init,ready;return extend(Dailymotion,superClass),ready=!1,apiready=!1,init=jQuery.noop,Dailymotion.prototype.endCallback=null,Dailymotion.match=function(url){return url.match("dailymotion")},Dailymotion.parseEventData=function(rawData){return parseQueryString(rawData)},Dailymotion.once=function(){},Dailymotion.prototype.setUrl=function(url1){var part;return this.url=url1,part=this.url.replace(/.+?\//g,""),this.id=part.replace(/_.+/g,"")},Dailymotion.prototype.getSrc=function(frame1){var frameId,params,src;return this.frame=frame1,frameId=this.frame.get(0).id,params=["endscreen-enable=0","api=postMessage","autoplay=0","id="+frameId,"origin="+document.location.protocol+"//"+document.location.hostname],src="https://www.dailymotion.com/embed/video/"+this.id+"?"+params.join("&")},Dailymotion.prototype.setThumb=function(thumbCallback){var url;return url="//www.dailymotion.com/thumbnail/video/"+this.id,thumbCallback(url)},Dailymotion.prototype.play=function(frame1){return this.frame=frame1,this.call("play"),this.playing=!0},Dailymotion.prototype.stop=function(frame1){return this.frame=frame1,this.call("pause"),this.playing=!1},Dailymotion.prototype.pause=function(frame1){return this.frame=frame1,this.call("pause"),this.playing=!1},Dailymotion.prototype.onEnd=function(frame1,callback){var name,onMsg;return this.frame=frame1,onMsg=function(e,data){return console.log("onEnd Dailymotion"),callback()},name="message.maslosoft.playlist.dailymotion.end",this.frame.on(name,onMsg)},Dailymotion.prototype.call=function(func,args){var toCall;return null==args&&(args=[]),(toCall=function(_this){return function(){var data,frameId,iframe,result;return console.log("Call DM "+func),frameId=_this.frame.get(0).id,iframe=document.getElementById(frameId),data={command:func,parameters:args},result=iframe.contentWindow.postMessage(JSON.stringify(data),"*")}}(this))()},Dailymotion}(this.Maslosoft.Playlist.Adapters.Abstract),this.Maslosoft.Playlist.Adapters||(this.Maslosoft.Playlist.Adapters={}),this.Maslosoft.Playlist.Adapters.Vimeo=function(superClass){function Vimeo(){return Vimeo.__super__.constructor.apply(this,arguments)}return extend(Vimeo,superClass),Vimeo.match=function(url){return url.match("vimeo")},Vimeo.once=function(){var script;if("undefined"==typeof Froogaloop)return script=document.createElement("script"),script.type="text/javascript",script.src="//f.vimeocdn.com/js/froogaloop2.min.js",jQuery("head").append(script)},Vimeo.prototype.setUrl=function(url1){return this.url=url1,this.id=this.url.replace(/.+\//,""),this.id=this.id.replace(/\?.+/,"")},Vimeo.prototype.getSrc=function(frame1){var frameId,params,src;return this.frame=frame1,frameId=this.frame.get(0).id,params=["api=1","player_id="+frameId],src="//player.vimeo.com/video/"+this.id+"?"+params.join("&")},Vimeo.prototype.setThumb=function(thumbCallback){return $.ajax({type:"GET",url:"//vimeo.com/api/v2/video/"+this.id+".json",jsonp:"callback",dataType:"jsonp",success:function(_this){return function(data){return _this.title||_this.setTitle(data[0].title),thumbCallback(data[0].thumbnail_large)}}(this)})},Vimeo.prototype.play=function(frame1){return this.frame=frame1,this.call("play"),this.playing=!0},Vimeo.prototype.stop=function(frame1){return this.frame=frame1,this.call("unload"),this.playing=!1},Vimeo.prototype.pause=function(frame1){return this.frame=frame1,this.call("pause"),this.playing=!1},Vimeo.prototype.onEnd=function(frame1,callback){var e,player;this.frame=frame1;try{player=Froogaloop(this.frame.get(0));try{player.addEvent("ready",function(_this){return function(){return player.addEvent("finish",callback)}}(this))}catch(_error){e=_error}try{return player.addEvent("finish",callback)}catch(_error){e=_error}}catch(_error){e=_error}},Vimeo.prototype.call=function(func,args){var toCall;return null==args&&(args=[]),toCall=function(_this){return function(){var data,frameId,iframe,result;return console.log("Call "+func),frameId=_this.frame.get(0).id,iframe=document.getElementById(frameId),data={method:func,value:args},result=iframe.contentWindow.postMessage(JSON.stringify(data),"*")}}(this),setTimeout(toCall,0),setTimeout(toCall,500)},Vimeo}(this.Maslosoft.Playlist.Adapters.Abstract),this.Maslosoft.Playlist.Adapters||(this.Maslosoft.Playlist.Adapters={}),this.Maslosoft.Playlist.Adapters.YouTube=function(superClass){function YouTube(){return this.onEnd=bind(this.onEnd,this),YouTube.__super__.constructor.apply(this,arguments)}return extend(YouTube,superClass),YouTube.match=function(url){return url.match("youtube")},YouTube.once=function(){var script;if("undefined"==typeof YT)return script=document.createElement("script"),script.type="text/javascript",script.src="https://www.youtube.com/player_api",jQuery("head").append(script)},YouTube.prototype.setUrl=function(url1){return this.url=url1,this.id=this.url.replace(/.+?v=/,"")},YouTube.prototype.setThumb=function(thumbCallback){return thumbCallback("//img.youtube.com/vi/"+this.id+"/0.jpg")},YouTube.prototype.getSrc=function(frame1){var params,src;return this.frame=frame1,params=["enablejsapi=1","rel=0","controls=2","modestbranding=1","origin="+document.location.protocol+"//"+document.location.hostname],src="//www.youtube.com/embed/"+this.id+"?"+params.join("&"),console.log(src),src},YouTube.prototype.play=function(frame1){return this.frame=frame1,this.call("playVideo"),this.playing=!0},YouTube.prototype.stop=function(frame1){return this.frame=frame1,this.call("stopVideo"),this.playing=!1},YouTube.prototype.pause=function(frame1){return this.frame=frame1,this.call("pauseVideo"),this.playing=!1},YouTube.prototype.onEnd=function(frame1,callback){var infoDelivery,name,onStateChange,player;return this.frame=frame1,player=new YT.Player(this.frame.get(0).id,{height:"390",width:"640",videoId:this.id,events:{onStateChange:jQuery.noop}}),onStateChange=function(e,data){return 0===data.info?callback():void 0},name="message.maslosoft.playlist.youtube.onStateChange",this.frame.on(name,onStateChange),infoDelivery=function(_this){return function(e,data){return data.info.currentTime===data.info.duration?_this.playing=!1:void 0}}(this),name="message.maslosoft.playlist.youtube.infoDelivery",this.frame.on(name,infoDelivery)},YouTube.prototype.call=function(func,args){var toCall;return null==args&&(args=[]),toCall=function(_this){return function(){var data,frameId,iframe,result;return frameId=_this.frame.get(0).id,iframe=document.getElementById(frameId),data={event:"command",func:func,args:args,id:frameId},result=iframe.contentWindow.postMessage(JSON.stringify(data),"*")}}(this),setTimeout(toCall,0),setTimeout(toCall,500)},YouTube}(this.Maslosoft.Playlist.Adapters.Abstract),this.Maslosoft.Playlist.Data||(this.Maslosoft.Playlist.Data={}),this.Maslosoft.Playlist.Data.Video=function(){function Video(options){var j,len,name,option;for(null==options&&(options=[]),name=j=0,len=options.length;len>j;name=++j)option=options[name],this[name]=option}return Video.prototype.title="",Video.prototype.url="",Video}(),this.Maslosoft.Playlist.Extractors||(this.Maslosoft.Playlist.Extractors={}),this.Maslosoft.Playlist.Extractors.Abstract=function(){function Abstract(){}return Abstract.prototype.getData=function(element){},Abstract}(),this.Maslosoft.Playlist.Extractors||(this.Maslosoft.Playlist.Extractors={}),this.Maslosoft.Playlist.Extractors.LinkExtractor=function(){function LinkExtractor(){}return LinkExtractor.prototype.getData=function(element){var d,data,j,len,link,ref;for(data=[],ref=element.find("a"),j=0,len=ref.length;len>j;j++)link=ref[j],d=new Maslosoft.Playlist.Data.Video,d.url=link.href,d.title=link.innerHTML,data.push(d);return data},LinkExtractor}(),this.Maslosoft.Playlist.Helpers||(this.Maslosoft.Playlist.Helpers={}),Maslosoft.Playlist.Helpers.Messenger=function(){function Messenger(frame1){this.frame=frame1,this.onMessage=bind(this.onMessage,this),this.element=this.frame.get(0),window.addEventListener?window.addEventListener("message",this.onMessage,!1):window.attachEvent("onmessage",this.onMessage)}return Messenger.prototype.frame=null,Messenger.prototype.element=null,Messenger.prototype.onMessage=function(event){var adapter,data,name,ns,parsedData,ref;if(this.frame.get(0).contentWindow===event.source){ref=Maslosoft.Playlist.Adapters;for(name in ref)if(adapter=ref[name],adapter.match(event.origin))return parsedData=adapter.parseEventData(event.data),data=[parsedData],ns="message.maslosoft.playlist."+name.toLowerCase(),ns=ns+"."+parsedData.event,console.log(ns),void this.frame.trigger(ns,data)}},Messenger}(),this.Maslosoft.Playlist.Helpers||(this.Maslosoft.Playlist.Helpers={}),this.Maslosoft.Playlist.Helpers.Scroller=function(){function Scroller(element,playlist1){var applyHeight;this.playlist=playlist1,applyHeight=function(_this){return function(){var container,frame,height,list;return frame=element.find(".maslosoft-video-embed-container iframe"),_this.holder=_this.playlist.parent(),_this.holder.height(frame.height()),list=element.find(".maslosoft-video-playlist"),height=list.height(),list.css({height:height+"px"}),container=element.find(".maslosoft-video-playlist-holder"),Maslosoft.Ps.initialize(container.get(0))}}(this),setTimeout(applyHeight,0)}return Scroller.holder=null,Scroller.playlist=null,Scroller}()}).call(this);
/* perfect-scrollbar v0.6.14 */
!function t(e,n,r){function o(i,s){if(!n[i]){if(!e[i]){var a="function"==typeof require&&require;if(!s&&a)return a(i,!0);if(l)return l(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[i]={exports:{}};e[i][0].call(u.exports,function(t){var n=e[i][1][t];return o(n?n:t)},u,u.exports,t,e,n,r)}return n[i].exports}for(var l="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(t,e,n){"use strict";var r=t("../main");"function"==typeof define&&define.amd?define(r):(Maslosoft.PerfectScrollbar=r,"undefined"==typeof Maslosoft.Ps&&(Maslosoft.Ps=r))},{"../main":7}],2:[function(t,e,n){"use strict";function r(t,e){var n=t.className.split(" ");n.indexOf(e)<0&&n.push(e),t.className=n.join(" ")}function o(t,e){var n=t.className.split(" "),r=n.indexOf(e);r>=0&&n.splice(r,1),t.className=n.join(" ")}n.add=function(t,e){t.classList?t.classList.add(e):r(t,e)},n.remove=function(t,e){t.classList?t.classList.remove(e):o(t,e)},n.list=function(t){return t.classList?Array.prototype.slice.apply(t.classList):t.className.split(" ")}},{}],3:[function(t,e,n){"use strict";function r(t,e){return window.getComputedStyle(t)[e]}function o(t,e,n){return"number"==typeof n&&(n=n.toString()+"px"),t.style[e]=n,t}function l(t,e){for(var n in e){var r=e[n];"number"==typeof r&&(r=r.toString()+"px"),t.style[n]=r}return t}var i={};i.e=function(t,e){var n=document.createElement(t);return n.className=e,n},i.appendTo=function(t,e){return e.appendChild(t),t},i.css=function(t,e,n){return"object"==typeof e?l(t,e):"undefined"==typeof n?r(t,e):o(t,e,n)},i.matches=function(t,e){return"undefined"!=typeof t.matches?t.matches(e):"undefined"!=typeof t.matchesSelector?t.matchesSelector(e):"undefined"!=typeof t.webkitMatchesSelector?t.webkitMatchesSelector(e):"undefined"!=typeof t.mozMatchesSelector?t.mozMatchesSelector(e):"undefined"!=typeof t.msMatchesSelector?t.msMatchesSelector(e):void 0},i.remove=function(t){"undefined"!=typeof t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t)},i.queryChildren=function(t,e){return Array.prototype.filter.call(t.childNodes,function(t){return i.matches(t,e)})},e.exports=i},{}],4:[function(t,e,n){"use strict";var r=function(t){this.element=t,this.events={}};r.prototype.bind=function(t,e){"undefined"==typeof this.events[t]&&(this.events[t]=[]),this.events[t].push(e),this.element.addEventListener(t,e,!1)},r.prototype.unbind=function(t,e){var n="undefined"!=typeof e;this.events[t]=this.events[t].filter(function(r){return!(!n||r===e)||(this.element.removeEventListener(t,r,!1),!1)},this)},r.prototype.unbindAll=function(){for(var t in this.events)this.unbind(t)};var o=function(){this.eventElements=[]};o.prototype.eventElement=function(t){var e=this.eventElements.filter(function(e){return e.element===t})[0];return"undefined"==typeof e&&(e=new r(t),this.eventElements.push(e)),e},o.prototype.bind=function(t,e,n){this.eventElement(t).bind(e,n)},o.prototype.unbind=function(t,e,n){this.eventElement(t).unbind(e,n)},o.prototype.unbindAll=function(){for(var t=0;t<this.eventElements.length;t++)this.eventElements[t].unbindAll()},o.prototype.once=function(t,e,n){var r=this.eventElement(t),o=function(t){r.unbind(e,o),n(t)};r.bind(e,o)},e.exports=o},{}],5:[function(t,e,n){"use strict";e.exports=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}()},{}],6:[function(t,e,n){"use strict";var r=t("./class"),o=t("./dom"),l=n.toInt=function(t){return parseInt(t,10)||0},i=n.clone=function(t){if(t){if(t.constructor===Array)return t.map(i);if("object"==typeof t){var e={};for(var n in t)e[n]=i(t[n]);return e}return t}return null};n.extend=function(t,e){var n=i(t);for(var r in e)n[r]=i(e[r]);return n},n.isEditable=function(t){return o.matches(t,"input,[contenteditable]")||o.matches(t,"select,[contenteditable]")||o.matches(t,"textarea,[contenteditable]")||o.matches(t,"button,[contenteditable]")},n.removePsClasses=function(t){for(var e=r.list(t),n=0;n<e.length;n++){var o=e[n];0===o.indexOf("ps-")&&r.remove(t,o)}},n.outerWidth=function(t){return l(o.css(t,"width"))+l(o.css(t,"paddingLeft"))+l(o.css(t,"paddingRight"))+l(o.css(t,"borderLeftWidth"))+l(o.css(t,"borderRightWidth"))},n.startScrolling=function(t,e){r.add(t,"ps-in-scrolling"),"undefined"!=typeof e?r.add(t,"ps-"+e):(r.add(t,"ps-x"),r.add(t,"ps-y"))},n.stopScrolling=function(t,e){r.remove(t,"ps-in-scrolling"),"undefined"!=typeof e?r.remove(t,"ps-"+e):(r.remove(t,"ps-x"),r.remove(t,"ps-y"))},n.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}},{"./class":2,"./dom":3}],7:[function(t,e,n){"use strict";var r=t("./plugin/destroy"),o=t("./plugin/initialize"),l=t("./plugin/update");e.exports={initialize:o,update:l,destroy:r}},{"./plugin/destroy":9,"./plugin/initialize":17,"./plugin/update":21}],8:[function(t,e,n){"use strict";e.exports={handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}},{}],9:[function(t,e,n){"use strict";var r=t("../lib/helper"),o=t("../lib/dom"),l=t("./instances");e.exports=function(t){var e=l.get(t);e&&(e.event.unbindAll(),o.remove(e.scrollbarX),o.remove(e.scrollbarY),o.remove(e.scrollbarXRail),o.remove(e.scrollbarYRail),r.removePsClasses(t),l.remove(t))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18}],10:[function(t,e,n){"use strict";function r(t,e){function n(t){return t.getBoundingClientRect()}var r=function(t){t.stopPropagation()};e.event.bind(e.scrollbarY,"click",r),e.event.bind(e.scrollbarYRail,"click",function(r){var o=r.pageY-window.pageYOffset-n(e.scrollbarYRail).top,s=o>e.scrollbarYTop?1:-1;i(t,"top",t.scrollTop+s*e.containerHeight),l(t),r.stopPropagation()}),e.event.bind(e.scrollbarX,"click",r),e.event.bind(e.scrollbarXRail,"click",function(r){var o=r.pageX-window.pageXOffset-n(e.scrollbarXRail).left,s=o>e.scrollbarXLeft?1:-1;i(t,"left",t.scrollLeft+s*e.containerWidth),l(t),r.stopPropagation()})}var o=t("../instances"),l=t("../update-geometry"),i=t("../update-scroll");e.exports=function(t){var e=o.get(t);r(t,e)}},{"../instances":18,"../update-geometry":19,"../update-scroll":20}],11:[function(t,e,n){"use strict";function r(t,e){function n(n){var o=r+n*e.railXRatio,i=Math.max(0,e.scrollbarXRail.getBoundingClientRect().left)+e.railXRatio*(e.railXWidth-e.scrollbarXWidth);o<0?e.scrollbarXLeft=0:o>i?e.scrollbarXLeft=i:e.scrollbarXLeft=o;var s=l.toInt(e.scrollbarXLeft*(e.contentWidth-e.containerWidth)/(e.containerWidth-e.railXRatio*e.scrollbarXWidth))-e.negativeScrollAdjustment;c(t,"left",s)}var r=null,o=null,s=function(e){n(e.pageX-o),a(t),e.stopPropagation(),e.preventDefault()},u=function(){l.stopScrolling(t,"x"),e.event.unbind(e.ownerDocument,"mousemove",s)};e.event.bind(e.scrollbarX,"mousedown",function(n){o=n.pageX,r=l.toInt(i.css(e.scrollbarX,"left"))*e.railXRatio,l.startScrolling(t,"x"),e.event.bind(e.ownerDocument,"mousemove",s),e.event.once(e.ownerDocument,"mouseup",u),n.stopPropagation(),n.preventDefault()})}function o(t,e){function n(n){var o=r+n*e.railYRatio,i=Math.max(0,e.scrollbarYRail.getBoundingClientRect().top)+e.railYRatio*(e.railYHeight-e.scrollbarYHeight);o<0?e.scrollbarYTop=0:o>i?e.scrollbarYTop=i:e.scrollbarYTop=o;var s=l.toInt(e.scrollbarYTop*(e.contentHeight-e.containerHeight)/(e.containerHeight-e.railYRatio*e.scrollbarYHeight));c(t,"top",s)}var r=null,o=null,s=function(e){n(e.pageY-o),a(t),e.stopPropagation(),e.preventDefault()},u=function(){l.stopScrolling(t,"y"),e.event.unbind(e.ownerDocument,"mousemove",s)};e.event.bind(e.scrollbarY,"mousedown",function(n){o=n.pageY,r=l.toInt(i.css(e.scrollbarY,"top"))*e.railYRatio,l.startScrolling(t,"y"),e.event.bind(e.ownerDocument,"mousemove",s),e.event.once(e.ownerDocument,"mouseup",u),n.stopPropagation(),n.preventDefault()})}var l=t("../../lib/helper"),i=t("../../lib/dom"),s=t("../instances"),a=t("../update-geometry"),c=t("../update-scroll");e.exports=function(t){var e=s.get(t);r(t,e),o(t,e)}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],12:[function(t,e,n){"use strict";function r(t,e){function n(n,r){var o=t.scrollTop;if(0===n){if(!e.scrollbarYActive)return!1;if(0===o&&r>0||o>=e.contentHeight-e.containerHeight&&r<0)return!e.settings.wheelPropagation}var l=t.scrollLeft;if(0===r){if(!e.scrollbarXActive)return!1;if(0===l&&n<0||l>=e.contentWidth-e.containerWidth&&n>0)return!e.settings.wheelPropagation}return!0}var r=!1;e.event.bind(t,"mouseenter",function(){r=!0}),e.event.bind(t,"mouseleave",function(){r=!1});var i=!1;e.event.bind(e.ownerDocument,"keydown",function(c){if(!(c.isDefaultPrevented&&c.isDefaultPrevented()||c.defaultPrevented)){var u=l.matches(e.scrollbarX,":focus")||l.matches(e.scrollbarY,":focus");if(r||u){var d=document.activeElement?document.activeElement:e.ownerDocument.activeElement;if(d){if("IFRAME"===d.tagName)d=d.contentDocument.activeElement;else for(;d.shadowRoot;)d=d.shadowRoot.activeElement;if(o.isEditable(d))return}var p=0,f=0;switch(c.which){case 37:p=c.metaKey?-e.contentWidth:c.altKey?-e.containerWidth:-30;break;case 38:f=c.metaKey?e.contentHeight:c.altKey?e.containerHeight:30;break;case 39:p=c.metaKey?e.contentWidth:c.altKey?e.containerWidth:30;break;case 40:f=c.metaKey?-e.contentHeight:c.altKey?-e.containerHeight:-30;break;case 33:f=90;break;case 32:f=c.shiftKey?90:-90;break;case 34:f=-90;break;case 35:f=c.ctrlKey?-e.contentHeight:-e.containerHeight;break;case 36:f=c.ctrlKey?t.scrollTop:e.containerHeight;break;default:return}a(t,"top",t.scrollTop-f),a(t,"left",t.scrollLeft+p),s(t),i=n(p,f),i&&c.preventDefault()}}})}var o=t("../../lib/helper"),l=t("../../lib/dom"),i=t("../instances"),s=t("../update-geometry"),a=t("../update-scroll");e.exports=function(t){var e=i.get(t);r(t,e)}},{"../../lib/dom":3,"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],13:[function(t,e,n){"use strict";function r(t,e){function n(n,r){var o=t.scrollTop;if(0===n){if(!e.scrollbarYActive)return!1;if(0===o&&r>0||o>=e.contentHeight-e.containerHeight&&r<0)return!e.settings.wheelPropagation}var l=t.scrollLeft;if(0===r){if(!e.scrollbarXActive)return!1;if(0===l&&n<0||l>=e.contentWidth-e.containerWidth&&n>0)return!e.settings.wheelPropagation}return!0}function r(t){var e=t.deltaX,n=-1*t.deltaY;return"undefined"!=typeof e&&"undefined"!=typeof n||(e=-1*t.wheelDeltaX/6,n=t.wheelDeltaY/6),t.deltaMode&&1===t.deltaMode&&(e*=10,n*=10),e!==e&&n!==n&&(e=0,n=t.wheelDelta),t.shiftKey?[-n,-e]:[e,n]}function o(e,n){var r=t.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(r){if(!window.getComputedStyle(r).overflow.match(/(scroll|auto)/))return!1;var o=r.scrollHeight-r.clientHeight;if(o>0&&!(0===r.scrollTop&&n>0||r.scrollTop===o&&n<0))return!0;var l=r.scrollLeft-r.clientWidth;if(l>0&&!(0===r.scrollLeft&&e<0||r.scrollLeft===l&&e>0))return!0}return!1}function s(s){var c=r(s),u=c[0],d=c[1];o(u,d)||(a=!1,e.settings.useBothWheelAxes?e.scrollbarYActive&&!e.scrollbarXActive?(d?i(t,"top",t.scrollTop-d*e.settings.wheelSpeed):i(t,"top",t.scrollTop+u*e.settings.wheelSpeed),a=!0):e.scrollbarXActive&&!e.scrollbarYActive&&(u?i(t,"left",t.scrollLeft+u*e.settings.wheelSpeed):i(t,"left",t.scrollLeft-d*e.settings.wheelSpeed),a=!0):(i(t,"top",t.scrollTop-d*e.settings.wheelSpeed),i(t,"left",t.scrollLeft+u*e.settings.wheelSpeed)),l(t),a=a||n(u,d),a&&(s.stopPropagation(),s.preventDefault()))}var a=!1;"undefined"!=typeof window.onwheel?e.event.bind(t,"wheel",s):"undefined"!=typeof window.onmousewheel&&e.event.bind(t,"mousewheel",s)}var o=t("../instances"),l=t("../update-geometry"),i=t("../update-scroll");e.exports=function(t){var e=o.get(t);r(t,e)}},{"../instances":18,"../update-geometry":19,"../update-scroll":20}],14:[function(t,e,n){"use strict";function r(t,e){e.event.bind(t,"scroll",function(){l(t)})}var o=t("../instances"),l=t("../update-geometry");e.exports=function(t){var e=o.get(t);r(t,e)}},{"../instances":18,"../update-geometry":19}],15:[function(t,e,n){"use strict";function r(t,e){function n(){var t=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===t.toString().length?null:t.getRangeAt(0).commonAncestorContainer}function r(){c||(c=setInterval(function(){return l.get(t)?(s(t,"top",t.scrollTop+u.top),s(t,"left",t.scrollLeft+u.left),void i(t)):void clearInterval(c)},50))}function a(){c&&(clearInterval(c),c=null),o.stopScrolling(t)}var c=null,u={top:0,left:0},d=!1;e.event.bind(e.ownerDocument,"selectionchange",function(){t.contains(n())?d=!0:(d=!1,a())}),e.event.bind(window,"mouseup",function(){d&&(d=!1,a())}),e.event.bind(window,"keyup",function(){d&&(d=!1,a())}),e.event.bind(window,"mousemove",function(e){if(d){var n={x:e.pageX,y:e.pageY},l={left:t.offsetLeft,right:t.offsetLeft+t.offsetWidth,top:t.offsetTop,bottom:t.offsetTop+t.offsetHeight};n.x<l.left+3?(u.left=-5,o.startScrolling(t,"x")):n.x>l.right-3?(u.left=5,o.startScrolling(t,"x")):u.left=0,n.y<l.top+3?(l.top+3-n.y<5?u.top=-5:u.top=-20,o.startScrolling(t,"y")):n.y>l.bottom-3?(n.y-l.bottom+3<5?u.top=5:u.top=20,o.startScrolling(t,"y")):u.top=0,0===u.top&&0===u.left?a():r()}})}var o=t("../../lib/helper"),l=t("../instances"),i=t("../update-geometry"),s=t("../update-scroll");e.exports=function(t){var e=l.get(t);r(t,e)}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],16:[function(t,e,n){"use strict";function r(t,e,n,r){function o(n,r){var o=t.scrollTop,l=t.scrollLeft,i=Math.abs(n),s=Math.abs(r);if(s>i){if(r<0&&o===e.contentHeight-e.containerHeight||r>0&&0===o)return!e.settings.swipePropagation}else if(i>s&&(n<0&&l===e.contentWidth-e.containerWidth||n>0&&0===l))return!e.settings.swipePropagation;return!0}function a(e,n){s(t,"top",t.scrollTop-n),s(t,"left",t.scrollLeft-e),i(t)}function c(){w=!0}function u(){w=!1}function d(t){return t.targetTouches?t.targetTouches[0]:t}function p(t){return!(!t.targetTouches||1!==t.targetTouches.length)||!(!t.pointerType||"mouse"===t.pointerType||t.pointerType===t.MSPOINTER_TYPE_MOUSE)}function f(t){if(p(t)){Y=!0;var e=d(t);g.pageX=e.pageX,g.pageY=e.pageY,v=(new Date).getTime(),null!==y&&clearInterval(y),t.stopPropagation()}}function h(t){if(!Y&&e.settings.swipePropagation&&f(t),!w&&Y&&p(t)){var n=d(t),r={pageX:n.pageX,pageY:n.pageY},l=r.pageX-g.pageX,i=r.pageY-g.pageY;a(l,i),g=r;var s=(new Date).getTime(),c=s-v;c>0&&(m.x=l/c,m.y=i/c,v=s),o(l,i)&&(t.stopPropagation(),t.preventDefault())}}function b(){!w&&Y&&(Y=!1,clearInterval(y),y=setInterval(function(){return l.get(t)&&(m.x||m.y)?Math.abs(m.x)<.01&&Math.abs(m.y)<.01?void clearInterval(y):(a(30*m.x,30*m.y),m.x*=.8,void(m.y*=.8)):void clearInterval(y)},10))}var g={},v=0,m={},y=null,w=!1,Y=!1;n&&(e.event.bind(window,"touchstart",c),e.event.bind(window,"touchend",u),e.event.bind(t,"touchstart",f),e.event.bind(t,"touchmove",h),e.event.bind(t,"touchend",b)),r&&(window.PointerEvent?(e.event.bind(window,"pointerdown",c),e.event.bind(window,"pointerup",u),e.event.bind(t,"pointerdown",f),e.event.bind(t,"pointermove",h),e.event.bind(t,"pointerup",b)):window.MSPointerEvent&&(e.event.bind(window,"MSPointerDown",c),e.event.bind(window,"MSPointerUp",u),e.event.bind(t,"MSPointerDown",f),e.event.bind(t,"MSPointerMove",h),e.event.bind(t,"MSPointerUp",b)))}var o=t("../../lib/helper"),l=t("../instances"),i=t("../update-geometry"),s=t("../update-scroll");e.exports=function(t){if(o.env.supportsTouch||o.env.supportsIePointer){var e=l.get(t);r(t,e,o.env.supportsTouch,o.env.supportsIePointer)}}},{"../../lib/helper":6,"../instances":18,"../update-geometry":19,"../update-scroll":20}],17:[function(t,e,n){"use strict";var r=t("../lib/helper"),o=t("../lib/class"),l=t("./instances"),i=t("./update-geometry"),s={"click-rail":t("./handler/click-rail"),"drag-scrollbar":t("./handler/drag-scrollbar"),keyboard:t("./handler/keyboard"),wheel:t("./handler/mouse-wheel"),touch:t("./handler/touch"),selection:t("./handler/selection")},a=t("./handler/native-scroll");e.exports=function(t,e){e="object"==typeof e?e:{},o.add(t,"ps-container");var n=l.add(t);n.settings=r.extend(n.settings,e),o.add(t,"ps-theme-"+n.settings.theme),n.settings.handlers.forEach(function(e){s[e](t)}),a(t),i(t)}},{"../lib/class":2,"../lib/helper":6,"./handler/click-rail":10,"./handler/drag-scrollbar":11,"./handler/keyboard":12,"./handler/mouse-wheel":13,"./handler/native-scroll":14,"./handler/selection":15,"./handler/touch":16,"./instances":18,"./update-geometry":19}],18:[function(t,e,n){"use strict";function r(t){function e(){a.add(t,"ps-focus")}function n(){a.remove(t,"ps-focus")}var r=this;r.settings=s.clone(c),r.containerWidth=null,r.containerHeight=null,r.contentWidth=null,r.contentHeight=null,r.isRtl="rtl"===u.css(t,"direction"),r.isNegativeScroll=function(){var e=t.scrollLeft,n=null;return t.scrollLeft=-1,n=t.scrollLeft<0,t.scrollLeft=e,n}(),r.negativeScrollAdjustment=r.isNegativeScroll?t.scrollWidth-t.clientWidth:0,r.event=new d,r.ownerDocument=t.ownerDocument||document,r.scrollbarXRail=u.appendTo(u.e("div","ps-scrollbar-x-rail"),t),r.scrollbarX=u.appendTo(u.e("div","ps-scrollbar-x"),r.scrollbarXRail),r.scrollbarX.setAttribute("tabindex",0),r.event.bind(r.scrollbarX,"focus",e),r.event.bind(r.scrollbarX,"blur",n),r.scrollbarXActive=null,r.scrollbarXWidth=null,r.scrollbarXLeft=null,r.scrollbarXBottom=s.toInt(u.css(r.scrollbarXRail,"bottom")),r.isScrollbarXUsingBottom=r.scrollbarXBottom===r.scrollbarXBottom,r.scrollbarXTop=r.isScrollbarXUsingBottom?null:s.toInt(u.css(r.scrollbarXRail,"top")),r.railBorderXWidth=s.toInt(u.css(r.scrollbarXRail,"borderLeftWidth"))+s.toInt(u.css(r.scrollbarXRail,"borderRightWidth")),u.css(r.scrollbarXRail,"display","block"),r.railXMarginWidth=s.toInt(u.css(r.scrollbarXRail,"marginLeft"))+s.toInt(u.css(r.scrollbarXRail,"marginRight")),u.css(r.scrollbarXRail,"display",""),r.railXWidth=null,r.railXRatio=null,r.scrollbarYRail=u.appendTo(u.e("div","ps-scrollbar-y-rail"),t),r.scrollbarY=u.appendTo(u.e("div","ps-scrollbar-y"),r.scrollbarYRail),r.scrollbarY.setAttribute("tabindex",0),r.event.bind(r.scrollbarY,"focus",e),r.event.bind(r.scrollbarY,"blur",n),r.scrollbarYActive=null,r.scrollbarYHeight=null,r.scrollbarYTop=null,r.scrollbarYRight=s.toInt(u.css(r.scrollbarYRail,"right")),r.isScrollbarYUsingRight=r.scrollbarYRight===r.scrollbarYRight,r.scrollbarYLeft=r.isScrollbarYUsingRight?null:s.toInt(u.css(r.scrollbarYRail,"left")),r.scrollbarYOuterWidth=r.isRtl?s.outerWidth(r.scrollbarY):null,r.railBorderYWidth=s.toInt(u.css(r.scrollbarYRail,"borderTopWidth"))+s.toInt(u.css(r.scrollbarYRail,"borderBottomWidth")),u.css(r.scrollbarYRail,"display","block"),r.railYMarginHeight=s.toInt(u.css(r.scrollbarYRail,"marginTop"))+s.toInt(u.css(r.scrollbarYRail,"marginBottom")),u.css(r.scrollbarYRail,"display",""),r.railYHeight=null,r.railYRatio=null}function o(t){return t.getAttribute("data-ps-id")}function l(t,e){t.setAttribute("data-ps-id",e)}function i(t){t.removeAttribute("data-ps-id")}var s=t("../lib/helper"),a=t("../lib/class"),c=t("./default-setting"),u=t("../lib/dom"),d=t("../lib/event-manager"),p=t("../lib/guid"),f={};n.add=function(t){var e=p();return l(t,e),f[e]=new r(t),f[e]},n.remove=function(t){delete f[o(t)],i(t)},n.get=function(t){return f[o(t)]}},{"../lib/class":2,"../lib/dom":3,"../lib/event-manager":4,"../lib/guid":5,"../lib/helper":6,"./default-setting":8}],19:[function(t,e,n){"use strict";function r(t,e){return t.settings.minScrollbarLength&&(e=Math.max(e,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(e=Math.min(e,t.settings.maxScrollbarLength)),e}function o(t,e){var n={width:e.railXWidth};e.isRtl?n.left=e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth-e.contentWidth:n.left=t.scrollLeft,e.isScrollbarXUsingBottom?n.bottom=e.scrollbarXBottom-t.scrollTop:n.top=e.scrollbarXTop+t.scrollTop,s.css(e.scrollbarXRail,n);var r={top:t.scrollTop,height:e.railYHeight};e.isScrollbarYUsingRight?e.isRtl?r.right=e.contentWidth-(e.negativeScrollAdjustment+t.scrollLeft)-e.scrollbarYRight-e.scrollbarYOuterWidth:r.right=e.scrollbarYRight-t.scrollLeft:e.isRtl?r.left=e.negativeScrollAdjustment+t.scrollLeft+2*e.containerWidth-e.contentWidth-e.scrollbarYLeft-e.scrollbarYOuterWidth:r.left=e.scrollbarYLeft+t.scrollLeft,s.css(e.scrollbarYRail,r),s.css(e.scrollbarX,{left:e.scrollbarXLeft,width:e.scrollbarXWidth-e.railBorderXWidth}),s.css(e.scrollbarY,{top:e.scrollbarYTop,height:e.scrollbarYHeight-e.railBorderYWidth})}var l=t("../lib/helper"),i=t("../lib/class"),s=t("../lib/dom"),a=t("./instances"),c=t("./update-scroll");e.exports=function(t){var e=a.get(t);e.containerWidth=t.clientWidth,e.containerHeight=t.clientHeight,e.contentWidth=t.scrollWidth,e.contentHeight=t.scrollHeight;var n;t.contains(e.scrollbarXRail)||(n=s.queryChildren(t,".ps-scrollbar-x-rail"),n.length>0&&n.forEach(function(t){s.remove(t)}),s.appendTo(e.scrollbarXRail,t)),t.contains(e.scrollbarYRail)||(n=s.queryChildren(t,".ps-scrollbar-y-rail"),n.length>0&&n.forEach(function(t){s.remove(t)}),s.appendTo(e.scrollbarYRail,t)),!e.settings.suppressScrollX&&e.containerWidth+e.settings.scrollXMarginOffset<e.contentWidth?(e.scrollbarXActive=!0,e.railXWidth=e.containerWidth-e.railXMarginWidth,e.railXRatio=e.containerWidth/e.railXWidth,e.scrollbarXWidth=r(e,l.toInt(e.railXWidth*e.containerWidth/e.contentWidth)),e.scrollbarXLeft=l.toInt((e.negativeScrollAdjustment+t.scrollLeft)*(e.railXWidth-e.scrollbarXWidth)/(e.contentWidth-e.containerWidth))):e.scrollbarXActive=!1,!e.settings.suppressScrollY&&e.containerHeight+e.settings.scrollYMarginOffset<e.contentHeight?(e.scrollbarYActive=!0,e.railYHeight=e.containerHeight-e.railYMarginHeight,e.railYRatio=e.containerHeight/e.railYHeight,e.scrollbarYHeight=r(e,l.toInt(e.railYHeight*e.containerHeight/e.contentHeight)),e.scrollbarYTop=l.toInt(t.scrollTop*(e.railYHeight-e.scrollbarYHeight)/(e.contentHeight-e.containerHeight))):e.scrollbarYActive=!1,e.scrollbarXLeft>=e.railXWidth-e.scrollbarXWidth&&(e.scrollbarXLeft=e.railXWidth-e.scrollbarXWidth),e.scrollbarYTop>=e.railYHeight-e.scrollbarYHeight&&(e.scrollbarYTop=e.railYHeight-e.scrollbarYHeight),o(t,e),e.scrollbarXActive?i.add(t,"ps-active-x"):(i.remove(t,"ps-active-x"),e.scrollbarXWidth=0,e.scrollbarXLeft=0,c(t,"left",0)),e.scrollbarYActive?i.add(t,"ps-active-y"):(i.remove(t,"ps-active-y"),e.scrollbarYHeight=0,e.scrollbarYTop=0,c(t,"top",0))}},{"../lib/class":2,"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-scroll":20}],20:[function(t,e,n){"use strict";var r,o,l=t("./instances"),i=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!0),e};e.exports=function(t,e,n){if("undefined"==typeof t)throw"You must provide an element to the update-scroll function";if("undefined"==typeof e)throw"You must provide an axis to the update-scroll function";if("undefined"==typeof n)throw"You must provide a value to the update-scroll function";"top"===e&&n<=0&&(t.scrollTop=n=0,t.dispatchEvent(i("ps-y-reach-start"))),"left"===e&&n<=0&&(t.scrollLeft=n=0,t.dispatchEvent(i("ps-x-reach-start")));var s=l.get(t);"top"===e&&n>=s.contentHeight-s.containerHeight&&(n=s.contentHeight-s.containerHeight,n-t.scrollTop<=1?n=t.scrollTop:t.scrollTop=n,t.dispatchEvent(i("ps-y-reach-end"))),"left"===e&&n>=s.contentWidth-s.containerWidth&&(n=s.contentWidth-s.containerWidth,n-t.scrollLeft<=1?n=t.scrollLeft:t.scrollLeft=n,t.dispatchEvent(i("ps-x-reach-end"))),r||(r=t.scrollTop),o||(o=t.scrollLeft),"top"===e&&n<r&&t.dispatchEvent(i("ps-scroll-up")),"top"===e&&n>r&&t.dispatchEvent(i("ps-scroll-down")),"left"===e&&n<o&&t.dispatchEvent(i("ps-scroll-left")),"left"===e&&n>o&&t.dispatchEvent(i("ps-scroll-right")),"top"===e&&(t.scrollTop=r=n,t.dispatchEvent(i("ps-scroll-y"))),"left"===e&&(t.scrollLeft=o=n,t.dispatchEvent(i("ps-scroll-x")))}},{"./instances":18}],21:[function(t,e,n){"use strict";var r=t("../lib/helper"),o=t("../lib/dom"),l=t("./instances"),i=t("./update-geometry"),s=t("./update-scroll");e.exports=function(t){var e=l.get(t);e&&(e.negativeScrollAdjustment=e.isNegativeScroll?t.scrollWidth-t.clientWidth:0,o.css(e.scrollbarXRail,"display","block"),o.css(e.scrollbarYRail,"display","block"),e.railXMarginWidth=r.toInt(o.css(e.scrollbarXRail,"marginLeft"))+r.toInt(o.css(e.scrollbarXRail,"marginRight")),e.railYMarginHeight=r.toInt(o.css(e.scrollbarYRail,"marginTop"))+r.toInt(o.css(e.scrollbarYRail,"marginBottom")),o.css(e.scrollbarXRail,"display","none"),o.css(e.scrollbarYRail,"display","none"),i(t),s(t,"top",t.scrollTop),s(t,"left",t.scrollLeft),o.css(e.scrollbarXRail,"display",""),o.css(e.scrollbarYRail,"display",""))}},{"../lib/dom":3,"../lib/helper":6,"./instances":18,"./update-geometry":19,"./update-scroll":20}]},{},[1]);;
!function(){"use strict";function f(t,e){if(!(t instanceof e))throw new Error("Bound instance method accessed before binding")}var r,l,R,L,Q,t,a,I,G,n,e,o,d,z,h,u,K,c,p,i,U,g,_,m,v,Y,J,s,y,b,M,q,Z,B,X,tt,w,et,k,V,C,T,D,E,F,j,st,it,rt,nt,ot,O,A,S,H,N,at,lt,dt,ht,ut,ct,pt,P,ft,gt,mt,vt,yt,bt,Mt,Bt,W=function(t){if(console)return console.log.apply(console,arguments)},wt=function(t,e=0){if(console)return console.warn.apply(console,arguments)},xt=function(t,e=0){if(console)return console.error.apply(console,arguments)};Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),u=function(t){return!!t&&"object"==typeof t&&t.constructor===Object},Object.keys||(Object.keys=(yt=Object.prototype.hasOwnProperty,bt=!{toString:null}.propertyIsEnumerable("toString"),Bt=(Mt=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(t){var e,s,i;if("object"!=typeof t&&("function"!=typeof t||null===t))throw new TypeError("Object.keys called on non-object");for(s in i=[],e=s=void 0,t)yt.call(t,s)&&i.push(s);if(bt)for(e=0;e<Bt;)yt.call(t,Mt[e])&&i.push(Mt[e]),e++;return i})),gt=function(t,e,s=window){Array.prototype.slice.call(arguments,2);for(var i,r,n=t.split("."),o=s,a=i=0,l=n.length;i<l;a=++i)r=n[a],console.log(a),a===n.length-1&&(console.log(r),o[r]=e),o=o[r];return o},z=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},d=function(t){return String(t).replace(/[&<>"'`=\/]/g,function(t){return e[t]})},o=function(t,e,s=[]){var i,r=function(t){return-1!==s.indexOf(t)};if(t!==e){if(!(t instanceof Object&&e instanceof Object))return!1;if(t.constructor!==e.constructor)return!1;for(i in t)if(!r(i)&&t.hasOwnProperty(i)){if(!e.hasOwnProperty(i))return!1;if(t[i]!==e[i]){if("object"!=typeof t[i])return!1;if(!o(t[i],e[i],s))return!1}}for(i in e)if(!r(i)&&e.hasOwnProperty(i)&&!t.hasOwnProperty(i))return!1}return!0},mt=function(t){var e,s=0,i=0;for(i=0;i<t.length;)s=t.charCodeAt(i)+(s<<5)-s,i++;for(e="#",i=0;i<3;)e+=("00"+(s>>8*i&255).toString(16)).substr(-2),i++;return e},i={},p=function(t,e){var s;if(!i[e])return(s=new Image).src=e,s.onload=function(){return s=null,i[e]=!0,t.attr("src",e)};t.attr("src",e)},n=function(t,e){var s;if(!t.hasAttribute(e))return(s=document.createAttribute(e)).value="",t.setAttributeNode(s),t.setAttribute(e,""),jQuery(t).attr(e,"")},c=function(t,e=2,s=3,i=" ",r=","){s="\\d(?=(\\d{"+(s||3)+"})+"+(0<e?"\\D":"$")+")",t=t.toFixed(Math.max(0,~~e));return(r?t.replace(".",r):t).replace(new RegExp(s,"g"),"$&"+(i||","))},K=function(t){return t.substring(0,1).toLocaleLowerCase()+t.substring(1)},vt=function(t){return t.substring(0,1).toLocaleUpperCase()+t.substring(1)},this.Maslosoft||(this.Maslosoft={}),this.Maslosoft.Ko||(this.Maslosoft.Ko={}),this.Maslosoft.Ko.Balin||(this.Maslosoft.Ko.Balin={}),this.Maslosoft.Binder||(this.Maslosoft.Binder={}),this.Maslosoft.Binder.Helpers||(this.Maslosoft.Binder.Helpers={}),this.Maslosoft.Binder.Widgets||(this.Maslosoft.Binder.Widgets={}),this.Maslosoft.Ko.debounce=function(r,n,o){var a=void 0;return function(){var t=this,e=arguments,s=function(){a=null,o||r.apply(t,e)},i=o&&!a;clearTimeout(a),a=setTimeout(s,n||200),i&&r.apply(t,e)}},this.Maslosoft.Binder.register=function(t,e){var s=!1;if(t.match(/[A-Z]/)&&(s=t.toLowerCase()),e.writable&&ko.expressionRewriting&&ko.expressionRewriting.twoWayBindings&&(ko.expressionRewriting.twoWayBindings[t]=!0,s)&&(ko.expressionRewriting.twoWayBindings[s]=!0),ko.bindingHandlers[t]=e,s)return ko.bindingHandlers[s]=e},this.Maslosoft.Binder.registerDefaults=function(t=null){var e,s,i,r,n={acl:Maslosoft.Binder.Acl,active:Maslosoft.Binder.Active,action:Maslosoft.Binder.WidgetAction,activity:Maslosoft.Binder.WidgetActivity,asset:Maslosoft.Binder.Asset,cssClasses:Maslosoft.Binder.CssClasses,cssColumnSizes:Maslosoft.Binder.CssColumnSizes,cssColumns:Maslosoft.Binder.CssColumns,data:Maslosoft.Binder.Data,dateFormatter:Maslosoft.Binder.DateFormatter,datePicker:Maslosoft.Binder.DatePicker,datePickerPickaDate:Maslosoft.Binder.PickaDate,dateTimeFormatter:Maslosoft.Binder.DateTimeFormatter,decimalFormatter:Maslosoft.Binder.DecimalFormatter,disabled:Maslosoft.Binder.Disabled,enumCssClassFormatter:Maslosoft.Binder.EnumCssClassFormatter,enumFormatter:Maslosoft.Binder.EnumFormatter,eval:Maslosoft.Binder.Eval,fancytree:Maslosoft.Binder.Fancytree,fileSizeFormatter:Maslosoft.Binder.FileSizeFormatter,googlemap:Maslosoft.Binder.GoogleMap,hidden:Maslosoft.Binder.Hidden,href:Maslosoft.Binder.Href,html:Maslosoft.Binder.Html,htmlTree:Maslosoft.Binder.HtmlTree,htmlValue:Maslosoft.Binder.HtmlValue,icon:Maslosoft.Binder.Icon,id:Maslosoft.Binder.Id,log:Maslosoft.Binder.Log,model:Maslosoft.Binder.DataModel,placeholder:Maslosoft.Binder.Placeholder,ref:Maslosoft.Binder.Widget,src:Maslosoft.Binder.Src,tags:Maslosoft.Binder.Tags,text:Maslosoft.Binder.Text,textToBg:Maslosoft.Binder.TextToBg,textValue:Maslosoft.Binder.TextValue,textValueHlJs:Maslosoft.Binder.TextValueHLJS,timeAgoFormatter:Maslosoft.Binder.TimeAgoFormatter,timeFormatter:Maslosoft.Binder.TimeFormatter,timePicker:Maslosoft.Binder.TimePicker,tooltip:Maslosoft.Binder.Tooltip,treegrid:Maslosoft.Binder.TreeGrid,treegridnode:Maslosoft.Binder.TreeGridNode,selected:Maslosoft.Binder.Selected,select2:Maslosoft.Binder.Select2,validator:Maslosoft.Binder.Validator,videoPlaylist:Maslosoft.Binder.VideoPlaylist,videoThumb:Maslosoft.Binder.VideoThumb,widget:Maslosoft.Binder.Widget};if(null!==t){for(e in s=[],t)r=t[e],s.push(Maslosoft.Binder.register(r,new n[r]));return s}for(e in i=[],n)r=n[e],i.push(Maslosoft.Binder.register(e,new r));return i},this.Maslosoft.Binder.registerEvents=function(t=null){var e,s,i,r,n={dblclick:"dblclick",mousedown:"mousedown",mouseup:"mouseup",mouseover:"mouseover",mouseout:"mouseout"};if(null!==t){for(e in s=[],t)r=t[e],s.push(Maslosoft.Binder.makeEventHandlerShortcut(r));return s}for(e in i=[],n)r=n[e],i.push(Maslosoft.Binder.makeEventHandlerShortcut(r));return i},this.Maslosoft.Binder.makeEventHandlerShortcut=function(n){ko.bindingHandlers[n]={init:function(t,e,s,i,r){return ko.bindingHandlers.event.init.call(this,t,function(){var t={};return t[n]=e(),t},s,i,r)}}},this.Maslosoft.Binder.Base=function(){class t{constructor(t={}){var e,s;for(e in this.getValue=this.getValue.bind(this),this.options={},t)s=t[e],this.options[e]=s}getValue(t,e=""){t="function"==typeof t?ko.unwrap(t()):ko.unwrap(t);return void 0===(t=this.options.valueField?this.options.ec5?t[this.options.valueField]:t[this.options.valueField]():t)?e:t}}return t.prototype.writable=!0,t.prototype.options={},t}.call(this),this.Maslosoft.Binder.Options=function(){class t{constructor(t={}){var e,s;for(e in t)s=t[e],this[e]=s;null===this.ec5&&(this.ec5=!!ko.track),null===this.afterUpdate&&(this.afterUpdate=function(t,e){})}}return t.prototype.valueField=null,t.prototype.ec5=null,t.prototype.afterUpdate=null,t}.call(this),this.Maslosoft.Binder.CssOptions=function(){class t extends this.Maslosoft.Binder.Options{}return t.prototype.className="active",t}.call(this),this.Maslosoft.Binder.DateOptions=function(){class t extends this.Maslosoft.Binder.Options{}return t.prototype.lang="en",t.prototype.sourceFormat="unix",t.prototype.displayFormat="YYYY-MM-DD",t}.call(this),this.Maslosoft.Binder.DateTimeOptions=function(){class t extends this.Maslosoft.Binder.Options{}return t.prototype.lang="en",t.prototype.sourceFormat="unix",t.prototype.displayFormat="YYYY-MM-DD hh:mm",t}.call(this),this.Maslosoft.Binder.TimeAgoOptions=function(){class t extends this.Maslosoft.Binder.Options{}return t.prototype.lang="en",t.prototype.sourceFormat="unix",t.prototype.displayFormat="hh:mm",t}.call(this),this.Maslosoft.Binder.TimeOptions=function(){class t extends this.Maslosoft.Binder.Options{}return t.prototype.lang="en",t.prototype.sourceFormat="unix",t.prototype.displayFormat="hh:mm",t}.call(this),this.Maslosoft.Binder.ValidatorOptions=function(){class t extends this.Maslosoft.Binder.Options{}return t.prototype.classField="_class",t.prototype.parentSelector=".form-group",t.prototype.inputError="error",t.prototype.parentError="has-error",t.prototype.inputWarning="warning",t.prototype.parentWarning="has-warning",t.prototype.inputSuccess="success",t.prototype.parentSuccess="has-success",t.prototype.errorMessages=".error-messages",t.prototype.warningMessages=".warning-messages",t}.call(this),this.Maslosoft.Binder.BaseValidator=function(){class t{constructor(t){var e,s;for(e in this.reset(),t)s=t[e],this[e]=null,this[e]=s}reset(){return this.messages=new Array,this.rawMessages=new Object,this.warningMessages=new Array,this.rawWarningMessages=new Object}isValid(){throw new Error("Validator must implement `isValid` method")}getErrors(){return this.messages}getWarnings(){return this.warningMessages}addError(t,e){var s,i,r,n=t;for(s in t=t.replace("{attribute}",this.label),this)r=this[s],t=t.replace(`{${s}}`,r);for(s in e)r=e[s],t=t.replace(`{${s}}`,r);for(s in i=this.model)r=i[s],t=t.replace(`{${s}}`,r);if(!this.rawMessages[n])return this.messages.push(t),this.rawMessages[n]=!0}addWarning(t,e){var s,i,r,n=t;for(s in t=t.replace("{attribute}",this.label),this)r=this[s],t=t.replace(`{${s}}`,r);for(s in e)r=e[s],t=t.replace(`{${s}}`,r);for(s in i=this.model)r=i[s],t=t.replace(`{${s}}`,r);if(!this.rawWarningMessages[n])return this.warningMessages.push(t),this.rawWarningMessages[n]=!0}}return t.prototype.label="",t.prototype.model=null,t.prototype.messages=[],t.prototype.rawMessages=[],t.prototype.warningMessages=[],t.prototype.rawWarningMessages=[],t}.call(this),U=this.Maslosoft.Binder.CssClass=function(){class t extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.update=this.update.bind(this)}update(t,e){f(this,U),this.getValue(e)?ko.utils.toggleDomNodeCssClass(t,this.options.className,!0):ko.utils.toggleDomNodeCssClass(t,this.options.className,!1)}}return t.prototype.writable=!1,t}.call(this),q=this.Maslosoft.Binder.CssColumnsBase=function(){class t extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.applyColumns=this.applyColumns.bind(this)}applyColumns(t,e,s){var i,r,n,o;for(o in f(this,q),r=[],s)n=(i=s[o]).replace("{num}","\\d"),i=i.replace("{num}",""),n=new RegExp(`(?:^|\\s)${n}+(?!\\S)`,"g"),t.className=t.className.replace(n,""),r.push(i+e[o]);jQuery(t).addClass(r.join(" "))}}return t.prototype.writable=!1,t}.call(this),D=this.Maslosoft.Binder.MomentFormatter=class extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.init=this.init.bind(this),this.update=this.update.bind(this)}init(t,e,s,i){f(this,D),moment.locale(this.options.lang)}update(t,e,s,i){f(this,D),(e=this.getValue(e))?t.innerHTML=moment[this.options.sourceFormat](e).format(this.options.displayFormat):t.innerHTML=""}},this.Maslosoft.Binder.Picker=class extends this.Maslosoft.Binder.Base{},S=this.Maslosoft.Binder.Video=function(){var r,t;class e extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.isVideoUrl=this.isVideoUrl.bind(this),this.setThumb=this.setThumb.bind(this)}isVideoUrl(t){var e,s,i;for(f(this,S),s=0,i=r.length;s<i;s++)if((e=r[s]).match(t))return e;return!1}setThumb(t,e){var s,i;if(f(this,S),s=this.isVideoUrl(t))return i=function(t){return"img"===e.tagName.toLowerCase()?e.src=t:jQuery(e).css("background-image",`url('${t}')`)},console.log(t),(s=new s).setUrl(t),s.setThumb(i)}}return r=null,jQuery(document).ready(function(){return t=new Maslosoft.Playlist.Options,r=t.adapters}),e}.call(this),ut=this.Maslosoft.Binder.WidgetUrl=class extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.createUrl=this.createUrl.bind(this),this.setRel=this.setRel.bind(this)}getData(t,e,s,i){var e=this.getValue(e),r={};return r.id=s.get("widgetId")||e.id,s.get("widget")&&(r.id=s.get("widget").id),r[i]=s.get(i)||e[i],s=s.get("params"),r.params=s,r.params=this.getValue(r.params),"string"==typeof e&&(r[i]=e),r}createUrl(t,e,s,i){var r,n,o;if(f(this,ut),r=[],"string"==typeof s||"number"==typeof s)""===s&&"number"!=typeof s||r.push(""+s);else for(n in s)o=s[n],n=encodeURIComponent(""+n),o=encodeURIComponent(""+o),r.push(n+":"+o);return i=""+i+t+"."+e,0===r.length?i:i+"="+(r=r.join(",",r))}setRel(t){var e,s,i,r,n,o,a;if(f(this,ut),s=e=!1,a=[],n=t.getAttribute("rel"))for(i=0,r=(a=n.split(" ")).length;i<r;i++)"plain"===(o=a[i])&&(s=!0),"virtual"===o&&(e=!0);return e||s||a.push("virtual"),t.setAttribute("rel",a.join(" "))}},ct=this.Maslosoft.Binder.Acl=function(){class t extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.init=this.init.bind(this),this.update=this.update.bind(this)}init(){if(f(this,ct),!Maslosoft.Binder.Acl.allow)throw new Error("Acl binding handler requires Maslosoft.Binder.Acl.allow to be function checking permissions");if("function"!=typeof Maslosoft.Binder.Acl.allow)throw new Error("Acl binding handler requires Maslosoft.Binder.Acl.allow to be function checking permissions")}update(t,e){var s;return f(this,ct),e=this.getValue(e),s=Maslosoft.Binder.Acl.allow(e),ko.bindingHandlers.visible.update(t,function(){return s})}}return t}.call(this),this.Maslosoft.Binder.Active=class extends this.Maslosoft.Binder.CssClass{constructor(t){super(new Maslosoft.Binder.CssOptions({className:"active"}))}},pt=this.Maslosoft.Binder.Asset=class extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.update=this.update.bind(this)}update(t,e,s){var i,r,n,o,a;f(this,pt),t=$(t),a=s.get("w"),i=s.get("h"),r=s.get("p"),e=this.getValue(e),s=this.getValue(s),e.updateDate&&("number"==typeof(o=e.updateDate)&&(n=o),"number"==typeof o.sec)&&(n=o.sec),o=e.url,(e=[]).push(o),a&&e.push("w/"+a),i&&e.push("h/"+i),!1===r&&e.push("p/0"),n&&e.push(n),e=e.join("/"),t.attr("src")!==e&&(s.preloader&&t.attr("src",s.preloader),p(t,e))}},P=this.Maslosoft.Binder.CssClasses=class extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.getClassList=this.getClassList.bind(this),this.init=this.init.bind(this),this.update=this.update.bind(this)}getClassList(t){return f(this,P),null==(t=this.getValue(t))?"":("string"==typeof t?t:t.join(" ")).replace(/^\s*/,"").replace(/\s*$/,"")}init(t,e){return f(this,P),e=this.getClassList(e),t.setAttribute("data-css-classes",e)}update(t,e,s,i){var r;return f(this,P),r=t.getAttribute("data-css-classes"),ko.utils.toggleDomNodeCssClass(t,r,!1),(r=this.getClassList(e))&&ko.utils.toggleDomNodeCssClass(t,r,!0),t.setAttribute("data-css-classes",r)}},ft=this.Maslosoft.Binder.CssColumns=function(){class d extends this.Maslosoft.Binder.CssColumnsBase{constructor(){super(...arguments),this.init=this.init.bind(this),this.update=this.update.bind(this)}init(t,e){f(this,ft)}update(t,e,s,i){var r,n,o,a,l;for(o in f(this,ft),r=this.getValue(e),a={},n=d.columns)n[o],l=parseInt(r[o]),l=parseInt(12/l),a[o]=l;return this.applyColumns(t,a,d.columns)}}return d.columns={xs:"col-xs-{num}",sm:"col-sm-{num}",md:"col-md-{num}",lg:"col-lg-{num}"},d}.call(this),g=this.Maslosoft.Binder.CssColumnSizes=function(){class r extends this.Maslosoft.Binder.CssColumnsBase{constructor(){super(...arguments),this.init=this.init.bind(this),this.update=this.update.bind(this)}init(t,e){f(this,g)}update(t,e,s,i){return f(this,g),e=this.getValue(e),this.applyColumns(t,e,r.columns)}}return r.columns={xs:"col-xs-{num}",sm:"col-sm-{num}",md:"col-md-{num}",lg:"col-lg-{num}"},r}.call(this),this.Maslosoft.Binder.Data=class extends this.Maslosoft.Binder.Base{getNamespacedHandler(i){return{update:(t,e)=>{var s,e=this.getValue(e);return"string"!=(s=typeof e)&&"number"!=s&&(e=JSON.stringify(e)),t.setAttribute("data-"+i,e)}}}},_=this.Maslosoft.Binder.DataModel=class extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.update=this.update.bind(this)}update(t,e,s){var i,r,n,o,a,l,d;if(f(this,_),a=this.getValue(e),null!==(r=s.get("fields")||null)){for(l={},d=[],n=0,o=r.length;n<o;n++)void 0===a[i=r[n]]?wt(`Model field \`${i}\` is undefined on element:`,t):l[i]=a[i],d.push(this.bindModel(t,l));return d}this.bindModel(t,a)}bindModel(t,e){var s,i;return"string"!=(i=typeof value)&&"number"!=i&&(s=JSON.stringify(e)),t.setAttribute("data-model",s)}},this.Maslosoft.Binder.DateFormatter=class extends this.Maslosoft.Binder.MomentFormatter{constructor(t){super(new Maslosoft.Binder.DateOptions(t))}},m=this.Maslosoft.Binder.DatePicker=class extends this.Maslosoft.Binder.Picker{constructor(t){super(new Maslosoft.Binder.DateOptions(t)),this.updateModel=this.updateModel.bind(this),this.getDisplayValue=this.getDisplayValue.bind(this),this.getModelValue=this.getModelValue.bind(this),this.init=this.init.bind(this),this.update=this.update.bind(this)}getData(t){return t?(t=this.getValue(t)||[]).data?t.data:t:""}getOptions(t){var e,s,i={lang:this.options.lang,sourceFormat:this.options.sourceFormat,displayFormat:this.options.displayFormat,format:this.options.displayFormat.toLowerCase(),forceParse:!1,todayHighlight:!0,showOnFocus:!1},r=t.get("dateOptions")||[];if(r)for(e in r)s=r[e],"data"!==e&&"template"!==e&&("format"===e&&(i.displayFormat=s.toUpperCase()),i[e]=s);return i}updateModel(t,e,s){var i,r;if(f(this,m),r=this.getOptions(s),i=this.getData(e),t=this.getModelValue(t.value,r),r=e(),i!==t)return r&&r.data?ko.expressionRewriting.writeValueToProperty(ko.unwrap(e()).data,s,"datePicker.data",t):ko.expressionRewriting.writeValueToProperty(e(),s,"datePicker",t)}getDisplayValue(t,e){return f(this,m),!t||t&&0===t.length?"":("unix"===e.sourceFormat?moment.unix(t):moment(t,e.sourceFormat)).format(e.displayFormat)}getModelValue(t,e){return f(this,m),t?"unix"===e.sourceFormat?moment(t,e.displayFormat).unix():moment(t,e.displayFormat).format(e.sourceFormat):null}init(s,i,r,t){var n,e,o,a,l,d,h;f(this,m),l=this.getOptions(r),h=this.getDisplayValue(this.getData(i),l),s.value=h||"",n=jQuery(s),d=l.template||`<div class="input-group-addon">
	<a class="picker-trigger-link" style="cursor: pointer;">
		<i class="glyphicon glyphicon-calendar"></i>
	</a>
</div>`,(d=jQuery(d)).insertBefore(n),d=d.find("a.picker-trigger-link"),n.datepicker(l),a=t=>((h=n.datepicker("getDate"))&&this.updateModel(s,i,r),!1),o=t=>{var e=Date.parse(s.value);return!(!e||t.isTrigger||(s.value=this.getDisplayValue(Math.round(e.getTime()/1e3),l),this.updateModel(s,i,r),n.datepicker("update"),0))},n.on("changeDate",t=>(a(),!0)),n.on("change",o),n.on("blur",o),e=!1,n.on("show",t=>e=!0),n.on("hide",t=>e=!1),d.on("mousedown",function(t){e?n.datepicker("hide"):n.datepicker("show"),t.stopPropagation(),t.preventDefault()})}update(t,e,s){var i;if(f(this,m),(i=e())&&i.data?ko.utils.setTextContent(t,i.data):ko.utils.setTextContent(t,i),i=this.getOptions(s),s=this.getDisplayValue(this.getData(e),i),t.value!==s)return t.value=s}},this.Maslosoft.Binder.DateTimeFormatter=class extends this.Maslosoft.Binder.MomentFormatter{constructor(t){super(new Maslosoft.Binder.DateTimeOptions(t))}},v=this.Maslosoft.Binder.DecimalFormatter=function(){class t extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.init=this.init.bind(this),this.update=this.update.bind(this)}init(t,e,s,i){f(this,v)}update(t,e,s,i){var r,n,o,a,l,d;for(f(this,v),e=this.getValue(e)||0,e=parseFloat(e),n={},o=0,a=(d=["precision","decimalSeparator","thousandSeparator","suffix","prefix"]).length;o<a;o++)n[l=d[o]]=this[l],void 0!==(r=s.get(l))&&(n[l]=this.getValue(r));return e=c(e,n.precision,3,n.thousandSeparator,n.decimalSeparator),t.innerHTML=n.prefix+e+n.suffix}}return t.prototype.precision=2,t.prototype.decimalSeparator=",",t.prototype.thousandSeparator=" ",t.prototype.suffix="",t.prototype.prefix="",t}.call(this),this.Maslosoft.Binder.Disabled=class extends this.Maslosoft.Binder.CssClass{constructor(t){super(new Maslosoft.Binder.CssOptions({className:"disabled"}))}},Y=this.Maslosoft.Binder.EnumCssClassFormatter=class extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.update=this.update.bind(this)}update(t,e,s,i){var r,n,o,a;for(f(this,Y),r=0,n=(a=(e=this.getValue(e)).values).length;r<n;r++)o=a[r],o=new RegExp(`(?:^|\\s)${o}(?!\\S)`,"g"),t.className=t.className.replace(o,"");t.className+=" "+e.values[e.data]}},J=this.Maslosoft.Binder.EnumFormatter=class extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.update=this.update.bind(this)}update(t,e,s,i){f(this,J),void 0!==(e=this.getValue(e)).values[e.data]?t.innerHTML=e.values[e.data]:t.innerHTML=e.data}},s=this.Maslosoft.Binder.Eval=class extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.init=this.init.bind(this),this.update=this.update.bind(this)}init(t,e){return f(this,s),e=this.getValue(e),console.log(e),{controlsDescendantBindings:!e}}update(t,e){return f(this,s),e=this.getValue(e),console.log(e),{controlsDescendantBindings:!e}}},y=this.Maslosoft.Binder.Fancytree=function(){class t extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.init=this.init.bind(this),this.handle=this.handle.bind(this),this.update=this.update.bind(this)}getData(t){t=this.getValue(t)||[];return t.data||t}init(t,e,s,i){var r,n,o,a,l;if(f(this,y),a=this.getData(e),o=e().options||{},l=this.getValue(e).on||!1,o.toggleEffect=!1,o.source=a.children,o.extensions=[],l=new Q(a,l,o),r=e().dnd||!1,n=e().drag||!1,r&&n)throw new Error("Cannot use both `dnd` and `drag`");return r&&(o.autoScroll=!1,o.extensions.push("dnd"),o.dnd=new R(a,t,l)),n&&(o.autoScroll=!1,o.extensions.push("dnd"),o.dnd=new L(a,t)),r=e().nodeIcon||!1,l=e().folderIcon||!1,n=e().nodeRenderer||!1,l&&!r&&wt("Option `folderIcon` require also `nodeIcon` or it will not work at all"),(r||n)&&(r&&(o.icon=!1),e=new I(a,o,r,l),n&&e.setRenderer(new n(a,o)),o.renderNode=e.render),jQuery(t).fancytree(o)}handle(t,e,s){var i;return f(this,y),i=this.getValue(e),t=jQuery(t),setTimeout(()=>{if(t.find(".ui-fancytree").length)return t.fancytree("option","source",this.getData(e).children),i.autoExpand&&t.fancytree("getRootNode").visit(function(t){return t.setExpanded(!0)}),t.focus()},0)}update(t,e,s,i){return f(this,y),this.handle(t,e,s)}}return t.prototype.tree=null,t.prototype.element=null,t}.call(this),b=this.Maslosoft.Binder.FileSizeFormatter=function(){class t extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.init=this.init.bind(this),this.update=this.update.bind(this)}init(t,e,s,i){f(this,b)}update(t,e,s,i){var r,n,o;return f(this,b),e=this.getValue(e)||0,r=this.binary,n=!this.binary,r&&(o=1024),n&&(o=1e3),t.innerHTML=(t=>{var e,s;if((t=parseInt(t))<o)return t+" B";for(e=-1,r&&(s=this.units.binary),n&&(s=this.units.decimal);;)if(e++,!(o<(t/=o)))break;return s[e]?Math.max(t,.1).toFixed(1)+" "+s[e]:Math.max(t,.1).toFixed(1)+` ~*${e*o} * ${o} B`})(e)}}return t.prototype.units={binary:["kiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],decimal:["kB","MB","GB","TB","PB","EB","ZB","YB"]},t.prototype.binary=!0,t}.call(this),M=this.Maslosoft.Binder.GoogleMap=class extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.init=this.init.bind(this),this.update=this.update.bind(this),this.apply=this.apply.bind(this)}init(t,e,s,i){return f(this,M),this.apply(t,this.getValue(e))}update(t,e,s,i){return f(this,M),this.apply(t,this.getValue(e))}apply(t,e){var s,i;if(f(this,M),console.log(t,e),s=new google.maps.LatLng(e.lat,e.lng),i={zoom:e.zoom,center:s,mapTypeId:e.type},t=new google.maps.Map(t,i),e.markers)return new google.maps.Marker({position:s,map:t})}},Z=this.Maslosoft.Binder.Hidden=class extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.update=this.update.bind(this)}update(t,e){var s;return f(this,Z),s=!this.getValue(e),ko.bindingHandlers.visible.update(t,function(){return s})}},B=this.Maslosoft.Binder.Href=function(){var i;class t extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.init=this.init.bind(this),this.update=this.update.bind(this)}init(t,e,s){if(f(this,B),e=this.getValue(e),!t.href&&e&&n(t,"href"),i(t),s.get("stopPropagation")||!1)return ko.utils.registerEventHandler(t,"click",function(t){return t.stopPropagation()})}update(t,e,s){return f(this,B),i(t),(e=this.getValue(e))?(s=s.get("target")||"",n(t,"href"),n(t,"target"),t.getAttribute("href")!==e&&t.setAttribute("href",e),t.getAttribute("target")!==s?t.setAttribute("target",s):void 0):t.removeAttribute("href")}}return i=function(n){if("a"===n.tagName.toLowerCase())return setTimeout(function(){for(var t,e=jQuery(n).find("a"),s=[],i=0,r=e.length;i<r;i++)t=e[i],t=jQuery(t),s.push(t.replaceWith(t.contents()));return s},0)},t}.call(this),X=this.Maslosoft.Binder.Html=class extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.update=this.update.bind(this)}init(t,e,s,i){return{controlsDescendantBindings:!0}}update(t,e,s,i){var r;return f(this,X),e=this.getValue(e),s=this.getValue(s).plugins,(r=new l(t)).from(s),e=r.getElementValue(t,e),ko.utils.setHtml(t,e)}},tt=this.Maslosoft.Binder.HtmlTree=class kt extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.update=this.update.bind(this)}static drawNode(t){var e,s,i,r,n,o=document.createElement("li");if(o.innerHTML=t.title,t.children&&0<t.children.length){for(e=document.createElement("ul"),s=0,i=(n=t.children).length;s<i;s++)r=n[s],r=kt.drawNode(r),e.appendChild(r);o.appendChild(e)}return o}getData(t){t=this.getValue(t)||[];return t.data?this.getValue(t.data)||[]:t}update(e,t,s,i){var r;return f(this,tt),r=this.getValue(t),wt("HtmlTree is experimental, do not use"),setTimeout(()=>{var t=kt.drawNode(r);return e.innerHTML="",e.appendChild(t)},0)}},w=this.Maslosoft.Binder.HtmlValue=function(){var o;class t extends this.Maslosoft.Binder.Base{constructor(t={}){super(t),this.init=this.init.bind(this),this.update=this.update.bind(this),ko.bindingHandlers.sortable&&ko.bindingHandlers.sortable.options&&(ko.bindingHandlers.sortable.options.cancel=":input,button,[contenteditable]")}getElementValue(t){return t.innerHTML}setElementValue(t,e){return t.innerHTML=e}init(i,r,t){var e,s,n;f(this,w),i.setAttribute("contenteditable",!0),i.id||(i.id="maslosoft-binder-htmlvalue-"+o++),t=this.getValue(t).plugins,(n=new l(i)).from(t),s=()=>{var t,e,s;if(i=i&&document.getElementById(i.id))return t=r(),s=this.getValue(r),e=this.getElementValue(i),ko.isWriteableObservable(t)&&s!==(e=n.getModelValue(i,e))?t(e):void 0},e=()=>setTimeout(s,0),jQuery(i).on("keyup, input",s),jQuery(document).on("mouseup",e),jQuery(document).on("changed.htmlvalue",s),ko.utils.domNodeDisposal.addDisposeCallback(i,function(t){return jQuery(t).off("keyup, input",s),jQuery(document).off("mouseup",e),jQuery(document).off("changed.htmlvalue",s)})}update(t,e,s){var i;f(this,w),e=this.getValue(e),s=this.getValue(s).plugins,(i=new l(t)).from(s),e=i.getElementValue(t,e),this.getElementValue(t)!==e&&this.setElementValue(t,e)}}return o=0,t}.call(this),et=this.Maslosoft.Binder.Icon=class extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.update=this.update.bind(this)}update(t,e,s){var i,r,n,o,a,l,d;f(this,et),i=$(t),e=this.getValue(e),r=this.getValue(s),d=s.get("iconField")||"icon",e?(o=!1,(d=e[d]).match(/\.(svg)$/)&&(o=!0),a="",d.match(/\.(jpg|jped|gif|png|svg)$/)&&(a=d.match(/[^\/]*?\.(jpg|jped|gif|png|svg)$/)[0],d=d.replace(/[^\/]*?\.(jpg|jped|gif|png|svg)$/,"")),!a&&e.filename&&(a=e.filename),l=void 0===e.iconSize?16:e.iconSize,s=s.get("iconSize")||l,l=new RegExp("/"+l+"/","g"),n=void 0===e.isImage||e.isImage,(n=o?!1:n)?(d.match(new RegExp("/$"))||(d+="/"),d.match(new RegExp("/w/","g"))?d=d.replace(l,"/"+s+"/"):d+=`w/${s}/h/${s}/p/0/`,e.updateDate&&(o=null,"number"==typeof(o=e.updateDate.sec||e.updateDate)&&(d+=o),"string"==typeof o)&&(d+=o)):((n=16)<s&&(n=32),32<s&&(n=48),d=d.replace(l,"/"+(n=48<s?512:n)+"/")),d.match(/\/$/)?d+=a:d=d+"/"+a,r.cachebusting&&(d=d+"?"+(new Date).getTime()),i.attr("src")!==d&&(r.preloader&&i.attr("src",r.preloader),p(i,d)),i.css({width:s+"px",height:"auto",maxWidth:"100%"})):console&&(console.warn("Binding value for `icon` binding not defined, skipping. Element:"),console.warn(t),console.warn((new Error).stack))}},k=this.Maslosoft.Binder.Id=class extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.init=this.init.bind(this),this.update=this.update.bind(this)}init(t){return f(this,k),n(t,"id")}update(t,e){if(f(this,k),e=this.getValue(e),t.getAttribute("id")!==e)return t.setAttribute("id",e)}},V=this.Maslosoft.Binder.Log=class extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.update=this.update.bind(this),this.init=this.init.bind(this)}update(t,e,s){return f(this,V),console.log(this.getValue(e),t)}init(t,e,s,i){return f(this,V),console.log(this.getValue(e),t)}},C=this.Maslosoft.Binder.PickaDate=class extends this.Maslosoft.Binder.Picker{constructor(t){super(new Maslosoft.Binder.DateOptions(t)),this.updateModel=this.updateModel.bind(this),this.getDisplayValue=this.getDisplayValue.bind(this),this.getModelValue=this.getModelValue.bind(this),this.init=this.init.bind(this),this.update=this.update.bind(this)}updateModel(t,e,s){var i;if(f(this,C),i=this.getValue(e),t=this.getModelValue(t.value),ko.isWriteableObservable(e),i!==t)return ko.expressionRewriting.writeValueToProperty(e(),s,"datePicker",t),t}getDisplayValue(t){return f(this,C),("unix"===this.options.sourceFormat?moment.unix(t):moment(t,this.options.sourceFormat)).format(this.options.displayFormat)}getModelValue(t){return f(this,C),"unix"===this.options.sourceFormat?moment(t,this.options.displayFormat).unix():moment(t,this.options.displayFormat).format(this.options.sourceFormat)}init(e,s,i,t){var r,n,o,a,l;f(this,C),a=this.getDisplayValue(this.getValue(s)),(l=jQuery(e)).val(a),a=this.options.template||`<div class="input-group-addon">
	<a class="picker-trigger-link" style="cursor: pointer;">
		<i class="glyphicon glyphicon-calendar"></i>
	</a>
</div>`,(a=jQuery(a)).insertAfter(l),a=a.find("a.picker-trigger-link"),n={format:this.options.displayFormat.toLowerCase(),selectMonths:!0,selectYears:!0},n=a.pickadate(n),(o=n.pickadate("picker")).on("set",()=>{l.val(o.get("value")),this.updateModel(e,s,i)}),(r={}).change=()=>{var t=Date.parse(e.value);t&&(o.set("select",[t.getFullYear(),t.getMonth(),t.getDate()]),this.updateModel(e,s,i))},r.keyup=function(t){86===t.which&&t.ctrlKey&&r.change()},r.mouseup=r.change,r.focus=()=>{o.open(!1)},r.blur=t=>{t.relatedTarget||(o.close(),this.updateModel(e,s,i))},l.on(r),a.on("click",function(t){var e=jQuery(o.$root[0]);0<jQuery(e.children()[0]).height()?o.close():o.open(!1),t.stopPropagation(),t.preventDefault()})}update(t,e){if(f(this,C),ko.utils.setTextContent(t,e()),e=this.getDisplayValue(this.getValue(e)),t.value!==e)return t.value=e}},T=this.Maslosoft.Binder.Placeholder=class extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.init=this.init.bind(this),this.update=this.update.bind(this)}init(t){return f(this,T),n(t,"placeholder")}update(t,e){if(f(this,T),e=this.getValue(e),t.getAttribute("placeholder")!==e)return e=$("<div/>").html(e).text(),t.setAttribute("placeholder",e)}},E=this.Maslosoft.Binder.Select2=function(){var d,e,h;class t extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.init=this.init.bind(this),this.update=this.update.bind(this)}init(){var t;return f(this,E),t=arguments,setTimeout(function(){return e.apply(null,t)},0)}update(t,e,s){f(this,E)}}return d="select2Data",h=function(t,e){var s=ko.isObservable(e),i=void 0;s&&(i=e.equalityComparer,e.equalityComparer=function(){return!0}),$(t).trigger("change"),s&&(e.equalityComparer=i)},e=function(e,t,s,i,r){var t=ko.unwrap(t()),n=s(),o=!1,a=null,l=null;$(e).on("select2:selecting select2:unselecting",function(){o=!0}),$(e).on("select2:select select2:unselect",function(){o=!1}),ko.isObservable(n.value)?l=n.value.subscribe(function(t){o||h(e,this._target||this.target)}):ko.isObservable(n.selectedOptions)&&(l=n.selectedOptions.subscribe(function(t){o||h(e,this._target||this.target)})),ko.isWriteableObservable(n[d])&&(a=function(){$(e).data("select2")&&n[d]($(e).select2("data"))},$(e).on("change",a)),$(e).select2(t),n.selectedOptions&&$(e).val(n.selectedOptions).trigger("change"),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){$(e).select2("destroy"),null!==a&&$(e).off("change",a),null!==l&&l.dispose()})},t}.call(this),this.Maslosoft.Binder.Selected=class extends this.Maslosoft.Binder.CssClass{constructor(t){super(new Maslosoft.Binder.CssOptions({className:"selected"}))}},F=this.Maslosoft.Binder.Src=class extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.init=this.init.bind(this),this.update=this.update.bind(this)}init(t){return f(this,F),n(t,"src")}update(t,e){if(f(this,F),e=this.getValue(e),t.getAttribute("src")!==e)return t.setAttribute("src",e)}},j=this.Maslosoft.Binder.Tags=function(){var c,p;class t extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.setTags=this.setTags.bind(this),this.init=this.init.bind(this),this.update=this.update.bind(this)}setTags(t,e){var s,i,r,n,o,a,l;for(f(this,j),(o=t.find("option")).length&&o.remove(),a=[],s=i=0,r=e.length;i<r;s=++i)l=e[s],(n=jQuery("<option selected='true'></option>")).val(l),n.text(l),a.push(t.append(n));return a}init(t,e,s,i,r){var n,o,a,l,d,h,u;if(f(this,j),"select"!==t.tagName.toLowerCase())throw new Error("Tags binding must be placed on `select` element");return p&&(jQuery(c).appendTo("head"),p=!1),o=this.getValue(e),u=o.data||o,e=JSON.parse(JSON.stringify(u)),(l=jQuery(t)).data("tags",!0),l.attr("multiple",!0),this.setTags(l,e),n={placeholder:o.placeholder,tags:!0,tokenSeparators:[","," "]},h=function(){var t;if(o.inputCss)return(t=l.parent().find(".select2-search__field")).addClass(o.inputCss),t.attr("placeholder",o.placeholder)},o.tagCss&&(n.templateSelection=function(t,e){return e.removeClass("select2-selection__choice"),e.addClass(o.tagCss),t.selected,jQuery(`<span>${t.text}</span>`)}),d=()=>{var t,e,s,i,r;if(u.removeAll?u.removeAll():u=[],t=l.val())for(e=s=0,i=t.length;s<i;e=++s)(r=(r=t[e]).replace(",","").replace(" ","").trim())&&u.push(r);return h()},a=t=>{if(jQuery(t.target).data())return jQuery("body").toggleClass("kill-all-select2-dropdowns","select2:opening"===t.type)},setTimeout(()=>(l.select2(n),h(),l.on("change",d),l.on("select2:select select2:unselect",d),l.on("select2:opening select2:close",a),ko.utils.domNodeDisposal.addDisposeCallback(t,()=>{if(l.select2("destroy"),null!==d)return l.off("change",d),l.off("select2:select select2:unselect",d)})),0)}update(t,e,s){var i,r,n;return f(this,j),e=this.getValue(e),n=e.data||e,i=JSON.parse(JSON.stringify(n)),r=jQuery(t),setTimeout(()=>{var t=null===r.val()?"":r.val().join(",").replace(/(,+)/g,",").replace(/(\s+)/g," ");if(t!==n.join(","))return this.setTags(r,i)},0)}}return c=`<style>
	body.kill-all-select2-dropdowns .select2-dropdown {
		display: none !important;
	}
	body.kill-all-select2-dropdowns .select2-container--default.select2-container--open.select2-container--below .select2-selection--single, .select2-container--default.select2-container--open.select2-container--below .select2-selection--multiple
	{
		border-bottom-left-radius: 4px;
		border-bottom-right-radius: 4px;
	}
	.select2-container--default.select2-container--focus .select2-selection--multiple {
		border-color: #66afe9;
		outline: 0;
		-webkit-box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102,175,233,.6);
		box-shadow: inset 0 1px 1px rgba(0,0,0,.075), 0 0 8px rgba(102,175,233,.6);
	}
</style>`,p=!0,t}.call(this),st=this.Maslosoft.Binder.Text=class extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.update=this.update.bind(this)}init(t,e,s,i){return{controlsDescendantBindings:!0}}update(t,e,s,i){var r;return f(this,st),e=d(this.getValue(e)),s=this.getValue(s).plugins,(r=new l(t)).from(s),e=r.getElementValue(t,e),ko.utils.setHtml(t,e)}},it=this.Maslosoft.Binder.TextToBg=class extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.update=this.update.bind(this)}init(t,e,s,i){}update(t,e,s,i){return f(this,it),e=this.getValue(e),jQuery(t).css("background-color",mt(e))}},this.Maslosoft.Binder.TextValue=class extends this.Maslosoft.Binder.HtmlValue{getElementValue(t){return t.textContent||t.innerText||""}setElementValue(t,e){if(void 0!==t.textContent&&(t.textContent=e),void 0!==t.innerText)return t.innerText=e}},this.Maslosoft.Binder.TextValueHLJS=class extends this.Maslosoft.Binder.HtmlValue{getElementValue(t){return t.textContent||t.innerText||""}setElementValue(t,e){if(void 0!==t.textContent&&(t.textContent=e,hljs)&&hljs.highlightBlock(t),void 0!==t.innerText&&(t.innerText=e,hljs))return hljs.highlightBlock(t)}},rt=this.Maslosoft.Binder.TimeAgoFormatter=class extends this.Maslosoft.Binder.MomentFormatter{constructor(t){super(new Maslosoft.Binder.TimeAgoOptions(t)),this.update=this.update.bind(this)}update(t,e){f(this,rt),e=this.getValue(e),t.innerHTML=moment[this.options.sourceFormat](e).fromNow()}},this.Maslosoft.Binder.TimeFormatter=class extends this.Maslosoft.Binder.MomentFormatter{constructor(t){super(new Maslosoft.Binder.TimeOptions(t))}},this.Maslosoft.Binder.TimePicker=class extends this.Maslosoft.Binder.Base{},nt=this.Maslosoft.Binder.Tooltip=class extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.update=this.update.bind(this)}update(t,e){f(this,nt),e=this.getValue(e),$(t).attr("title",e),$(t).attr("data-original-title",e),$(t).attr("rel","tooltip")}},ot=this.Maslosoft.Binder.Tree=class extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.update=this.update.bind(this)}update(t,e){f(this,ot)}},O=this.Maslosoft.Binder.TreeGrid=function(){var h;class t extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.init=this.init.bind(this),this.update=this.update.bind(this)}init(t,e,s,i,r){var n,o,a,l,d;return f(this,O),l=this.getValue(e),n=l.activeClass,a=jQuery(t),(d=new Maslosoft.Binder.Widgets.TreeGrid.TreeGridView(t,e)).init(),n&&(o=function(t){return a.find("tr").removeClass(n),jQuery(t.currentTarget).addClass(n),!0},a.on("click","tr",o),ko.utils.domNodeDisposal.addDisposeCallback(t,function(t){return d.dispose(),jQuery(t).off("click","tr",o)})),ko.bindingHandlers.template.init(t,h(t,e,r,d),s,i,r),{controlsDescendantBindings:!0}}update(t,e,s,i,r){var n;return f(this,O),n=new Maslosoft.Binder.Widgets.TreeGrid.TreeGridView(t,e,"update"),ko.bindingHandlers.template.update(t,h(t,e,r,n),s,i,r)}}return h=function(t,s,i,r){return function(){var a,l,d,h,t=s(),e=ko.utils.peekObservable(t);return e&&"number"!=typeof e.length?(a=ko.observableArray([]),d=ko.observableArray([]),l=-1,h=function(t){var e,s,i,r,n,o;for(l++,o=[],r=0,n=t.length;r<n;r++)s=(i=t[r]).children&&i.children.length&&0<i.children.length,e={depth:l,hasChilds:s},i._treeGrid=ko.tracker.factory(e),a.push(i),d.push(l),s?(h(i.children),o.push(l--)):o.push(void 0);return o},e.data.children?h(e.data.children):h(e.data),i&&(i.tree=e.data,i.data=a,i.widget=r),ko.utils.unwrapObservable(t),{foreach:a,depths:d,as:e.as,includeDestroyed:e.includeDestroyed,afterAdd:e.afterAdd,beforeRemove:e.beforeRemove,afterRender:e.afterRender,beforeMove:e.beforeMove,afterMove:e.afterMove,templateEngine:ko.nativeTemplateEngine.instance}):{foreach:t,templateEngine:ko.nativeTemplateEngine.instance}}},t}.call(this),A=this.Maslosoft.Binder.TreeGridNode=class extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.init=this.init.bind(this),this.update=this.update.bind(this)}init(t,e,s,i,r){f(this,A)}update(t,e,s,i,r){var n,o,a,l;return f(this,A),ko.utils.toggleDomNodeCssClass(t,"tree-grid-drag-handle",!0),a=[],e=this.getValue(e)._treeGrid,l=(r=r.widget.config).nodeIcon,o=r.folderIcon,r=r.expanderIcon||"<i class='glyphicon glyphicon-triangle-bottom'></i>",o&&e.hasChilds&&(l=o),o=e.depth,(n=[]).push(`<div class='collapsed' style='display:none;transform: rotate(-90deg);'>${r}</div>`),n.push(`<div class='expanded' style='display:none;transform: rotate(-45deg);'>${r}</div>`),a.push(`<a class='expander' style='cursor:pointer;text-decoration:none;width:1em;margin-left:${o}em;display:inline-block;'>${n.join("")}</a>`),o=e.depth+1,a.push(`<i class='no-expander' style='margin-left:${o}em;display:inline-block;'></i>`),a.push(`<img src='${l}' style='width: 1em;height:1em;margin-top: -.3em;display: inline-block;'/>`),t.innerHTML=a.join("")+t.innerHTML}},H=this.Maslosoft.Binder.Validator=function(){var a;class t extends this.Maslosoft.Binder.Base{constructor(t){super(new Maslosoft.Binder.ValidatorOptions),this.init=this.init.bind(this),this.update=this.update.bind(this)}getElementValue(t){return"input"===t.tagName.toLowerCase()||"textarea"===t.tagName.toLowerCase()?t.value:t.textContent||t.innerText||""}init(s,t,e,i){var r,n,o;return f(this,H),t=this.getValue(t),o=this.options.classField,o=new l(s,o).from(t),(n=new G(o,this.options)).init(s),s.id||(s.id="Maslosoft-Ko-Binder-Validator-"+a++),r=this.getElementValue(s),t=t=>{var e;if(s=s&&document.getElementById(s.id))return e=this.getElementValue(s),r!==e?(r=e,n.validate(s,e)):void 0},ko.utils.registerEventHandler(s,"keyup, input",t),ko.utils.registerEventHandler(document,"mouseup",t)}update(t,e,s){f(this,H)}}return a=0,t}.call(this),N=this.Maslosoft.Binder.VideoPlaylist=function(){class t extends this.Maslosoft.Binder.Video{constructor(){super(...arguments),this.init=this.init.bind(this),this.update=this.update.bind(this)}getData(t){t=this.getValue(t)||[];return t.data||t}init(t,e,s,i){f(this,N)}update(t,e,s,i){var r,n,o,a,l,d,h,u;for(f(this,N),r=this.getData(e),h=(e=this.getValue(e||{})).urlField||"url",l=e.urlField||"title",n=[],o=0,a=r.length;o<a;o++)d=(u=r[o])[h],u=u[l],this.isVideoUrl(d)&&n.push(`<a href='${d}'>${u}</a>`);return t.innerHTML=n.join("\n"),n.length?(ko.utils.toggleDomNodeCssClass(t,"maslosoft-playlist",!0),new Maslosoft.Playlist(t)):ko.utils.toggleDomNodeCssClass(t,"maslosoft-playlist",!1)}}return t.prototype.initVideos=null,t}.call(this),at=this.Maslosoft.Binder.VideoThumb=class extends this.Maslosoft.Binder.Video{constructor(){super(...arguments),this.init=this.init.bind(this),this.update=this.update.bind(this)}init(t,e,s,i){f(this,at)}update(t,e){return f(this,at),e=this.getValue(e),this.setThumb(e,t)}},lt=this.Maslosoft.Binder.Widget=class extends this.Maslosoft.Binder.Base{constructor(){super(...arguments),this.init=this.init.bind(this),this.update=this.update.bind(this)}init(t,e,s,i){var r,n,o,a,l;if(f(this,lt),e=this.getValue(e),"string"!=typeof(o=s.get("ref"))&&o)"object"==typeof o&&(l=o);else{if("function"!=typeof e)return;if("function"!=typeof e.constructor)return;try{l=new e}catch(t){return void 0}o&&gt(o,l),o=o&&l}if(n=s.get("params"))for(r in n)a=n[r],l[r]=a;if("function"==typeof l.init&&l.init(t),"function"==typeof l.dispose)return ko.utils.domNodeDisposal.addDisposeCallback(t,l.dispose)}update(t,e){f(this,lt)}},dt=this.Maslosoft.Binder.WidgetAction=class extends this.Maslosoft.Binder.WidgetUrl{constructor(){super(...arguments),this.update=this.update.bind(this)}update(t,e,s){return f(this,dt),e=this.getData(t,e,s,"action"),s=this.createUrl(e.id,e.action,e.params,"?"),t.setAttribute("href",s),this.setRel(t)}},ht=this.Maslosoft.Binder.WidgetActivity=class extends this.Maslosoft.Binder.WidgetUrl{constructor(){super(...arguments),this.update=this.update.bind(this)}update(t,e,s){return f(this,ht),e=this.getData(t,e,s,"activity"),s=this.createUrl(e.id,e.activity,e.params,"#"),t.setAttribute("href",s),this.setRel(t)}},l=function(){class t{constructor(t=null,e="_class"){this.getElementValue=this.getElementValue.bind(this),this.getModelValue=this.getModelValue.bind(this),this.element=t,this.classField=e,this.plugins=new Array}from(t){var e,s,i,r,n,o,a,l,d=this.element,h=this.classField;if(this.plugins=new Array,!(t=ko.isObservable(t)?ko.unwrap(t):t))return this.plugins;for(n=0,o=(e=t.constructor===Array?t:[t]).length;n<o;n++)if((i=e[n])[h]){if("function"==typeof i[h]){for(r in s=i[h],delete i[h],a=new s,i)l=i[r],a[r]=null,a[r]=l;return this.plugins.push(a),this.plugins}xt(`Parameter \`${h}\` must be plugin compatible class, binding defined on element:`,d)}else xt(`Parameter \`${h}\` must be defined for plugin on element:`,d)}getElementValue(t,e){for(var s,i=this.plugins,r=0,n=i.length;r<n;r++)"function"==typeof(s=i[r]).getElementValue&&(e=s.getElementValue(t,e));return e}getModelValue(t,e){for(var s,i=this.plugins,r=0,n=i.length;r<n;r++)"function"==typeof(s=i[r]).getModelValue&&(e=s.getModelValue(t,e));return e}}return t.prototype.classField="_class",t.prototype.element=null,t.prototype.plugins=null,t}.call(this),R=function(){class t{constructor(t,e,s,i){this.dragEnd=this.dragEnd.bind(this),this.dragDrop=this.dragDrop.bind(this),this.events=s,this.draggable={},this.draggable.scroll=!1,this.tree={},this.tree=t,this.finder=new a(this.tree),this.el=jQuery(e)}dragStart(t,e){return!0}dragEnter(t,e){return!0}dragEnd(t,e){return W("drag end..."),!0}dragDrop(t,e){var s,i,r,n,o=e.hitMode,a=e.draggable.element[0];return this.events.drop(t,e),e.otherNode?(n=this.finder.find(e.otherNode.parent.data.id),s=this.events.getNode(this.finder.find(e.otherNode.data.id)),this.el.is(a)||(W("From other instance..."),e=ko.dataFor(a),W(e),setTimeout(i,0))):(e=ko.contextFor(a),s=this.events.getNode(e.$data)),a=this.finder.find(t.data.id),e=this.finder.find(t.parent.data.id),n&&n.children.remove(s),this.tree.children.remove(s),e&&e.children.remove(s),"over"===o&&a.children.push(s),"before"===o&&(e?(r=e.children.indexOf(a),e):(r=this.tree.children.indexOf(a),this.tree)).children.splice(r,0,s),"after"===o&&(e||this.tree).children.push(s),i=t=>(W(t),this.el.fancytree("option","source",this.tree.children),this.el.fancytree("getRootNode").visit(function(t){return t.setExpanded(!0)}),this.el.focus(),W("update tree..",this.el)),setTimeout(i,0),!0}}return t.prototype.autoExpandMS=400,t.prototype.focusOnClick=!1,t.prototype.preventVoidMoves=!0,t.prototype.preventRecursiveMoves=!0,t.prototype.tree=null,t.prototype.finder=null,t.prototype.draggable=null,t.prototype.events=null,t.el=null,t}.call(this),L=function(){class t{constructor(t,e,s,i){this.dragEnd=this.dragEnd.bind(this),this.dragDrop=this.dragDrop.bind(this),this.draggable={},this.draggable.scroll=!1,this.tree={},this.tree=t,this.finder=new a(this.tree),this.el=jQuery(e)}dragStart(t,e){return!0}dragEnter(t,e){return!1}dragEnd(t,e){return W("drag end..."),!0}dragDrop(t,e){return!1}}return t.prototype.focusOnClick=!1,t.prototype.tree=null,t.prototype.finder=null,t.prototype.draggable=null,t.el=null,t}.call(this),Q=function(){var r,n,o;class t{constructor(t,e,s){this.drop=this.drop.bind(this),this.getNode=this.getNode.bind(this),this.handle=this.handle.bind(this),this.events=e,this.options=s,n=new a(t),this.handle("click"),this.handle("dblclick"),this.handle("activate"),this.handle("deactivate")}drop(t,e){if(W("Drop..."),W(this.events),this.events.drop)return this.dropEvent=new this.events.drop(t,e),W(this.dropEvent)}getNode(t){return W("Tree event drop..."),W(this.dropEvent),this.dropEvent&&this.dropEvent.getNode?this.dropEvent.getNode(t):t}handle(i){if(this.events[i])return this.options[i]=(t,e)=>{var s;if(r(e))return s=n.find(e.node.data.id),this.events[i](s,e,t),o(t)}}}return t.prototype.events=null,t.prototype.dropEvent=null,n=t.prototype.options=null,r=function(t){return void 0===t.targetType||"title"===t.targetType||"icon"===t.targetType||void 0},o=function(t){return t.stopPropagation()},t}.call(this),t=function(){var s;return s={},class{constructor(){}get(t){return void 0!==s[t]&&s[t]}set(t,e){return s[t]=e}}}.call(this),a=function(){var a,l,r;return a=new t,r=[],l=function(t,e){var s,i,r,n,o;if(void 0!==e){if(s=a.get(e))return s;if(t.id===e)return t;if(t._id===e)return t;if(t.children&&0<t.children.length)for(r=0,n=(o=t.children).length;r<n;r++)if(i=o[r],!1!==(i=l(i,e)))return a.set(e,i),i}return!1},class{constructor(t){r.push(t)}find(t){for(var e,s=0,i=r.length;s<i;s++)if(e=r[s],e=l(e,t))return e;return!1}}}.call(this),I=function(){var o;class t{constructor(t,e,s,i){this.render=this.render.bind(this),this.icon=s,this.folderIcon=i,o=new a(t)}setRenderer(t){if(this.renderer=t,"function"!=typeof this.renderer.render)return console.error("Renderer must have function `render`")}render(t,e){var s,i,r,n=e.node;for(s in e)if(e[s],"originalEvent"===s)return;if(r=jQuery(n.span).find("> span.fancytree-title"),this.renderer&&this.renderer.render&&(i=o.find(n.data.id),this.renderer.render(i,r)),this.icon||this.folderIcon)return i=r.html(),n=this.folderIcon&&n.children&&n.children.length?this.folderIcon:this.icon,r.html(`<i class='node-title-icon' style='background-image:url(${n})'></i> `+i)}}return t.prototype.icon="",t.prototype.folderIcon="",o=t.prototype.renderer=null,t}.call(this),G=function(){var l,d,h;class t{constructor(t,e){this.validate=this.validate.bind(this),this.setElement=this.setElement.bind(this),this.init=this.init.bind(this),this.validateOne=this.validateOne.bind(this),this.adviseOne=this.adviseOne.bind(this),this.validators=t,this.options=e}validate(t,e){var s,i,r,n,o,a,l;for(this.setElement(t),s=0,r=(o=this.validators).length;s<r;s++)if(l=o[s],!this.validateOne(l,e))return!1;for(i=0,n=(a=this.validators).length;i<n;i++)"function"==typeof(l=a[i]).getWarnings&&this.adviseOne(l,e);return!0}setElement(t){return this.element=t,this.parent=jQuery(this.element).parents(".form-group")[0],this.parent&&(this.errors=this.parent.querySelector(this.options.errorMessages),this.warnings=this.parent.querySelector(this.options.warningMessages),l(this.errors),l(this.warnings)),this}init(t){return this.setElement(t)}validateOne(t,e){var s,i=this.element,r=this.parent,n=this.errors,o=this.warnings,a=new Array;return t.reset(),s=!1,s=t.isValid(e)?(this.options.inputError&&h(i,this.options.inputError,!1),this.options.inputSuccess&&h(i,this.options.inputSuccess,!0),r&&(this.options.parentError&&h(r,this.options.parentError,!1),this.options.parentSuccess)&&h(r,this.options.parentSuccess,!0),n&&(l(n),n.innerHTML=""),!0):(a=t.getErrors(),this.options.inputError&&h(i,this.options.inputError,!0),this.options.inputSuccess&&h(i,this.options.inputSuccess,!1),r&&(this.options.parentError&&h(r,this.options.parentError,!0),this.options.parentSuccess)&&h(r,this.options.parentSuccess,!1),n&&a&&(d(n),n.innerHTML=a.join("<br />")),!1),this.options.inputWarning&&h(i,this.options.inputWarning,!1),r&&this.options.parentWarning&&h(r,this.options.parentWarning,!1),o&&(l(o),o.innerHTML=""),s}adviseOne(t,e){var s=this.element,i=this.parent,r=(this.errors,this.warnings),t=t.getWarnings();return t.length&&(this.options.inputWarning&&h(s,this.options.inputWarning,!0),this.options.inputSuccess&&h(s,this.options.inputSuccess,!1),i&&(this.options.parentWarning&&h(i,this.options.parentWarning,!0),this.options.parentSuccess)&&h(i,this.options.parentSuccess,!1),r)&&(d(r),r.innerHTML=t.join("<br />")),this}}return t.prototype.element=null,t.prototype.parent=null,t.prototype.errors=null,t.prototype.warnings=null,h=ko.utils.toggleDomNodeCssClass,l=function(t){return ko.utils.toggleDomNodeCssClass(t,"hide",!0)},d=function(t){return ko.utils.toggleDomNodeCssClass(t,"hide",!1)},t}.call(this),this.Maslosoft.Binder.Widgets.TreeGrid||(this.Maslosoft.Binder.Widgets.TreeGrid={}),Maslosoft.Binder.Widgets.TreeGrid.Dnd=function(){var a,l,d,h,e,i;class t{constructor(t){this.dragStart=this.dragStart.bind(this),this.drag=this.drag.bind(this),this.stop=this.stop.bind(this),this.drop=this.drop.bind(this),this.over=this.over.bind(this),this.dragOver=this.dragOver.bind(this),this.move=this.move.bind(this),this.clear=this.clear.bind(this),this.dragHelper=this.dragHelper.bind(this),this.grid=t,this.grid.config.dnd&&("init"===this.grid.context&&(ko.utils.domNodeDisposal.addDisposeCallback(this.grid.element.get(0),function(){try{if(this.grid.element)return this.grid.element.draggable("destroy"),this.grid.element.droppable("destroy")}catch(t){return console.log(t.message)}}),this.grid.element.on("mousemove","> tr",this.move)),e=e||new Maslosoft.Binder.Widgets.TreeGrid.DropIndicator(this.grid),setTimeout(()=>{var t={handle:".tree-grid-drag-handle",cancel:".expander, input, *[contenteditable], .no-drag",revert:!1,cursor:"pointer",cursorAt:{top:5,left:5},start:this.dragStart,drag:this.drag,stop:this.stop,helper:this.dragHelper},e={tolerance:"pointer",drop:this.drop,over:this.over};return this.grid.element.find("> tr").draggable(t),this.grid.element.find("> tr").droppable(e)},0))}dragStart(t){return l=t.target}drag(t,e){}stop(t,e){if(!a)return this.drop(t,e)}drop(t,e){var s,i,r,n,o;return a=!0,l&&d&&d.get(0)&&(s=ko.dataFor(l),i=ko.dataFor(d.get(0)),this.grid.canDrop(l,d,h))?(this.grid.freeze(),r=this.grid.getParent(i),o=this.grid.getRoot(),n=r.children||r,(()=>{var t;return this.grid.remove(s),"over"===h&&i.children.push(s),"before"===h&&(t=n.indexOf(i),n.splice(t,0,s)),"after"===h&&(i.children.length?n.splice(0,0,s):n.push(s)),"last"===h&&(o.children||o).push(s),this.clear()})()):this.clear()}over(t){if("tr"===t.target.tagName.toLowerCase()&&d!==t.target)return d=jQuery(t.target),this.dragOver(t)}dragOver(t){if(e)return e.precise.over(l,d,h,e)}move(t){var e,s;if(!l||t.currentTarget!==l||d&&l===d.get(0)||(t.target=l,this.over(t)),d&&(s=d.offset(),(e={}).x=t.pageX-s.left,e.y=t.pageY-s.top,(s={}).x=e.x/d.outerWidth(!0),s.y=e.y/d.outerHeight(!0),h=.65<s.y?"after":"over","after"===(h=s.y<=.25?"before":h)&&this.grid.isLast(ko.dataFor(d.get(0)))&&(h="last"),i!==h))return i=h,t.target=d,this.dragOver(t)}clear(){if(this.grid.thaw(),i=h=l=d=null,a=!1,this.helper&&(this.helper.hide(),this.helper=null),e)return e.hide()}dragHelper(t){t=jQuery(t.currentTarget).parent().find(".tree-grid-drag-handle").parents("td").first().clone();return t.find(".expander .expanded").remove(),t.find(".expander .collapsed").remove(),t.find(".expander").remove(),t.find(".no-expander").remove(),this.helper=jQuery(`<div style='white-space:nowrap;'><span class='drop-indicator'>&times;</span>${t.html()}</div>`),this.helper.css("pointer-events","none"),e.attach(this.helper.find(".drop-indicator")),this.helper}}return t.prototype.grid=null,i=h=l=d=e=t.prototype.helper=null,a=!1,t}.call(this),Maslosoft.Binder.Widgets.TreeGrid.DropIndicator=function(){class t{constructor(t){this.grid=t,this.precise=new Maslosoft.Binder.Widgets.TreeGrid.InsertIndicator(this.grid)}attach(t){return this.element=t,this.element.css({"font-size":"1.5em"}),this.element.css({width:"1em"}),this.element.css({height:"1em"}),this.element.css({position:"absolute"}),this.element.css({left:"-.75em"}),this.element.css({top:"-.35em"})}hide(){return this.element.hide(),this.precise.hide()}show(){return this.element.show(),this.precise.show()}accept(){return this.element.html("&check;"),this.element.css({color:"green"}),this.precise.accept()}deny(){return this.element.html("&times;"),this.element.css({color:"red"}),this.precise.deny()}}return t.precise=null,t.element=null,t}.call(this),Maslosoft.Binder.Widgets.TreeGrid.Events=function(){class t{constructor(t,e){this.grid=t,this.grid.config.on}}return t.prototype.grid=null,t}.call(this),Maslosoft.Binder.Widgets.TreeGrid.Expanders=function(){var o,a,l;class t{constructor(t,e){this.updateExpanders=this.updateExpanders.bind(this),this.handler=this.handler.bind(this),this.cancelClick=this.cancelClick.bind(this),this.grid=t,!1!==this.grid.config.expanders&&("init"===this.grid.context&&(this.grid.element.on("mousedown",".expander",this.handler),this.grid.element.on("click",".expander",this.cancelClick)),"update"===this.grid.context)&&this.updateExpanders()}updateExpanders(){var t=(t,e)=>{return e.children&&e.children.length?(t.find(".no-expander").hide(),t.find(".expander").show(),t.find(".expander .collapsed").is(":visible")?void 0:t.find(".expander .expanded").show()):(t.find(".expander").hide(),t.find(".no-expander").show())};return setTimeout(()=>this.grid.visit(t),0)}handler(t){var i,r,n=ko.contextFor(t.target).$data;return t.stopPropagation(),t.preventDefault(),r=!(i=-1),W("clicked on expander "+n.title),this.grid.visit((t,e)=>{var s=e._treeGrid.depth;if(e===n)i=s,r=l(t),t.data("treegrid-manual-state",r);else if(-1!==i){if(s!==i)return i<=s?(r?(t.show(),a):(t.hide(),o))(t):void 0;i=-1}})}cancelClick(t){return t.stopPropagation(),t.preventDefault()}}return l=function(t){t=t.find(".expander"),t=t.find(".expanded:visible").length?(t.find(".expanded").hide(),t.find(".collapsed").show(),!1):(t.find(".collapsed").hide(),t.find(".expanded").show(),!0);return t},a=function(t){t=t.find(".expander");return t.find(".collapsed").hide(),t.find(".expanded").show()},o=function(t){t=t.find(".expander");return t.find(".expanded").hide(),t.find(".collapsed").show()},t.prototype.grid=null,t}.call(this),Maslosoft.Binder.Widgets.TreeGrid.InsertIndicator=function(){var n,e,s;class t{constructor(t){this.grid=t,e||(this.create(),e=!0)}hide(){return n.hide()}show(){return n.show()}accept(){return n.css({color:"green"})}deny(){return n.css({color:"red"})}over(t,e,s="over",i){var r;return this.accept(),i.accept(),"over"===s?this.precise(!1):this.precise(!0),this.grid.canDrop(t,e,s)?(this.accept(),i.accept()):(this.deny(),i.deny()),i=(t=e.find(".tree-grid-drag-handle")).offset(),e=n.outerHeight(!0)/1.5,"over"===s&&(r=t.outerHeight(!0)/1.5,r=i.top+r-e),"before"===s&&(r=i.top-e),"after"===s&&(r=i.top+t.outerHeight(!0)-e),s=i.left+0,n.css({left:s}),n.css({top:r}),this.show()}precise(t=!0){return t?s.show():s.hide()}create(){return(n=jQuery(`<div class="tree-grid-insert-indicator" style="display:none;position:absolute;z-index: 10000;color:green;line-height: 1em;">
	<span class="tree-grid-insert-indicator-coarse" style="font-size: 1.5em;">
		&#9654;
	</span>
	<span class="tree-grid-insert-indicator-precise" style="font-size:1.4em;">
		&#11835;
	</span>
</div>`)).appendTo("body"),n.find(".tree-grid-insert-indicator-coarse"),s=n.find(".tree-grid-insert-indicator-precise")}}return e=!1,s=n=t.prototype.grid=null,t}.call(this),Maslosoft.Binder.Widgets.TreeGrid.TreeGridView=function(){var o;class a{constructor(t,e=null,s="init"){var i,r,n;if(this.visitRecursive=this.visitRecursive.bind(this),this.getParent=this.getParent.bind(this),this.getRoot=this.getRoot.bind(this),this.getContext=this.getContext.bind(this),this.have=this.have.bind(this),this.isLast=this.isLast.bind(this),this.canDrop=this.canDrop.bind(this),this.remove=this.remove.bind(this),this.freeze=this.freeze.bind(this),this.thaw=this.thaw.bind(this),this.getFirstCells=this.getFirstCells.bind(this),this.context=s,this.element=jQuery(t),e)for(this.config={},this.config=ko.unwrap(e()),i=0,r=(n=a.plugins).length;i<r;i++)new n[i](this)}init(){return jQuery(document).on("ajaxStart",this.freeze),jQuery(document).on("ajaxComplete",this.thaw)}dispose(){return jQuery(document).off("ajaxStart",this.freeze),jQuery(document).off("ajaxComplete",this.thaw)}visit(t){for(var e,s,i=this.element.find("> tr"),r=[],n=0,o=i.length;n<o;n++)s=i[n],e=ko.dataFor(s),r.push(t(jQuery(s),e));return r}visitRecursive(t,e=null){var s,i,r,n,o,a,l,d,h,u,c,p,f;if(e){if(e.children&&e.children.length)for(n=0,l=(c=e.children).length;n<l;n++)t(e,s=c[n]),this.visitRecursive(t,s);if(e.length){for(f=[],h=0,d=e.length;h<d;h++)t(e,s=e[h]),f.push(this.visitRecursive(t,s));return f}}else{if(t(null,e=this.getRoot()),e.children&&e.children.length)for(i=0,o=(u=e.children).length;i<o;i++)t(e,s=u[i]),this.visitRecursive(t,s);if(e.length){for(p=[],r=0,a=e.length;r<a;r++)t(e,s=e[r]),p.push(this.visitRecursive(t,s));return p}}}getParent(s){var i=null;return this.visitRecursive(function(t,e){if(e===s)return i=t}),i}getRoot(){return ko.contextFor(this.element.get(0)).tree}getContext(){return ko.contextFor(this.element.get(0))}have(t,s){var i=!1;return this.visitRecursive(function(t,e){if(e===s)return i=!0},t),i}isLast(t){var e=this.element.find("> tr:last()");return t===ko.dataFor(e.get(0))}canDrop(t,e,s){t=ko.dataFor(t),e=ko.dataFor(e.get(0));return"last"===s||"after"===s||t!==e&&!this.have(t,e)}remove(s){return this.visitRecursive(function(t,e){if(t)return(t.children||t).remove(s)})}expandAll(){}collapseAll(){}freeze(){var t,e,s,i,r;for(console.log("Freeze"),o=[],e=this.getFirstCells(),console.log(e),r=[],s=0,i=e.length;s<i;s++)t=e[s],o.push(t.style),t=jQuery(t),r.push(t.css("width",t.width()+"px"));return r}thaw(){var t,e,s,i,r,n;for(console.log("thaw"),n=[],s=i=0,r=(e=this.getFirstCells()).length;i<r;s=++i)t=e[s],n.push(t.style=o[s]);return n}getFirstCells(){var t,e=this.element;return t=(t=(t=(t=(e=this.element.is("tbody")?this.element.parent():e).find("thead tr:first() th"))&&t.length?t:e.find("tr:first() td"))&&t.length?t:e.find("tbody tr:first() td"))&&t.length?t:e.find("tfoot tr:first() th")}}return a.plugins=[Maslosoft.Binder.Widgets.TreeGrid.Expanders,Maslosoft.Binder.Widgets.TreeGrid.Dnd,Maslosoft.Binder.Widgets.TreeGrid.Events],a.prototype.element=null,a.prototype.config=null,o=[],a}.call(this),this.Maslosoft.Ko.getType=function(t){if(x&&"object"==typeof x){if(x.constructor===Date)return"date";if(x.constructor===Array)return"array"}return typeof x},this.Maslosoft.Ko.objByName=function(t,e=window){Array.prototype.slice.call(arguments,2);for(var s,i,r=t.split("."),n=e,o=[],a=s=0,l=r.length;s<l;a=++s){if(i=r[a],o.push(i),void 0===n[i])throw new Error(`Name part \`${o.join(".")}\` not found while accesing `+t);n=n[i]}return n},this.Maslosoft.Ko.Track=class{constructor(){this.factory=this.factory.bind(this),this.fromJs=this.fromJs.bind(this)}factory(t){var e,s,i,r,n,o,a,l;if(t){if(t._class&&"string"==typeof t._class){e=t._class.replace(/\\/g,".");try{a=Maslosoft.Ko.objByName(e)}catch(t){console.warn(`Could not resolve class name \`${e}\``)}if(a)return new a(t);console.warn(`Class \`${e}\` not found, using default object`),console.debug(t)}if("object"==typeof t)if(t=ko.track(t,{deep:!0}),Array.isArray(t))for(s=i=0,r=t.length;i<r;s=++i)n=t[s],t[s]=this.factory(n);else for(o in t)l=t[o],t[o]=this.factory(l)}return t}fromJs(t,e){var s,i,r=[];for(s in e)"object"==typeof(i=e[s])?Array.isArray(i)?t[s]=this.factory(i):t[s]?r.push(this.fromJs(t[s],i)):r.push(t[s]=this.factory(i)):r.push(t[s]=i);return r}},ko.tracker=new this.Maslosoft.Ko.Track,window.Proxy||(console.warn("Your browser does not support Proxy, will not work properly in some cases..."),window.Proxy=class{}),r=class{constructor(t,e){this.parent=t,this.field=e}set(t,e,s,i){var r,n=!1;return t[e]!==s&&(n=!0),r=Object.keys(t).length,t[e]=s,(n=r!==Object.keys(t).length?!0:n)&&ko.valueHasMutated(this.parent,this.field),!0}deleteProperty(t,e){return delete t[e],ko.valueHasMutated(this.parent,this.field),!0}},h=new(WeakMap||Map),this.Maslosoft.Binder.Model=class{constructor(t=null){var e,s,i=h.get(this);for(e in this)s=this[e],u(this[e])&&(this[e]={}),Array.isArray(this[e])&&(this[e]=[]);if(!i)for(e in h.set(this,!0),this)s=this[e],this[e]=ko.tracker.factory(s),u(this[e])&&(this[e]=new Proxy(this[e],new r(this,e)));for(e in t)s=t[e],this[e]=ko.tracker.factory(s);for(e in this)s=this[e],u(this[e])&&(this[e]=new Proxy(this[e],new r(this,e)));ko.track(this,{deep:!0})}},this.Maslosoft.Ko.Balin=this.Maslosoft.Binder,this.Maslosoft.Ko.escapeRegExp=z,this.Maslosoft.Ko.escapeHtml=d,this.Maslosoft.Ko.equals=o,this.Maslosoft.Ko.stringToColour=mt,this.Maslosoft.Ko.preload=p,this.Maslosoft.Ko.numberFormat=c,this.Maslosoft.Ko.lcfirst=K,this.Maslosoft.Ko.ucfirst=vt}.call(this);